var e=Object.defineProperty,t=Object.defineProperties,s=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,o=(t,s,r)=>s in t?e(t,s,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[s]=r,a=(e,t)=>{for(var s in t||(t={}))n.call(t,s)&&o(e,s,t[s]);if(r)for(var s of r(t))i.call(t,s)&&o(e,s,t[s]);return e},c=(e,r)=>t(e,s(r)),l=(e,t,s)=>(o(e,"symbol"!=typeof t?t+"":t,s),s),d=(e,t,s)=>new Promise(((r,n)=>{var i=e=>{try{a(s.next(e))}catch(t){n(t)}},o=e=>{try{a(s.throw(e))}catch(t){n(t)}},a=e=>e.done?r(e.value):Promise.resolve(e.value).then(i,o);a((s=s.apply(e,t)).next())}));import{e as u,c as h,i as p,s as m,S as f,a as y,b as g,d as v,f as b,g as w,h as _,j as $,k as S,l as P,m as E,n as C,o as k,p as x,t as I,q as R,R as T,v as N,r as O,u as D,w as j,x as A,y as M,z as B,A as F,B as V,C as L,D as W,E as q,F as U,G as z,H as K,I as G,J as H,K as J,U as Q,L as Y,M as Z,N as X,O as ee,P as te,Q as se,T as re,V as ne,W as ie,X as oe,Y as ae,Z as ce,_ as le,$ as de}from"./index-734ce4fc.js";function ue(e){const t=e;return class extends t{constructor(...e){super(...e),l(this,"isPointerDown",!1),l(this,"isPointerOver",!1),l(this,"_vbEvents",{}),this.eventMode="static",this.defaultClickEffect(h.Black,.2).defaultHoverEffect(h.White,.3)}getListener(e){return this._vbEvents[e]}_toggle(e,t,s){const r=this._vbEvents[t];return void 0!==r&&this.off(e,r),!0===s?void 0!==r&&this.on(e,r):!1!==s&&(this._vbEvents[t]=s,this.on(e,s)),this}toggle(e,t){return this._toggle(e,e,t)}setOnClick(e){return this._toggle("pointertap","pointertap",e)}setClickSound(e,t){if("object"==typeof e){const s=()=>e.play(t);return this._toggle("pointertap","clicksound",s)}return this._toggle("pointertap","clicksound",e)}setHoverEffect(e,t){if(p())return this;if("boolean"==typeof e)return this._toggle("pointerover","hovereffect",e)._toggle("pointerout","clearhover",e);return this._toggle("pointerover","hovereffect",(t=>{var s,r;this.isPointerOver=!0,this.isPointerDown?null==(r=(s=this._vbEvents).clickeffect)||r.call(s,t):e(t)}))._toggle("pointerout","clearhover",(e=>{this.isPointerOver=!1,t(e)}))}setClickEffect(e,t){if("boolean"==typeof e)return this._toggle("pointerdown","clickeffect",e)._toggle("pointerup","clearclick",e)._toggle("pointerupoutside","clearclick",e);const s=e=>{this.isPointerDown=!1,t(e)};return this._toggle("pointerdown","clickeffect",(t=>{this.isPointerDown=!0,e(t)}))._toggle("pointerup","clearclick",s)._toggle("pointerupoutside","clearclick",s)}defaultHoverEffect(e,t,s=m.colorFilter){return void 0===this._defaultColorFilter&&(this._defaultColorFilter=s),this.setHoverEffect((()=>{var r;s.color=e,s.alpha=t,(null==(r=this.filters)?void 0:r.includes(s))||this.addFilter(s)}),(()=>{var e;null==(e=this.filters)||e.removeOnce(s)}))}defaultClickEffect(e,t,s=m.colorFilter){return void 0===this._defaultColorFilter&&(this._defaultColorFilter=s),this.setClickEffect((()=>{var r;s.color=e,s.alpha=t,(null==(r=this.filters)?void 0:r.includes(s))||this.addFilter(s)}),(()=>{var e;null==(e=this.filters)||e.removeOnce(s)}))}clearEffect(){var e;this.isPointerDown=this.isPointerOver=!1,null==(e=this.filters)||e.removeOnce(this._defaultColorFilter)}}}class he extends u{constructor(){super(),l(this,"_keySet",new Set)}listenKeyboard(e){e.addEventListener("keydown",(e=>{this._keySet.add(e.key),this.emit("down-any",e,this),this.emit(`down-${e.key}`,e,this)})),e.addEventListener("keyup",(e=>{this._keySet.delete(e.key),this.emit("up-any",e,this),this.emit(`up-${e.key}`,e,this)}))}isKeyDown(e){return this._keySet.has(e)}isKeyNotPressed(e){return!this._keySet.has(e)}canvasTapSnippet(e,t,s,r){const n=globalThis.pgame.stage,i=e=>{const t=e.global;r.getBounds(!0).contains(t.x,t.y)||(s(e),n.off("pointertapcapture",i),e.stopPropagation())};e.setOnClick((e=>{t(e),n.on("pointertapcapture",i)}))}}function pe(e,t){for(const s of e.children)s.eventMode=t,void 0!==s.children&&pe(s,t)}const me=Object.freeze(Object.defineProperty({__proto__:null,SupportedSoundExts:f,arrToObj:function(e){const t={};for(let s of Array.range(e.length))t[s]=e[s];return t},assignPair:function(e,t){e.x=t[0],e.y=t[1]},assignPivotPoint:y,assignPivotPointRatio:g,assignPoint:function(e,t){e.x=t.x,e.y=t.y},bufferToBase64:function(e,t){return d(this,null,(function*(){const s=yield new Promise((s=>{const r=new FileReader;r.onload=()=>s(r.result),r.readAsDataURL(new Blob([e],{type:t}))}));return void 0===t?s.split(",",2)[1]:s}))},distance:function(e,t){let s=e.x-t.x,r=e.y-t.y;return Math.sqrt(s*s+r*r)},distance2:function(e,t){let s=e.x-t.x,r=e.y-t.y;return s*s+r*r},doubleTapEnterFullscreen:v,enterFullscreen:b,exitFullscreen:w,isApple:_,isContainer:$,isFirefox:S,isFullscreen:P,isGraphicObject:E,isKeyDown:function(e){var t;return!!(null==(t=pgame.interact)?void 0:t.isKeyDown(e))},isKeyNotPressed:function(e){var t;return!(null==(t=pgame.interact)?void 0:t.isKeyDown(e))},isLocalizedObject:C,isMinimalContainer:k,isMobile:p,isMobileResult:x,pnt2:function(e){return{x:e,y:e}},recurseEventMode:pe,shared:m,soundAsset:I,toggleFullscreen:R,unpackPoint:function(e){return{x:e[0],y:e[1]}}},Symbol.toStringTag,{value:"Module"}));class fe extends(ue(N)){}class ye extends(ue(O)){}class ge extends(ue(D)){}class ve extends(ue(j)){constructor(e,t){super(e),void 0!==t?this.hitArea=new T(...t):pe(this,"auto")}recurseAutoHitTest(e=0){if(0==e)pe(this,"auto");else{const t=globalThis.pgame.createGlobalTimer(e);t.on("end",(()=>pe(this,"auto"))),t.start()}}}class be extends(ue(A)){constructor(e){super(!1),void 0!==e?this.hitArea=new T(...e):this.addObj=this.addObjWithAutoMode}addObjWithAutoMode(e,t,s){return e.eventMode="auto",super.addObj(e,t,s)}}class we extends(ue(M)){}class _e extends we{constructor(e,t,s){super(new F(e)),l(this,"fadeTween"),l(this,"sound"),l(this,"onStartFading"),l(this,"onFadeEnd"),this.eventMode="static",this.fadeTween=s.create("fade",this,{alpha:0}),this.addCenteredTxt(t),this.displayed=!1,this.fadeTween.on("start",(e=>{var t;null==(t=this.onStartFading)||t.call(this,e)})).on("end",(e=>{var t;this.displayed=!1,null==(t=this.onFadeEnd)||t.call(this,e)}))}get displayed(){return this.visible}set displayed(e){this.visible=e}pop(e,t){return this.displayed=!0,this.alpha=1,void 0!==this.sound&&globalThis.pgame.soundManager.play(this.sound),this.fadeTween.delay(e).duration(t)}}const $e=class extends B{constructor(){super({font:"Arial",size:20,fill:h.Green}),l(this,"_totalFrames",0),l(this,"_totalFPS",0),this.style.dropShadow=!0,this.style.dropShadowColor=h.Black,this.style.dropShadowDistance=4}update(){this._totalFrames++,this._totalFPS+=globalThis.pgame.FPS,this._totalFrames>=$e.N_FRAME&&(this.text=(this._totalFPS/this._totalFrames).toFixed(0),this._totalFrames=0,this._totalFPS=0)}};let Se=$e;l(Se,"N_FRAME",5);const Pe=class extends V{constructor(e){if(e.resolution=K.RESOLUTION=window.devicePixelRatio,G.defaultResolution=window.devicePixelRatio,e.eventMode="none",e.eventFeatures={globalMove:!!e.dragEvent},super(e),l(this,"stage",new L),l(this,"bgRect"),l(this,"assets",W),l(this,"soundManager",q),l(this,"timers"),l(this,"interact"),l(this,"desiredWidth",0),l(this,"desiredHeight",0),l(this,"desiredRatio",0),l(this,"currState"),l(this,"currStyle",U),l(this,"currLocale",z),l(this,"currScene",{}),l(this,"_states",{}),l(this,"_viewStyles",{"":U}),l(this,"_locales",{"":z}),l(this,"_scenes",{}),l(this,"_textures"),l(this,"_sequences"),l(this,"_spines"),l(this,"onGameReady",globalThis.doNothing),l(this,"_txtFPS"),m.init(),this.timers=new H,this.stage.name="MAIN",this.stage.eventMode="static",void 0!==e.backgroundRect){let t=!0!==e.backgroundRect?e.backgroundRect:h.White;const s=new J(100,100).fill(t,1);this.bgRect=new F(s),this.bgRect.alpha=0,this.bgRect.eventMode="auto",this.stage.addObj(this.bgRect),this.stage.sendObjToBack(this.bgRect)}else this.bgRect=new F}mainLoop(e){}startLoop(){this.mainLoop=this.mainLoop.bind(this),this.ticker.add(this.mainLoop,{},Q.HIGH)}resizeAppView(e,t){}setResolution(e,t){this.desiredWidth=e,this.desiredHeight=t,this.desiredRatio=t/e,this.bgRect.width=e,this.bgRect.height=t,void 0!==this._txtFPS&&(this._txtFPS.x=e-40),this.stage.setDesiredSize(e,t)}createGlobalTimer(e,t=0,s=0,r=!1){return new Y(this.timers,e,t,s,r)}loadAssets(){return d(this,null,(function*(){const e=yield Z("assets-list.json"),t=this.assets;yield t.loadFromList(e),[this._textures,this._sequences]=t.get_multipack_textureMap(e),this._spines=t.get_SpineMap(e.spine_json),Object.assign(this._viewStyles,t.get_viewStyleMap(e.style)),Object.assign(this._locales,t.get_localeMap(e.lang))}))}useCurrentViewStlye(){this.stage.useViewStyleChildren(this.currStyle.list)}useCurrentLocale(){this.stage.useLocale(this.currLocale)}state(e){return this._states[e]}setState(e){this.currState=this.state(e)}addState(...e){for(const t of e)this._states[t.name]=t}viewStyle(e){return Pe.runtimeCheck(this._viewStyles,e,"style")}setViewStyle(e){this.currStyle=this.viewStyle(e)}locale(e){return Pe.runtimeCheck(this._locales,e,"locale")}setLocale(e){this.currLocale=this.locale(e)}addLocale(e,t){this._locales[e]=t}scene(e){return Pe.runtimeCheck(this._scenes,e,"scene")}setScene(e){this.currScene[e.rootContainer.name]=e}addScenes(...e){for(const t of e)this._scenes[t.name]=t}getTex(e){return Pe.runtimeCheck(this._textures,e,"texture")}addTextures(e){Object.assign(this._textures,e)}getSeq(e){return Pe.runtimeCheck(this._sequences,e,"sequence")}addSequences(e){Object.assign(this._sequences,e)}getSpine(e){return Pe.runtimeCheck(this._spines,e,"spine")}addSpines(e){Object.assign(this._spines,e)}get DeltaMS(){return this.ticker.elapsedMS}get TotalMS(){return this.ticker.lastTime}get FPS(){return this.ticker.FPS}showFPS(){void 0===this._txtFPS&&(this._txtFPS=new Se,this._txtFPS.x=this.desiredWidth-40,this._txtFPS.y=0,this.stage.addObj(this._txtFPS,m.maxLayer+1))}};let Ee=Pe;l(Ee,"runtimeCheck",((e,t,s)=>e[t]));class Ce extends u{constructor(){super(...arguments),l(this,"_realCredits",0),l(this,"_credits",0),l(this,"_backupCredits",0),l(this,"_betList",[]),l(this,"_betIndex",0),l(this,"_lastBetIndex",0),l(this,"_betColor",0),l(this,"defaultBet",0),l(this,"cheatRND"),l(this,"_nAutoplays",0),l(this,"testAutoplay")}get realCredits(){return this._realCredits}set realCredits(e){this._backupCredits=this._realCredits,this._realCredits=e}get credits(){return this._credits}set credits(e){e=Math.round(e),this._credits=e,this.emit("credit",e)}syncCredits(){this.credits=this.realCredits}restore(){this._realCredits=this._backupCredits}get totalBet(){return this._betList[this._betIndex]}get betListNum(){return this._betList.length}get betIndex(){return this._betIndex}get maxIndex(){return this._betList.length-1}get lastBetIndex(){return this._lastBetIndex}get betColor(){return this._betColor}isMinBet(){return 0==this._betIndex}isMaxBet(){return this._betIndex==this._betList.length-1}getBetAtId(e){if(e<0||e>=this.betListNum)throw new Error("Bet Index out of range!");return this._betList[e]}setBetAtId(e){if(e<0||e>=this.betListNum)throw new Error("Bet Index out of range!");this._lastBetIndex=this._betIndex,this._betIndex=e,this.emit("bet",e,this._betList[e])}setBetAtValue(e){if(!this._betList.includes(e))return void console.log("Invalid Bet Value");const t=this._betList.indexOf(e);this.setBetAtId(t)}addBetByValue(e){if(!this._betList.includes(e))return void console.log("Invalid Bet Value");const t=this._betList.indexOf(e)+this._betIndex;t>this.maxIndex?this.setBetAtId(this.maxIndex):this.setBetAtId(t)}setBetColor(e){if(e<=0||e>6)throw new Error("Bet Color Value out of range!");this._betColor=e}setBetList(e,t,s){if(Array.isArray(e))this._betList=e;else{this._betList.clear();for(let r=t;r<=s;r+=e)this._betList.push(r)}}setDefaultBet(){let e=this._betList.indexOf(this.defaultBet);e=Math.max(0,e),this.setBetAtId(e),this._lastBetIndex=e}get nAutoPlays(){return this._nAutoplays}set nAutoPlays(e){e<0&&(e=0);let t=this._nAutoplays;void 0===this.testAutoplay||this.testAutoplay(e,t)||(e=0),e!=t&&(this._nAutoplays=e,this.emit("autoplay",e,t))}}const ke={Bg:"background"},xe={Click:"buttonclick",CoinIncrement:"coinincrement",Hint:"hint"};var Ie={},Re={get exports(){return Ie},set exports(e){Ie=e}},Te={},Ne={},Oe={},De={},je={},Ae={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.regexpCode=e.getEsmExportName=e.getProperty=e.safeStringify=e.stringify=e.strConcat=e.addCodeArg=e.str=e._=e.nil=e._Code=e.Name=e.IDENTIFIER=e._CodeOrName=void 0;class t{}e._CodeOrName=t,e.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class s extends t{constructor(t){if(super(),!e.IDENTIFIER.test(t))throw new Error("CodeGen: name must be a valid identifier");this.str=t}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}e.Name=s;class r extends t{constructor(e){super(),this._items="string"==typeof e?[e]:e}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const e=this._items[0];return""===e||'""'===e}get str(){var e;return null!==(e=this._str)&&void 0!==e?e:this._str=this._items.reduce(((e,t)=>`${e}${t}`),"")}get names(){var e;return null!==(e=this._names)&&void 0!==e?e:this._names=this._items.reduce(((e,t)=>(t instanceof s&&(e[t.str]=(e[t.str]||0)+1),e)),{})}}function n(e,...t){const s=[e[0]];let n=0;for(;n<t.length;)a(s,t[n]),s.push(e[++n]);return new r(s)}e._Code=r,e.nil=new r(""),e._=n;const i=new r("+");function o(e,...t){const s=[l(e[0])];let n=0;for(;n<t.length;)s.push(i),a(s,t[n]),s.push(i,l(e[++n]));return function(e){let t=1;for(;t<e.length-1;){if(e[t]===i){const s=c(e[t-1],e[t+1]);if(void 0!==s){e.splice(t-1,3,s);continue}e[t++]="+"}t++}}(s),new r(s)}function a(e,t){var n;t instanceof r?e.push(...t._items):t instanceof s?e.push(t):e.push("number"==typeof(n=t)||"boolean"==typeof n||null===n?n:l(Array.isArray(n)?n.join(","):n))}function c(e,t){if('""'===t)return e;if('""'===e)return t;if("string"==typeof e){if(t instanceof s||'"'!==e[e.length-1])return;return"string"!=typeof t?`${e.slice(0,-1)}${t}"`:'"'===t[0]?e.slice(0,-1)+t.slice(1):void 0}return"string"!=typeof t||'"'!==t[0]||e instanceof s?void 0:`"${e}${t.slice(1)}`}function l(e){return JSON.stringify(e).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}e.str=o,e.addCodeArg=a,e.strConcat=function(e,t){return t.emptyStr()?e:e.emptyStr()?t:o`${e}${t}`},e.stringify=function(e){return new r(l(e))},e.safeStringify=l,e.getProperty=function(t){return"string"==typeof t&&e.IDENTIFIER.test(t)?new r(`.${t}`):n`[${t}]`},e.getEsmExportName=function(t){if("string"==typeof t&&e.IDENTIFIER.test(t))return new r(`${t}`);throw new Error(`CodeGen: invalid export name: ${t}, use explicit $id name mapping`)},e.regexpCode=function(e){return new r(e.toString())}}(Ae);var Me={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ValueScope=e.ValueScopeName=e.Scope=e.varKinds=e.UsedValueState=void 0;const t=Ae;class s extends Error{constructor(e){super(`CodeGen: "code" for ${e} not defined`),this.value=e.value}}var r,n;(n=r=e.UsedValueState||(e.UsedValueState={}))[n.Started=0]="Started",n[n.Completed=1]="Completed",e.varKinds={const:new t.Name("const"),let:new t.Name("let"),var:new t.Name("var")};class i{constructor({prefixes:e,parent:t}={}){this._names={},this._prefixes=e,this._parent=t}toName(e){return e instanceof t.Name?e:this.name(e)}name(e){return new t.Name(this._newName(e))}_newName(e){return`${e}${(this._names[e]||this._nameGroup(e)).index++}`}_nameGroup(e){var t,s;if((null===(s=null===(t=this._parent)||void 0===t?void 0:t._prefixes)||void 0===s?void 0:s.has(e))||this._prefixes&&!this._prefixes.has(e))throw new Error(`CodeGen: prefix "${e}" is not allowed in this scope`);return this._names[e]={prefix:e,index:0}}}e.Scope=i;class o extends t.Name{constructor(e,t){super(t),this.prefix=e}setValue(e,{property:s,itemIndex:r}){this.value=e,this.scopePath=t._`.${new t.Name(s)}[${r}]`}}e.ValueScopeName=o;const l=t._`\n`;e.ValueScope=class extends i{constructor(e){super(e),this._values={},this._scope=e.scope,this.opts=c(a({},e),{_n:e.lines?l:t.nil})}get(){return this._scope}name(e){return new o(e,this._newName(e))}value(e,t){var s;if(void 0===t.ref)throw new Error("CodeGen: ref must be passed in value");const r=this.toName(e),{prefix:n}=r,i=null!==(s=t.key)&&void 0!==s?s:t.ref;let o=this._values[n];if(o){const e=o.get(i);if(e)return e}else o=this._values[n]=new Map;o.set(i,r);const a=this._scope[n]||(this._scope[n]=[]),c=a.length;return a[c]=t.ref,r.setValue(t,{property:n,itemIndex:c}),r}getValue(e,t){const s=this._values[e];if(s)return s.get(t)}scopeRefs(e,s=this._values){return this._reduceValues(s,(s=>{if(void 0===s.scopePath)throw new Error(`CodeGen: name "${s}" has no value`);return t._`${e}${s.scopePath}`}))}scopeCode(e=this._values,t,s){return this._reduceValues(e,(e=>{if(void 0===e.value)throw new Error(`CodeGen: name "${e}" has no value`);return e.value.code}),t,s)}_reduceValues(n,i,o={},a){let c=t.nil;for(const l in n){const d=n[l];if(!d)continue;const u=o[l]=o[l]||new Map;d.forEach((n=>{if(u.has(n))return;u.set(n,r.Started);let o=i(n);if(o){const s=this.opts.es5?e.varKinds.var:e.varKinds.const;c=t._`${c}${s} ${n} = ${o};${this.opts._n}`}else{if(!(o=null==a?void 0:a(n)))throw new s(n);c=t._`${c}${o}${this.opts._n}`}u.set(n,r.Completed)}))}return c}}}(Me),function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.or=e.and=e.not=e.CodeGen=e.operators=e.varKinds=e.ValueScopeName=e.ValueScope=e.Scope=e.Name=e.regexpCode=e.stringify=e.getProperty=e.nil=e.strConcat=e.str=e._=void 0;const t=Ae,s=Me;var r=Ae;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return r._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return r.str}}),Object.defineProperty(e,"strConcat",{enumerable:!0,get:function(){return r.strConcat}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return r.nil}}),Object.defineProperty(e,"getProperty",{enumerable:!0,get:function(){return r.getProperty}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return r.stringify}}),Object.defineProperty(e,"regexpCode",{enumerable:!0,get:function(){return r.regexpCode}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return r.Name}});var n=Me;Object.defineProperty(e,"Scope",{enumerable:!0,get:function(){return n.Scope}}),Object.defineProperty(e,"ValueScope",{enumerable:!0,get:function(){return n.ValueScope}}),Object.defineProperty(e,"ValueScopeName",{enumerable:!0,get:function(){return n.ValueScopeName}}),Object.defineProperty(e,"varKinds",{enumerable:!0,get:function(){return n.varKinds}}),e.operators={GT:new t._Code(">"),GTE:new t._Code(">="),LT:new t._Code("<"),LTE:new t._Code("<="),EQ:new t._Code("==="),NEQ:new t._Code("!=="),NOT:new t._Code("!"),OR:new t._Code("||"),AND:new t._Code("&&"),ADD:new t._Code("+")};class i{optimizeNodes(){return this}optimizeNames(e,t){return this}}class o extends i{constructor(e,t,s){super(),this.varKind=e,this.name=t,this.rhs=s}render({es5:e,_n:t}){const r=e?s.varKinds.var:this.varKind,n=void 0===this.rhs?"":` = ${this.rhs}`;return`${r} ${this.name}${n};`+t}optimizeNames(e,t){if(e[this.name.str])return this.rhs&&(this.rhs=T(this.rhs,e,t)),this}get names(){return this.rhs instanceof t._CodeOrName?this.rhs.names:{}}}class l extends i{constructor(e,t,s){super(),this.lhs=e,this.rhs=t,this.sideEffects=s}render({_n:e}){return`${this.lhs} = ${this.rhs};`+e}optimizeNames(e,s){if(!(this.lhs instanceof t.Name)||e[this.lhs.str]||this.sideEffects)return this.rhs=T(this.rhs,e,s),this}get names(){return R(this.lhs instanceof t.Name?{}:a({},this.lhs.names),this.rhs)}}class d extends l{constructor(e,t,s,r){super(e,s,r),this.op=t}render({_n:e}){return`${this.lhs} ${this.op}= ${this.rhs};`+e}}class u extends i{constructor(e){super(),this.label=e,this.names={}}render({_n:e}){return`${this.label}:`+e}}class h extends i{constructor(e){super(),this.label=e,this.names={}}render({_n:e}){return`break${this.label?` ${this.label}`:""};`+e}}class p extends i{constructor(e){super(),this.error=e}render({_n:e}){return`throw ${this.error};`+e}get names(){return this.error.names}}class m extends i{constructor(e){super(),this.code=e}render({_n:e}){return`${this.code};`+e}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(e,t){return this.code=T(this.code,e,t),this}get names(){return this.code instanceof t._CodeOrName?this.code.names:{}}}class f extends i{constructor(e=[]){super(),this.nodes=e}render(e){return this.nodes.reduce(((t,s)=>t+s.render(e)),"")}optimizeNodes(){const{nodes:e}=this;let t=e.length;for(;t--;){const s=e[t].optimizeNodes();Array.isArray(s)?e.splice(t,1,...s):s?e[t]=s:e.splice(t,1)}return e.length>0?this:void 0}optimizeNames(e,t){const{nodes:s}=this;let r=s.length;for(;r--;){const n=s[r];n.optimizeNames(e,t)||(N(e,n.names),s.splice(r,1))}return s.length>0?this:void 0}get names(){return this.nodes.reduce(((e,t)=>I(e,t.names)),{})}}class y extends f{render(e){return"{"+e._n+super.render(e)+"}"+e._n}}class g extends f{}class v extends y{}v.kind="else";class b extends y{constructor(e,t){super(t),this.condition=e}render(e){let t=`if(${this.condition})`+super.render(e);return this.else&&(t+="else "+this.else.render(e)),t}optimizeNodes(){super.optimizeNodes();const e=this.condition;if(!0===e)return this.nodes;let t=this.else;if(t){const e=t.optimizeNodes();t=this.else=Array.isArray(e)?new v(e):e}return t?!1===e?t instanceof b?t:t.nodes:this.nodes.length?this:new b(O(e),t instanceof b?[t]:t.nodes):!1!==e&&this.nodes.length?this:void 0}optimizeNames(e,t){var s;if(this.else=null===(s=this.else)||void 0===s?void 0:s.optimizeNames(e,t),super.optimizeNames(e,t)||this.else)return this.condition=T(this.condition,e,t),this}get names(){const e=super.names;return R(e,this.condition),this.else&&I(e,this.else.names),e}}b.kind="if";class w extends y{}w.kind="for";class _ extends w{constructor(e){super(),this.iteration=e}render(e){return`for(${this.iteration})`+super.render(e)}optimizeNames(e,t){if(super.optimizeNames(e,t))return this.iteration=T(this.iteration,e,t),this}get names(){return I(super.names,this.iteration.names)}}class $ extends w{constructor(e,t,s,r){super(),this.varKind=e,this.name=t,this.from=s,this.to=r}render(e){const t=e.es5?s.varKinds.var:this.varKind,{name:r,from:n,to:i}=this;return`for(${t} ${r}=${n}; ${r}<${i}; ${r}++)`+super.render(e)}get names(){const e=R(super.names,this.from);return R(e,this.to)}}class S extends w{constructor(e,t,s,r){super(),this.loop=e,this.varKind=t,this.name=s,this.iterable=r}render(e){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(e)}optimizeNames(e,t){if(super.optimizeNames(e,t))return this.iterable=T(this.iterable,e,t),this}get names(){return I(super.names,this.iterable.names)}}class P extends y{constructor(e,t,s){super(),this.name=e,this.args=t,this.async=s}render(e){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(e)}}P.kind="func";class E extends f{render(e){return"return "+super.render(e)}}E.kind="return";class C extends y{render(e){let t="try"+super.render(e);return this.catch&&(t+=this.catch.render(e)),this.finally&&(t+=this.finally.render(e)),t}optimizeNodes(){var e,t;return super.optimizeNodes(),null===(e=this.catch)||void 0===e||e.optimizeNodes(),null===(t=this.finally)||void 0===t||t.optimizeNodes(),this}optimizeNames(e,t){var s,r;return super.optimizeNames(e,t),null===(s=this.catch)||void 0===s||s.optimizeNames(e,t),null===(r=this.finally)||void 0===r||r.optimizeNames(e,t),this}get names(){const e=super.names;return this.catch&&I(e,this.catch.names),this.finally&&I(e,this.finally.names),e}}class k extends y{constructor(e){super(),this.error=e}render(e){return`catch(${this.error})`+super.render(e)}}k.kind="catch";class x extends y{render(e){return"finally"+super.render(e)}}x.kind="finally";function I(e,t){for(const s in t)e[s]=(e[s]||0)+(t[s]||0);return e}function R(e,s){return s instanceof t._CodeOrName?I(e,s.names):e}function T(e,s,r){return e instanceof t.Name?i(e):(n=e)instanceof t._Code&&n._items.some((e=>e instanceof t.Name&&1===s[e.str]&&void 0!==r[e.str]))?new t._Code(e._items.reduce(((e,s)=>(s instanceof t.Name&&(s=i(s)),s instanceof t._Code?e.push(...s._items):e.push(s),e)),[])):e;var n;function i(e){const t=r[e.str];return void 0===t||1!==s[e.str]?e:(delete s[e.str],t)}}function N(e,t){for(const s in t)e[s]=(e[s]||0)-(t[s]||0)}function O(e){return"boolean"==typeof e||"number"==typeof e||null===e?!e:t._`!${M(e)}`}e.CodeGen=class{constructor(e,t={}){this._values={},this._blockStarts=[],this._constants={},this.opts=c(a({},t),{_n:t.lines?"\n":""}),this._extScope=e,this._scope=new s.Scope({parent:e}),this._nodes=[new g]}toString(){return this._root.render(this.opts)}name(e){return this._scope.name(e)}scopeName(e){return this._extScope.name(e)}scopeValue(e,t){const s=this._extScope.value(e,t);return(this._values[s.prefix]||(this._values[s.prefix]=new Set)).add(s),s}getScopeValue(e,t){return this._extScope.getValue(e,t)}scopeRefs(e){return this._extScope.scopeRefs(e,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(e,t,s,r){const n=this._scope.toName(t);return void 0!==s&&r&&(this._constants[n.str]=s),this._leafNode(new o(e,n,s)),n}const(e,t,r){return this._def(s.varKinds.const,e,t,r)}let(e,t,r){return this._def(s.varKinds.let,e,t,r)}var(e,t,r){return this._def(s.varKinds.var,e,t,r)}assign(e,t,s){return this._leafNode(new l(e,t,s))}add(t,s){return this._leafNode(new d(t,e.operators.ADD,s))}code(e){return"function"==typeof e?e():e!==t.nil&&this._leafNode(new m(e)),this}object(...e){const s=["{"];for(const[r,n]of e)s.length>1&&s.push(","),s.push(r),(r!==n||this.opts.es5)&&(s.push(":"),(0,t.addCodeArg)(s,n));return s.push("}"),new t._Code(s)}if(e,t,s){if(this._blockNode(new b(e)),t&&s)this.code(t).else().code(s).endIf();else if(t)this.code(t).endIf();else if(s)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(e){return this._elseNode(new b(e))}else(){return this._elseNode(new v)}endIf(){return this._endBlockNode(b,v)}_for(e,t){return this._blockNode(e),t&&this.code(t).endFor(),this}for(e,t){return this._for(new _(e),t)}forRange(e,t,r,n,i=(this.opts.es5?s.varKinds.var:s.varKinds.let)){const o=this._scope.toName(e);return this._for(new $(i,o,t,r),(()=>n(o)))}forOf(e,r,n,i=s.varKinds.const){const o=this._scope.toName(e);if(this.opts.es5){const e=r instanceof t.Name?r:this.var("_arr",r);return this.forRange("_i",0,t._`${e}.length`,(s=>{this.var(o,t._`${e}[${s}]`),n(o)}))}return this._for(new S("of",i,o,r),(()=>n(o)))}forIn(e,r,n,i=(this.opts.es5?s.varKinds.var:s.varKinds.const)){if(this.opts.ownProperties)return this.forOf(e,t._`Object.keys(${r})`,n);const o=this._scope.toName(e);return this._for(new S("in",i,o,r),(()=>n(o)))}endFor(){return this._endBlockNode(w)}label(e){return this._leafNode(new u(e))}break(e){return this._leafNode(new h(e))}return(e){const t=new E;if(this._blockNode(t),this.code(e),1!==t.nodes.length)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(E)}try(e,t,s){if(!t&&!s)throw new Error('CodeGen: "try" without "catch" and "finally"');const r=new C;if(this._blockNode(r),this.code(e),t){const e=this.name("e");this._currNode=r.catch=new k(e),t(e)}return s&&(this._currNode=r.finally=new x,this.code(s)),this._endBlockNode(k,x)}throw(e){return this._leafNode(new p(e))}block(e,t){return this._blockStarts.push(this._nodes.length),e&&this.code(e).endBlock(t),this}endBlock(e){const t=this._blockStarts.pop();if(void 0===t)throw new Error("CodeGen: not in self-balancing block");const s=this._nodes.length-t;if(s<0||void 0!==e&&s!==e)throw new Error(`CodeGen: wrong number of nodes: ${s} vs ${e} expected`);return this._nodes.length=t,this}func(e,s=t.nil,r,n){return this._blockNode(new P(e,s,r)),n&&this.code(n).endFunc(),this}endFunc(){return this._endBlockNode(P)}optimize(e=1){for(;e-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(e){return this._currNode.nodes.push(e),this}_blockNode(e){this._currNode.nodes.push(e),this._nodes.push(e)}_endBlockNode(e,t){const s=this._currNode;if(s instanceof e||t&&s instanceof t)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${t?`${e.kind}/${t.kind}`:e.kind}"`)}_elseNode(e){const t=this._currNode;if(!(t instanceof b))throw new Error('CodeGen: "else" without "if"');return this._currNode=t.else=e,this}get _root(){return this._nodes[0]}get _currNode(){const e=this._nodes;return e[e.length-1]}set _currNode(e){const t=this._nodes;t[t.length-1]=e}},e.not=O;const D=A(e.operators.AND);e.and=function(...e){return e.reduce(D)};const j=A(e.operators.OR);function A(e){return(s,r)=>s===t.nil?r:r===t.nil?s:t._`${M(s)} ${e} ${M(r)}`}function M(e){return e instanceof t.Name?e:t._`(${e})`}e.or=function(...e){return e.reduce(j)}}(je);var Be={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.checkStrictMode=e.getErrorPath=e.Type=e.useFunc=e.setEvaluated=e.evaluatedPropsToName=e.mergeEvaluated=e.eachItem=e.unescapeJsonPointer=e.escapeJsonPointer=e.escapeFragment=e.unescapeFragment=e.schemaRefOrVal=e.schemaHasRulesButRef=e.schemaHasRules=e.checkUnknownRules=e.alwaysValidSchema=e.toHash=void 0;const t=je,s=Ae;function r(e,t=e.schema){const{opts:s,self:r}=e;if(!s.strictSchema)return;if("boolean"==typeof t)return;const n=r.RULES.keywords;for(const i in t)n[i]||m(e,`unknown keyword: "${i}"`)}function n(e,t){if("boolean"==typeof e)return!e;for(const s in e)if(t[s])return!0;return!1}function i(e){return"number"==typeof e?`${e}`:e.replace(/~/g,"~0").replace(/\//g,"~1")}function o(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function c({mergeNames:e,mergeToName:s,mergeValues:r,resultToName:n}){return(i,o,a,c)=>{const l=void 0===a?o:a instanceof t.Name?(o instanceof t.Name?e(i,o,a):s(i,o,a),a):o instanceof t.Name?(s(i,a,o),o):r(o,a);return c!==t.Name||l instanceof t.Name?l:n(i,l)}}function l(e,s){if(!0===s)return e.var("props",!0);const r=e.var("props",t._`{}`);return void 0!==s&&d(e,r,s),r}function d(e,s,r){Object.keys(r).forEach((r=>e.assign(t._`${s}${(0,t.getProperty)(r)}`,!0)))}e.toHash=function(e){const t={};for(const s of e)t[s]=!0;return t},e.alwaysValidSchema=function(e,t){return"boolean"==typeof t?t:0===Object.keys(t).length||(r(e,t),!n(t,e.self.RULES.all))},e.checkUnknownRules=r,e.schemaHasRules=n,e.schemaHasRulesButRef=function(e,t){if("boolean"==typeof e)return!e;for(const s in e)if("$ref"!==s&&t.all[s])return!0;return!1},e.schemaRefOrVal=function({topSchemaRef:e,schemaPath:s},r,n,i){if(!i){if("number"==typeof r||"boolean"==typeof r)return r;if("string"==typeof r)return t._`${r}`}return t._`${e}${s}${(0,t.getProperty)(n)}`},e.unescapeFragment=function(e){return o(decodeURIComponent(e))},e.escapeFragment=function(e){return encodeURIComponent(i(e))},e.escapeJsonPointer=i,e.unescapeJsonPointer=o,e.eachItem=function(e,t){if(Array.isArray(e))for(const s of e)t(s);else t(e)},e.mergeEvaluated={props:c({mergeNames:(e,s,r)=>e.if(t._`${r} !== true && ${s} !== undefined`,(()=>{e.if(t._`${s} === true`,(()=>e.assign(r,!0)),(()=>e.assign(r,t._`${r} || {}`).code(t._`Object.assign(${r}, ${s})`)))})),mergeToName:(e,s,r)=>e.if(t._`${r} !== true`,(()=>{!0===s?e.assign(r,!0):(e.assign(r,t._`${r} || {}`),d(e,r,s))})),mergeValues:(e,t)=>!0===e||a(a({},e),t),resultToName:l}),items:c({mergeNames:(e,s,r)=>e.if(t._`${r} !== true && ${s} !== undefined`,(()=>e.assign(r,t._`${s} === true ? true : ${r} > ${s} ? ${r} : ${s}`))),mergeToName:(e,s,r)=>e.if(t._`${r} !== true`,(()=>e.assign(r,!0===s||t._`${r} > ${s} ? ${r} : ${s}`))),mergeValues:(e,t)=>!0===e||Math.max(e,t),resultToName:(e,t)=>e.var("items",t)})},e.evaluatedPropsToName=l,e.setEvaluated=d;const u={};var h,p;function m(e,t,s=e.opts.strictSchema){if(s){if(t=`strict mode: ${t}`,!0===s)throw new Error(t);e.self.logger.warn(t)}}e.useFunc=function(e,t){return e.scopeValue("func",{ref:t,code:u[t.code]||(u[t.code]=new s._Code(t.code))})},(p=h=e.Type||(e.Type={}))[p.Num=0]="Num",p[p.Str=1]="Str",e.getErrorPath=function(e,s,r){if(e instanceof t.Name){const n=s===h.Num;return r?n?t._`"[" + ${e} + "]"`:t._`"['" + ${e} + "']"`:n?t._`"/" + ${e}`:t._`"/" + ${e}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return r?(0,t.getProperty)(e).toString():"/"+i(e)},e.checkStrictMode=m}(Be);var Fe={};Object.defineProperty(Fe,"__esModule",{value:!0});const Ve=je,Le={data:new Ve.Name("data"),valCxt:new Ve.Name("valCxt"),instancePath:new Ve.Name("instancePath"),parentData:new Ve.Name("parentData"),parentDataProperty:new Ve.Name("parentDataProperty"),rootData:new Ve.Name("rootData"),dynamicAnchors:new Ve.Name("dynamicAnchors"),vErrors:new Ve.Name("vErrors"),errors:new Ve.Name("errors"),this:new Ve.Name("this"),self:new Ve.Name("self"),scope:new Ve.Name("scope"),json:new Ve.Name("json"),jsonPos:new Ve.Name("jsonPos"),jsonLen:new Ve.Name("jsonLen"),jsonPart:new Ve.Name("jsonPart")};Fe.default=Le,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.extendErrors=e.resetErrorsCount=e.reportExtraError=e.reportError=e.keyword$DataError=e.keywordError=void 0;const t=je,s=Be,r=Fe;function n(e,s){const n=e.const("err",s);e.if(t._`${r.default.vErrors} === null`,(()=>e.assign(r.default.vErrors,t._`[${n}]`)),t._`${r.default.vErrors}.push(${n})`),e.code(t._`${r.default.errors}++`)}function i(e,s){const{gen:r,validateName:n,schemaEnv:i}=e;i.$async?r.throw(t._`new ${e.ValidationError}(${s})`):(r.assign(t._`${n}.errors`,s),r.return(!1))}e.keywordError={message:({keyword:e})=>t.str`must pass "${e}" keyword validation`},e.keyword$DataError={message:({keyword:e,schemaType:s})=>s?t.str`"${e}" keyword must be ${s} ($data)`:t.str`"${e}" keyword is invalid ($data)`},e.reportError=function(s,r=e.keywordError,o,c){const{it:l}=s,{gen:d,compositeRule:u,allErrors:h}=l,p=a(s,r,o);(null!=c?c:u||h)?n(d,p):i(l,t._`[${p}]`)},e.reportExtraError=function(t,s=e.keywordError,o){const{it:c}=t,{gen:l,compositeRule:d,allErrors:u}=c;n(l,a(t,s,o)),d||u||i(c,r.default.vErrors)},e.resetErrorsCount=function(e,s){e.assign(r.default.errors,s),e.if(t._`${r.default.vErrors} !== null`,(()=>e.if(s,(()=>e.assign(t._`${r.default.vErrors}.length`,s)),(()=>e.assign(r.default.vErrors,null)))))},e.extendErrors=function({gen:e,keyword:s,schemaValue:n,data:i,errsCount:o,it:a}){if(void 0===o)throw new Error("ajv implementation error");const c=e.name("err");e.forRange("i",o,r.default.errors,(o=>{e.const(c,t._`${r.default.vErrors}[${o}]`),e.if(t._`${c}.instancePath === undefined`,(()=>e.assign(t._`${c}.instancePath`,(0,t.strConcat)(r.default.instancePath,a.errorPath)))),e.assign(t._`${c}.schemaPath`,t.str`${a.errSchemaPath}/${s}`),a.opts.verbose&&(e.assign(t._`${c}.schema`,n),e.assign(t._`${c}.data`,i))}))};const o={keyword:new t.Name("keyword"),schemaPath:new t.Name("schemaPath"),params:new t.Name("params"),propertyName:new t.Name("propertyName"),message:new t.Name("message"),schema:new t.Name("schema"),parentSchema:new t.Name("parentSchema")};function a(e,s,n){const{createErrors:i}=e.it;return!1===i?t._`{}`:function(e,s,n={}){const{gen:i,it:a}=e,d=[c(a,n),l(e,n)];return function(e,{params:s,message:n},i){const{keyword:a,data:c,schemaValue:l,it:d}=e,{opts:u,propertyName:h,topSchemaRef:p,schemaPath:m}=d;i.push([o.keyword,a],[o.params,"function"==typeof s?s(e):s||t._`{}`]),u.messages&&i.push([o.message,"function"==typeof n?n(e):n]);u.verbose&&i.push([o.schema,l],[o.parentSchema,t._`${p}${m}`],[r.default.data,c]);h&&i.push([o.propertyName,h])}(e,s,d),i.object(...d)}(e,s,n)}function c({errorPath:e},{instancePath:n}){const i=n?t.str`${e}${(0,s.getErrorPath)(n,s.Type.Str)}`:e;return[r.default.instancePath,(0,t.strConcat)(r.default.instancePath,i)]}function l({keyword:e,it:{errSchemaPath:r}},{schemaPath:n,parentSchema:i}){let a=i?r:t.str`${r}/${e}`;return n&&(a=t.str`${a}${(0,s.getErrorPath)(n,s.Type.Str)}`),[o.schemaPath,a]}}(De),Object.defineProperty(Oe,"__esModule",{value:!0}),Oe.boolOrEmptySchema=Oe.topBoolOrEmptySchema=void 0;const We=De,qe=je,Ue=Fe,ze={message:"boolean schema is false"};function Ke(e,t){const{gen:s,data:r}=e,n={gen:s,keyword:"false schema",data:r,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:e};(0,We.reportError)(n,ze,void 0,t)}Oe.topBoolOrEmptySchema=function(e){const{gen:t,schema:s,validateName:r}=e;!1===s?Ke(e,!1):"object"==typeof s&&!0===s.$async?t.return(Ue.default.data):(t.assign(qe._`${r}.errors`,null),t.return(!0))},Oe.boolOrEmptySchema=function(e,t){const{gen:s,schema:r}=e;!1===r?(s.var(t,!1),Ke(e)):s.var(t,!0)};var Ge={},He={};Object.defineProperty(He,"__esModule",{value:!0}),He.getRules=He.isJSONType=void 0;const Je=new Set(["string","number","integer","boolean","null","object","array"]);He.isJSONType=function(e){return"string"==typeof e&&Je.has(e)},He.getRules=function(){const e={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:c(a({},e),{integer:!0,boolean:!0,null:!0}),rules:[{rules:[]},e.number,e.string,e.array,e.object],post:{rules:[]},all:{},keywords:{}}};var Qe={};function Ye(e,t){return t.rules.some((t=>Ze(e,t)))}function Ze(e,t){var s;return void 0!==e[t.keyword]||(null===(s=t.definition.implements)||void 0===s?void 0:s.some((t=>void 0!==e[t])))}Object.defineProperty(Qe,"__esModule",{value:!0}),Qe.shouldUseRule=Qe.shouldUseGroup=Qe.schemaHasRulesForType=void 0,Qe.schemaHasRulesForType=function({schema:e,self:t},s){const r=t.RULES.types[s];return r&&!0!==r&&Ye(e,r)},Qe.shouldUseGroup=Ye,Qe.shouldUseRule=Ze,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.reportTypeError=e.checkDataTypes=e.checkDataType=e.coerceAndCheckDataType=e.getJSONTypes=e.getSchemaTypes=e.DataType=void 0;const t=He,s=Qe,r=De,n=je,i=Be;var o,a;function c(e){const s=Array.isArray(e)?e:e?[e]:[];if(s.every(t.isJSONType))return s;throw new Error("type must be JSONType or JSONType[]: "+s.join(","))}(a=o=e.DataType||(e.DataType={}))[a.Correct=0]="Correct",a[a.Wrong=1]="Wrong",e.getSchemaTypes=function(e){const t=c(e.type);if(t.includes("null")){if(!1===e.nullable)throw new Error("type: null contradicts nullable: false")}else{if(!t.length&&void 0!==e.nullable)throw new Error('"nullable" cannot be used without "type"');!0===e.nullable&&t.push("null")}return t},e.getJSONTypes=c,e.coerceAndCheckDataType=function(e,t){const{gen:r,data:i,opts:a}=e,c=function(e,t){return t?e.filter((e=>l.has(e)||"array"===t&&"array"===e)):[]}(t,a.coerceTypes),d=t.length>0&&!(0===c.length&&1===t.length&&(0,s.schemaHasRulesForType)(e,t[0]));if(d){const s=u(t,i,a.strictNumbers,o.Wrong);r.if(s,(()=>{c.length?function(e,t,s){const{gen:r,data:i,opts:o}=e,a=r.let("dataType",n._`typeof ${i}`),c=r.let("coerced",n._`undefined`);"array"===o.coerceTypes&&r.if(n._`${a} == 'object' && Array.isArray(${i}) && ${i}.length == 1`,(()=>r.assign(i,n._`${i}[0]`).assign(a,n._`typeof ${i}`).if(u(t,i,o.strictNumbers),(()=>r.assign(c,i)))));r.if(n._`${c} !== undefined`);for(const n of s)(l.has(n)||"array"===n&&"array"===o.coerceTypes)&&d(n);function d(e){switch(e){case"string":return void r.elseIf(n._`${a} == "number" || ${a} == "boolean"`).assign(c,n._`"" + ${i}`).elseIf(n._`${i} === null`).assign(c,n._`""`);case"number":return void r.elseIf(n._`${a} == "boolean" || ${i} === null
              || (${a} == "string" && ${i} && ${i} == +${i})`).assign(c,n._`+${i}`);case"integer":return void r.elseIf(n._`${a} === "boolean" || ${i} === null
              || (${a} === "string" && ${i} && ${i} == +${i} && !(${i} % 1))`).assign(c,n._`+${i}`);case"boolean":return void r.elseIf(n._`${i} === "false" || ${i} === 0 || ${i} === null`).assign(c,!1).elseIf(n._`${i} === "true" || ${i} === 1`).assign(c,!0);case"null":return r.elseIf(n._`${i} === "" || ${i} === 0 || ${i} === false`),void r.assign(c,null);case"array":r.elseIf(n._`${a} === "string" || ${a} === "number"
              || ${a} === "boolean" || ${i} === null`).assign(c,n._`[${i}]`)}}r.else(),p(e),r.endIf(),r.if(n._`${c} !== undefined`,(()=>{r.assign(i,c),function({gen:e,parentData:t,parentDataProperty:s},r){e.if(n._`${t} !== undefined`,(()=>e.assign(n._`${t}[${s}]`,r)))}(e,c)}))}(e,t,c):p(e)}))}return d};const l=new Set(["string","number","integer","boolean","null"]);function d(e,t,s,r=o.Correct){const i=r===o.Correct?n.operators.EQ:n.operators.NEQ;let a;switch(e){case"null":return n._`${t} ${i} null`;case"array":a=n._`Array.isArray(${t})`;break;case"object":a=n._`${t} && typeof ${t} == "object" && !Array.isArray(${t})`;break;case"integer":a=c(n._`!(${t} % 1) && !isNaN(${t})`);break;case"number":a=c();break;default:return n._`typeof ${t} ${i} ${e}`}return r===o.Correct?a:(0,n.not)(a);function c(e=n.nil){return(0,n.and)(n._`typeof ${t} == "number"`,e,s?n._`isFinite(${t})`:n.nil)}}function u(e,t,s,r){if(1===e.length)return d(e[0],t,s,r);let o;const a=(0,i.toHash)(e);if(a.array&&a.object){const e=n._`typeof ${t} != "object"`;o=a.null?e:n._`!${t} || ${e}`,delete a.null,delete a.array,delete a.object}else o=n.nil;a.number&&delete a.integer;for(const i in a)o=(0,n.and)(o,d(i,t,s,r));return o}e.checkDataType=d,e.checkDataTypes=u;const h={message:({schema:e})=>`must be ${e}`,params:({schema:e,schemaValue:t})=>"string"==typeof e?n._`{type: ${e}}`:n._`{type: ${t}}`};function p(e){const t=function(e){const{gen:t,data:s,schema:r}=e,n=(0,i.schemaRefOrVal)(e,r,"type");return{gen:t,keyword:"type",data:s,schema:r.type,schemaCode:n,schemaValue:n,parentSchema:r,params:{},it:e}}(e);(0,r.reportError)(t,h)}e.reportTypeError=p}(Ge);var Xe={};Object.defineProperty(Xe,"__esModule",{value:!0}),Xe.assignDefaults=void 0;const et=je,tt=Be;function st(e,t,s){const{gen:r,compositeRule:n,data:i,opts:o}=e;if(void 0===s)return;const a=et._`${i}${(0,et.getProperty)(t)}`;if(n)return void(0,tt.checkStrictMode)(e,`default is ignored for: ${a}`);let c=et._`${a} === undefined`;"empty"===o.useDefaults&&(c=et._`${c} || ${a} === null || ${a} === ""`),r.if(c,et._`${a} = ${(0,et.stringify)(s)}`)}Xe.assignDefaults=function(e,t){const{properties:s,items:r}=e.schema;if("object"===t&&s)for(const n in s)st(e,n,s[n].default);else"array"===t&&Array.isArray(r)&&r.forEach(((t,s)=>st(e,s,t.default)))};var rt={},nt={};Object.defineProperty(nt,"__esModule",{value:!0}),nt.validateUnion=nt.validateArray=nt.usePattern=nt.callValidateCode=nt.schemaProperties=nt.allSchemaProperties=nt.noPropertyInData=nt.propertyInData=nt.isOwnProperty=nt.hasPropFunc=nt.reportMissingProp=nt.checkMissingProp=nt.checkReportMissingProp=void 0;const it=je,ot=Be,at=Fe,ct=Be;function lt(e){return e.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:it._`Object.prototype.hasOwnProperty`})}function dt(e,t,s){return it._`${lt(e)}.call(${t}, ${s})`}function ut(e,t,s,r){const n=it._`${t}${(0,it.getProperty)(s)} === undefined`;return r?(0,it.or)(n,(0,it.not)(dt(e,t,s))):n}function ht(e){return e?Object.keys(e).filter((e=>"__proto__"!==e)):[]}nt.checkReportMissingProp=function(e,t){const{gen:s,data:r,it:n}=e;s.if(ut(s,r,t,n.opts.ownProperties),(()=>{e.setParams({missingProperty:it._`${t}`},!0),e.error()}))},nt.checkMissingProp=function({gen:e,data:t,it:{opts:s}},r,n){return(0,it.or)(...r.map((r=>(0,it.and)(ut(e,t,r,s.ownProperties),it._`${n} = ${r}`))))},nt.reportMissingProp=function(e,t){e.setParams({missingProperty:t},!0),e.error()},nt.hasPropFunc=lt,nt.isOwnProperty=dt,nt.propertyInData=function(e,t,s,r){const n=it._`${t}${(0,it.getProperty)(s)} !== undefined`;return r?it._`${n} && ${dt(e,t,s)}`:n},nt.noPropertyInData=ut,nt.allSchemaProperties=ht,nt.schemaProperties=function(e,t){return ht(t).filter((s=>!(0,ot.alwaysValidSchema)(e,t[s])))},nt.callValidateCode=function({schemaCode:e,data:t,it:{gen:s,topSchemaRef:r,schemaPath:n,errorPath:i},it:o},a,c,l){const d=l?it._`${e}, ${t}, ${r}${n}`:t,u=[[at.default.instancePath,(0,it.strConcat)(at.default.instancePath,i)],[at.default.parentData,o.parentData],[at.default.parentDataProperty,o.parentDataProperty],[at.default.rootData,at.default.rootData]];o.opts.dynamicRef&&u.push([at.default.dynamicAnchors,at.default.dynamicAnchors]);const h=it._`${d}, ${s.object(...u)}`;return c!==it.nil?it._`${a}.call(${c}, ${h})`:it._`${a}(${h})`};const pt=it._`new RegExp`;nt.usePattern=function({gen:e,it:{opts:t}},s){const r=t.unicodeRegExp?"u":"",{regExp:n}=t.code,i=n(s,r);return e.scopeValue("pattern",{key:i.toString(),ref:i,code:it._`${"new RegExp"===n.code?pt:(0,ct.useFunc)(e,n)}(${s}, ${r})`})},nt.validateArray=function(e){const{gen:t,data:s,keyword:r,it:n}=e,i=t.name("valid");if(n.allErrors){const e=t.let("valid",!0);return o((()=>t.assign(e,!1))),e}return t.var(i,!0),o((()=>t.break())),i;function o(n){const o=t.const("len",it._`${s}.length`);t.forRange("i",0,o,(s=>{e.subschema({keyword:r,dataProp:s,dataPropType:ot.Type.Num},i),t.if((0,it.not)(i),n)}))}},nt.validateUnion=function(e){const{gen:t,schema:s,keyword:r,it:n}=e;if(!Array.isArray(s))throw new Error("ajv implementation error");if(s.some((e=>(0,ot.alwaysValidSchema)(n,e)))&&!n.opts.unevaluated)return;const i=t.let("valid",!1),o=t.name("_valid");t.block((()=>s.forEach(((s,n)=>{const a=e.subschema({keyword:r,schemaProp:n,compositeRule:!0},o);t.assign(i,it._`${i} || ${o}`);e.mergeValidEvaluated(a,o)||t.if((0,it.not)(i))})))),e.result(i,(()=>e.reset()),(()=>e.error(!0)))},Object.defineProperty(rt,"__esModule",{value:!0}),rt.validateKeywordUsage=rt.validSchemaType=rt.funcKeywordCode=rt.macroKeywordCode=void 0;const mt=je,ft=Fe,yt=nt,gt=De;function vt(e){const{gen:t,data:s,it:r}=e;t.if(r.parentData,(()=>t.assign(s,mt._`${r.parentData}[${r.parentDataProperty}]`)))}function bt(e,t,s){if(void 0===s)throw new Error(`keyword "${t}" failed to compile`);return e.scopeValue("keyword","function"==typeof s?{ref:s}:{ref:s,code:(0,mt.stringify)(s)})}rt.macroKeywordCode=function(e,t){const{gen:s,keyword:r,schema:n,parentSchema:i,it:o}=e,a=t.macro.call(o.self,n,i,o),c=bt(s,r,a);!1!==o.opts.validateSchema&&o.self.validateSchema(a,!0);const l=s.name("valid");e.subschema({schema:a,schemaPath:mt.nil,errSchemaPath:`${o.errSchemaPath}/${r}`,topSchemaRef:c,compositeRule:!0},l),e.pass(l,(()=>e.error(!0)))},rt.funcKeywordCode=function(e,t){var s;const{gen:r,keyword:n,schema:i,parentSchema:o,$data:a,it:c}=e;!function({schemaEnv:e},t){if(t.async&&!e.$async)throw new Error("async keyword in sync schema")}(c,t);const l=!a&&t.compile?t.compile.call(c.self,i,o,c):t.validate,d=bt(r,n,l),u=r.let("valid");function h(s=(t.async?mt._`await `:mt.nil)){const n=c.opts.passContext?ft.default.this:ft.default.self,i=!("compile"in t&&!a||!1===t.schema);r.assign(u,mt._`${s}${(0,yt.callValidateCode)(e,d,n,i)}`,t.modifying)}function p(e){var s;r.if((0,mt.not)(null!==(s=t.valid)&&void 0!==s?s:u),e)}e.block$data(u,(function(){if(!1===t.errors)h(),t.modifying&&vt(e),p((()=>e.error()));else{const s=t.async?function(){const e=r.let("ruleErrs",null);return r.try((()=>h(mt._`await `)),(t=>r.assign(u,!1).if(mt._`${t} instanceof ${c.ValidationError}`,(()=>r.assign(e,mt._`${t}.errors`)),(()=>r.throw(t))))),e}():function(){const e=mt._`${d}.errors`;return r.assign(e,null),h(mt.nil),e}();t.modifying&&vt(e),p((()=>function(e,t){const{gen:s}=e;s.if(mt._`Array.isArray(${t})`,(()=>{s.assign(ft.default.vErrors,mt._`${ft.default.vErrors} === null ? ${t} : ${ft.default.vErrors}.concat(${t})`).assign(ft.default.errors,mt._`${ft.default.vErrors}.length`),(0,gt.extendErrors)(e)}),(()=>e.error()))}(e,s)))}})),e.ok(null!==(s=t.valid)&&void 0!==s?s:u)},rt.validSchemaType=function(e,t,s=!1){return!t.length||t.some((t=>"array"===t?Array.isArray(e):"object"===t?e&&"object"==typeof e&&!Array.isArray(e):typeof e==t||s&&void 0===e))},rt.validateKeywordUsage=function({schema:e,opts:t,self:s,errSchemaPath:r},n,i){if(Array.isArray(n.keyword)?!n.keyword.includes(i):n.keyword!==i)throw new Error("ajv implementation error");const o=n.dependencies;if(null==o?void 0:o.some((t=>!Object.prototype.hasOwnProperty.call(e,t))))throw new Error(`parent schema must have dependencies of ${i}: ${o.join(",")}`);if(n.validateSchema){if(!n.validateSchema(e[i])){const e=`keyword "${i}" value is invalid at path "${r}": `+s.errorsText(n.validateSchema.errors);if("log"!==t.validateSchema)throw new Error(e);s.logger.error(e)}}};var wt={};Object.defineProperty(wt,"__esModule",{value:!0}),wt.extendSubschemaMode=wt.extendSubschemaData=wt.getSubschema=void 0;const _t=je,$t=Be;wt.getSubschema=function(e,{keyword:t,schemaProp:s,schema:r,schemaPath:n,errSchemaPath:i,topSchemaRef:o}){if(void 0!==t&&void 0!==r)throw new Error('both "keyword" and "schema" passed, only one allowed');if(void 0!==t){const r=e.schema[t];return void 0===s?{schema:r,schemaPath:_t._`${e.schemaPath}${(0,_t.getProperty)(t)}`,errSchemaPath:`${e.errSchemaPath}/${t}`}:{schema:r[s],schemaPath:_t._`${e.schemaPath}${(0,_t.getProperty)(t)}${(0,_t.getProperty)(s)}`,errSchemaPath:`${e.errSchemaPath}/${t}/${(0,$t.escapeFragment)(s)}`}}if(void 0!==r){if(void 0===n||void 0===i||void 0===o)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:r,schemaPath:n,topSchemaRef:o,errSchemaPath:i}}throw new Error('either "keyword" or "schema" must be passed')},wt.extendSubschemaData=function(e,t,{dataProp:s,dataPropType:r,data:n,dataTypes:i,propertyName:o}){if(void 0!==n&&void 0!==s)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:a}=t;if(void 0!==s){const{errorPath:n,dataPathArr:i,opts:o}=t;c(a.let("data",_t._`${t.data}${(0,_t.getProperty)(s)}`,!0)),e.errorPath=_t.str`${n}${(0,$t.getErrorPath)(s,r,o.jsPropertySyntax)}`,e.parentDataProperty=_t._`${s}`,e.dataPathArr=[...i,e.parentDataProperty]}if(void 0!==n){c(n instanceof _t.Name?n:a.let("data",n,!0)),void 0!==o&&(e.propertyName=o)}function c(s){e.data=s,e.dataLevel=t.dataLevel+1,e.dataTypes=[],t.definedProperties=new Set,e.parentData=t.data,e.dataNames=[...t.dataNames,s]}i&&(e.dataTypes=i)},wt.extendSubschemaMode=function(e,{jtdDiscriminator:t,jtdMetadata:s,compositeRule:r,createErrors:n,allErrors:i}){void 0!==r&&(e.compositeRule=r),void 0!==n&&(e.createErrors=n),void 0!==i&&(e.allErrors=i),e.jtdDiscriminator=t,e.jtdMetadata=s};var St={},Pt=function e(t,s){if(t===s)return!0;if(t&&s&&"object"==typeof t&&"object"==typeof s){if(t.constructor!==s.constructor)return!1;var r,n,i;if(Array.isArray(t)){if((r=t.length)!=s.length)return!1;for(n=r;0!=n--;)if(!e(t[n],s[n]))return!1;return!0}if(t.constructor===RegExp)return t.source===s.source&&t.flags===s.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===s.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===s.toString();if((r=(i=Object.keys(t)).length)!==Object.keys(s).length)return!1;for(n=r;0!=n--;)if(!Object.prototype.hasOwnProperty.call(s,i[n]))return!1;for(n=r;0!=n--;){var o=i[n];if(!e(t[o],s[o]))return!1}return!0}return t!=t&&s!=s},Et={},Ct={get exports(){return Et},set exports(e){Et=e}}.exports=function(e,t,s){"function"==typeof t&&(s=t,t={}),kt(t,"function"==typeof(s=t.cb||s)?s:s.pre||function(){},s.post||function(){},e,"",e)};function kt(e,t,s,r,n,i,o,a,c,l){if(r&&"object"==typeof r&&!Array.isArray(r)){for(var d in t(r,n,i,o,a,c,l),r){var u=r[d];if(Array.isArray(u)){if(d in Ct.arrayKeywords)for(var h=0;h<u.length;h++)kt(e,t,s,u[h],n+"/"+d+"/"+h,i,n,d,r,h)}else if(d in Ct.propsKeywords){if(u&&"object"==typeof u)for(var p in u)kt(e,t,s,u[p],n+"/"+d+"/"+p.replace(/~/g,"~0").replace(/\//g,"~1"),i,n,d,r,p)}else(d in Ct.keywords||e.allKeys&&!(d in Ct.skipKeywords))&&kt(e,t,s,u,n+"/"+d,i,n,d,r)}s(r,n,i,o,a,c,l)}}Ct.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0},Ct.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},Ct.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},Ct.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0},Object.defineProperty(St,"__esModule",{value:!0}),St.getSchemaRefs=St.resolveUrl=St.normalizeId=St._getFullPath=St.getFullPath=St.inlineRef=void 0;const xt=Be,It=Pt,Rt=Et,Tt=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);St.inlineRef=function(e,t=!0){return"boolean"==typeof e||(!0===t?!Ot(e):!!t&&Dt(e)<=t)};const Nt=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function Ot(e){for(const t in e){if(Nt.has(t))return!0;const s=e[t];if(Array.isArray(s)&&s.some(Ot))return!0;if("object"==typeof s&&Ot(s))return!0}return!1}function Dt(e){let t=0;for(const s in e){if("$ref"===s)return 1/0;if(t++,!Tt.has(s)&&("object"==typeof e[s]&&(0,xt.eachItem)(e[s],(e=>t+=Dt(e))),t===1/0))return 1/0}return t}function jt(e,t="",s){!1!==s&&(t=Bt(t));const r=e.parse(t);return At(e,r)}function At(e,t){return e.serialize(t).split("#")[0]+"#"}St.getFullPath=jt,St._getFullPath=At;const Mt=/#\/?$/;function Bt(e){return e?e.replace(Mt,""):""}St.normalizeId=Bt,St.resolveUrl=function(e,t,s){return s=Bt(s),e.resolve(t,s)};const Ft=/^[a-z_][-a-z0-9._]*$/i;St.getSchemaRefs=function(e,t){if("boolean"==typeof e)return{};const{schemaId:s,uriResolver:r}=this.opts,n=Bt(e[s]||t),i={"":n},o=jt(r,n,!1),a={},c=new Set;return Rt(e,{allKeys:!0},((e,t,r,n)=>{if(void 0===n)return;const u=o+t;let h=i[n];function p(t){const s=this.opts.uriResolver.resolve;if(t=Bt(h?s(h,t):t),c.has(t))throw d(t);c.add(t);let r=this.refs[t];return"string"==typeof r&&(r=this.refs[r]),"object"==typeof r?l(e,r.schema,t):t!==Bt(u)&&("#"===t[0]?(l(e,a[t],t),a[t]=e):this.refs[t]=u),t}function m(e){if("string"==typeof e){if(!Ft.test(e))throw new Error(`invalid anchor "${e}"`);p.call(this,`#${e}`)}}"string"==typeof e[s]&&(h=p.call(this,e[s])),m.call(this,e.$anchor),m.call(this,e.$dynamicAnchor),i[t]=h})),a;function l(e,t,s){if(void 0!==t&&!It(e,t))throw d(s)}function d(e){return new Error(`reference "${e}" resolves to more than one schema`)}},Object.defineProperty(Ne,"__esModule",{value:!0}),Ne.getData=Ne.KeywordCxt=Ne.validateFunctionCode=void 0;const Vt=Oe,Lt=Ge,Wt=Qe,qt=Ge,Ut=Xe,zt=rt,Kt=wt,Gt=je,Ht=Fe,Jt=St,Qt=Be,Yt=De;function Zt({gen:e,validateName:t,schema:s,schemaEnv:r,opts:n},i){n.code.es5?e.func(t,Gt._`${Ht.default.data}, ${Ht.default.valCxt}`,r.$async,(()=>{e.code(Gt._`"use strict"; ${Xt(s,n)}`),function(e,t){e.if(Ht.default.valCxt,(()=>{e.var(Ht.default.instancePath,Gt._`${Ht.default.valCxt}.${Ht.default.instancePath}`),e.var(Ht.default.parentData,Gt._`${Ht.default.valCxt}.${Ht.default.parentData}`),e.var(Ht.default.parentDataProperty,Gt._`${Ht.default.valCxt}.${Ht.default.parentDataProperty}`),e.var(Ht.default.rootData,Gt._`${Ht.default.valCxt}.${Ht.default.rootData}`),t.dynamicRef&&e.var(Ht.default.dynamicAnchors,Gt._`${Ht.default.valCxt}.${Ht.default.dynamicAnchors}`)}),(()=>{e.var(Ht.default.instancePath,Gt._`""`),e.var(Ht.default.parentData,Gt._`undefined`),e.var(Ht.default.parentDataProperty,Gt._`undefined`),e.var(Ht.default.rootData,Ht.default.data),t.dynamicRef&&e.var(Ht.default.dynamicAnchors,Gt._`{}`)}))}(e,n),e.code(i)})):e.func(t,Gt._`${Ht.default.data}, ${function(e){return Gt._`{${Ht.default.instancePath}="", ${Ht.default.parentData}, ${Ht.default.parentDataProperty}, ${Ht.default.rootData}=${Ht.default.data}${e.dynamicRef?Gt._`, ${Ht.default.dynamicAnchors}={}`:Gt.nil}}={}`}(n)}`,r.$async,(()=>e.code(Xt(s,n)).code(i)))}function Xt(e,t){const s="object"==typeof e&&e[t.schemaId];return s&&(t.code.source||t.code.process)?Gt._`/*# sourceURL=${s} */`:Gt.nil}function es(e,t){ss(e)&&(rs(e),ts(e))?function(e,t){const{schema:s,gen:r,opts:n}=e;n.$comment&&s.$comment&&is(e);(function(e){const t=e.schema[e.opts.schemaId];t&&(e.baseId=(0,Jt.resolveUrl)(e.opts.uriResolver,e.baseId,t))})(e),function(e){if(e.schema.$async&&!e.schemaEnv.$async)throw new Error("async schema in sync schema")}(e);const i=r.const("_errs",Ht.default.errors);ns(e,i),r.var(t,Gt._`${i} === ${Ht.default.errors}`)}(e,t):(0,Vt.boolOrEmptySchema)(e,t)}function ts({schema:e,self:t}){if("boolean"==typeof e)return!e;for(const s in e)if(t.RULES.all[s])return!0;return!1}function ss(e){return"boolean"!=typeof e.schema}function rs(e){(0,Qt.checkUnknownRules)(e),function(e){const{schema:t,errSchemaPath:s,opts:r,self:n}=e;t.$ref&&r.ignoreKeywordsWithRef&&(0,Qt.schemaHasRulesButRef)(t,n.RULES)&&n.logger.warn(`$ref: keywords ignored in schema at path "${s}"`)}(e)}function ns(e,t){if(e.opts.jtd)return os(e,[],!1,t);const s=(0,Lt.getSchemaTypes)(e.schema);os(e,s,!(0,Lt.coerceAndCheckDataType)(e,s),t)}function is({gen:e,schemaEnv:t,schema:s,errSchemaPath:r,opts:n}){const i=s.$comment;if(!0===n.$comment)e.code(Gt._`${Ht.default.self}.logger.log(${i})`);else if("function"==typeof n.$comment){const s=Gt.str`${r}/$comment`,n=e.scopeValue("root",{ref:t.root});e.code(Gt._`${Ht.default.self}.opts.$comment(${i}, ${s}, ${n}.schema)`)}}function os(e,t,s,r){const{gen:n,schema:i,data:o,allErrors:a,opts:c,self:l}=e,{RULES:d}=l;function u(l){(0,Wt.shouldUseGroup)(i,l)&&(l.type?(n.if((0,qt.checkDataType)(l.type,o,c.strictNumbers)),as(e,l),1===t.length&&t[0]===l.type&&s&&(n.else(),(0,qt.reportTypeError)(e)),n.endIf()):as(e,l),a||n.if(Gt._`${Ht.default.errors} === ${r||0}`))}!i.$ref||!c.ignoreKeywordsWithRef&&(0,Qt.schemaHasRulesButRef)(i,d)?(c.jtd||function(e,t){if(e.schemaEnv.meta||!e.opts.strictTypes)return;(function(e,t){if(!t.length)return;if(!e.dataTypes.length)return void(e.dataTypes=t);t.forEach((t=>{ls(e.dataTypes,t)||ds(e,`type "${t}" not allowed by context "${e.dataTypes.join(",")}"`)})),function(e,t){const s=[];for(const r of e.dataTypes)ls(t,r)?s.push(r):t.includes("integer")&&"number"===r&&s.push("integer");e.dataTypes=s}(e,t)})(e,t),e.opts.allowUnionTypes||function(e,t){t.length>1&&(2!==t.length||!t.includes("null"))&&ds(e,"use allowUnionTypes to allow union type keyword")}(e,t);!function(e,t){const s=e.self.RULES.all;for(const r in s){const n=s[r];if("object"==typeof n&&(0,Wt.shouldUseRule)(e.schema,n)){const{type:s}=n.definition;s.length&&!s.some((e=>cs(t,e)))&&ds(e,`missing type "${s.join(",")}" for keyword "${r}"`)}}}(e,e.dataTypes)}(e,t),n.block((()=>{for(const e of d.rules)u(e);u(d.post)}))):n.block((()=>hs(e,"$ref",d.all.$ref.definition)))}function as(e,t){const{gen:s,schema:r,opts:{useDefaults:n}}=e;n&&(0,Ut.assignDefaults)(e,t.type),s.block((()=>{for(const s of t.rules)(0,Wt.shouldUseRule)(r,s)&&hs(e,s.keyword,s.definition,t.type)}))}function cs(e,t){return e.includes(t)||"number"===t&&e.includes("integer")}function ls(e,t){return e.includes(t)||"integer"===t&&e.includes("number")}function ds(e,t){t+=` at "${e.schemaEnv.baseId+e.errSchemaPath}" (strictTypes)`,(0,Qt.checkStrictMode)(e,t,e.opts.strictTypes)}Ne.validateFunctionCode=function(e){ss(e)&&(rs(e),ts(e))?function(e){const{schema:t,opts:s,gen:r}=e;Zt(e,(()=>{s.$comment&&t.$comment&&is(e),function(e){const{schema:t,opts:s}=e;void 0!==t.default&&s.useDefaults&&s.strictSchema&&(0,Qt.checkStrictMode)(e,"default is ignored in the schema root")}(e),r.let(Ht.default.vErrors,null),r.let(Ht.default.errors,0),s.unevaluated&&function(e){const{gen:t,validateName:s}=e;e.evaluated=t.const("evaluated",Gt._`${s}.evaluated`),t.if(Gt._`${e.evaluated}.dynamicProps`,(()=>t.assign(Gt._`${e.evaluated}.props`,Gt._`undefined`))),t.if(Gt._`${e.evaluated}.dynamicItems`,(()=>t.assign(Gt._`${e.evaluated}.items`,Gt._`undefined`)))}(e),ns(e),function(e){const{gen:t,schemaEnv:s,validateName:r,ValidationError:n,opts:i}=e;s.$async?t.if(Gt._`${Ht.default.errors} === 0`,(()=>t.return(Ht.default.data)),(()=>t.throw(Gt._`new ${n}(${Ht.default.vErrors})`))):(t.assign(Gt._`${r}.errors`,Ht.default.vErrors),i.unevaluated&&function({gen:e,evaluated:t,props:s,items:r}){s instanceof Gt.Name&&e.assign(Gt._`${t}.props`,s);r instanceof Gt.Name&&e.assign(Gt._`${t}.items`,r)}(e),t.return(Gt._`${Ht.default.errors} === 0`))}(e)}))}(e):Zt(e,(()=>(0,Vt.topBoolOrEmptySchema)(e)))};class us{constructor(e,t,s){if((0,zt.validateKeywordUsage)(e,t,s),this.gen=e.gen,this.allErrors=e.allErrors,this.keyword=s,this.data=e.data,this.schema=e.schema[s],this.$data=t.$data&&e.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,Qt.schemaRefOrVal)(e,this.schema,s,this.$data),this.schemaType=t.schemaType,this.parentSchema=e.schema,this.params={},this.it=e,this.def=t,this.$data)this.schemaCode=e.gen.const("vSchema",fs(this.$data,e));else if(this.schemaCode=this.schemaValue,!(0,zt.validSchemaType)(this.schema,t.schemaType,t.allowUndefined))throw new Error(`${s} value must be ${JSON.stringify(t.schemaType)}`);("code"in t?t.trackErrors:!1!==t.errors)&&(this.errsCount=e.gen.const("_errs",Ht.default.errors))}result(e,t,s){this.failResult((0,Gt.not)(e),t,s)}failResult(e,t,s){this.gen.if(e),s?s():this.error(),t?(this.gen.else(),t(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(e,t){this.failResult((0,Gt.not)(e),void 0,t)}fail(e){if(void 0===e)return this.error(),void(this.allErrors||this.gen.if(!1));this.gen.if(e),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(e){if(!this.$data)return this.fail(e);const{schemaCode:t}=this;this.fail(Gt._`${t} !== undefined && (${(0,Gt.or)(this.invalid$data(),e)})`)}error(e,t,s){if(t)return this.setParams(t),this._error(e,s),void this.setParams({});this._error(e,s)}_error(e,t){(e?Yt.reportExtraError:Yt.reportError)(this,this.def.error,t)}$dataError(){(0,Yt.reportError)(this,this.def.$dataError||Yt.keyword$DataError)}reset(){if(void 0===this.errsCount)throw new Error('add "trackErrors" to keyword definition');(0,Yt.resetErrorsCount)(this.gen,this.errsCount)}ok(e){this.allErrors||this.gen.if(e)}setParams(e,t){t?Object.assign(this.params,e):this.params=e}block$data(e,t,s=Gt.nil){this.gen.block((()=>{this.check$data(e,s),t()}))}check$data(e=Gt.nil,t=Gt.nil){if(!this.$data)return;const{gen:s,schemaCode:r,schemaType:n,def:i}=this;s.if((0,Gt.or)(Gt._`${r} === undefined`,t)),e!==Gt.nil&&s.assign(e,!0),(n.length||i.validateSchema)&&(s.elseIf(this.invalid$data()),this.$dataError(),e!==Gt.nil&&s.assign(e,!1)),s.else()}invalid$data(){const{gen:e,schemaCode:t,schemaType:s,def:r,it:n}=this;return(0,Gt.or)(function(){if(s.length){if(!(t instanceof Gt.Name))throw new Error("ajv implementation error");const e=Array.isArray(s)?s:[s];return Gt._`${(0,qt.checkDataTypes)(e,t,n.opts.strictNumbers,qt.DataType.Wrong)}`}return Gt.nil}(),function(){if(r.validateSchema){const s=e.scopeValue("validate$data",{ref:r.validateSchema});return Gt._`!${s}(${t})`}return Gt.nil}())}subschema(e,t){const s=(0,Kt.getSubschema)(this.it,e);(0,Kt.extendSubschemaData)(s,this.it,e),(0,Kt.extendSubschemaMode)(s,e);const r=c(a(a({},this.it),s),{items:void 0,props:void 0});return es(r,t),r}mergeEvaluated(e,t){const{it:s,gen:r}=this;s.opts.unevaluated&&(!0!==s.props&&void 0!==e.props&&(s.props=Qt.mergeEvaluated.props(r,e.props,s.props,t)),!0!==s.items&&void 0!==e.items&&(s.items=Qt.mergeEvaluated.items(r,e.items,s.items,t)))}mergeValidEvaluated(e,t){const{it:s,gen:r}=this;if(s.opts.unevaluated&&(!0!==s.props||!0!==s.items))return r.if(t,(()=>this.mergeEvaluated(e,Gt.Name))),!0}}function hs(e,t,s,r){const n=new us(e,s,t);"code"in s?s.code(n,r):n.$data&&s.validate?(0,zt.funcKeywordCode)(n,s):"macro"in s?(0,zt.macroKeywordCode)(n,s):(s.compile||s.validate)&&(0,zt.funcKeywordCode)(n,s)}Ne.KeywordCxt=us;const ps=/^\/(?:[^~]|~0|~1)*$/,ms=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function fs(e,{dataLevel:t,dataNames:s,dataPathArr:r}){let n,i;if(""===e)return Ht.default.rootData;if("/"===e[0]){if(!ps.test(e))throw new Error(`Invalid JSON-pointer: ${e}`);n=e,i=Ht.default.rootData}else{const o=ms.exec(e);if(!o)throw new Error(`Invalid JSON-pointer: ${e}`);const a=+o[1];if(n=o[2],"#"===n){if(a>=t)throw new Error(c("property/index",a));return r[t-a]}if(a>t)throw new Error(c("data",a));if(i=s[t-a],!n)return i}let o=i;const a=n.split("/");for(const l of a)l&&(i=Gt._`${i}${(0,Gt.getProperty)((0,Qt.unescapeJsonPointer)(l))}`,o=Gt._`${o} && ${i}`);return o;function c(e,s){return`Cannot access ${e} ${s} levels up, current level is ${t}`}}Ne.getData=fs;var ys={};Object.defineProperty(ys,"__esModule",{value:!0});class gs extends Error{constructor(e){super("validation failed"),this.errors=e,this.ajv=this.validation=!0}}ys.default=gs;var vs={};Object.defineProperty(vs,"__esModule",{value:!0});const bs=St;class ws extends Error{constructor(e,t,s,r){super(r||`can't resolve reference ${s} from id ${t}`),this.missingRef=(0,bs.resolveUrl)(e,t,s),this.missingSchema=(0,bs.normalizeId)((0,bs.getFullPath)(e,this.missingRef))}}vs.default=ws;var _s={};Object.defineProperty(_s,"__esModule",{value:!0}),_s.resolveSchema=_s.getCompilingSchema=_s.resolveRef=_s.compileSchema=_s.SchemaEnv=void 0;const $s=je,Ss=ys,Ps=Fe,Es=St,Cs=Be,ks=Ne;class xs{constructor(e){var t;let s;this.refs={},this.dynamicAnchors={},"object"==typeof e.schema&&(s=e.schema),this.schema=e.schema,this.schemaId=e.schemaId,this.root=e.root||this,this.baseId=null!==(t=e.baseId)&&void 0!==t?t:(0,Es.normalizeId)(null==s?void 0:s[e.schemaId||"$id"]),this.schemaPath=e.schemaPath,this.localRefs=e.localRefs,this.meta=e.meta,this.$async=null==s?void 0:s.$async,this.refs={}}}function Is(e){const t=Ts.call(this,e);if(t)return t;const s=(0,Es.getFullPath)(this.opts.uriResolver,e.root.baseId),{es5:r,lines:n}=this.opts.code,{ownProperties:i}=this.opts,o=new $s.CodeGen(this.scope,{es5:r,lines:n,ownProperties:i});let a;e.$async&&(a=o.scopeValue("Error",{ref:Ss.default,code:$s._`require("ajv/dist/runtime/validation_error").default`}));const c=o.scopeName("validate");e.validateName=c;const l={gen:o,allErrors:this.opts.allErrors,data:Ps.default.data,parentData:Ps.default.parentData,parentDataProperty:Ps.default.parentDataProperty,dataNames:[Ps.default.data],dataPathArr:[$s.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:o.scopeValue("schema",!0===this.opts.code.source?{ref:e.schema,code:(0,$s.stringify)(e.schema)}:{ref:e.schema}),validateName:c,ValidationError:a,schema:e.schema,schemaEnv:e,rootId:s,baseId:e.baseId||s,schemaPath:$s.nil,errSchemaPath:e.schemaPath||(this.opts.jtd?"":"#"),errorPath:$s._`""`,opts:this.opts,self:this};let d;try{this._compilations.add(e),(0,ks.validateFunctionCode)(l),o.optimize(this.opts.code.optimize);const t=o.toString();d=`${o.scopeRefs(Ps.default.scope)}return ${t}`,this.opts.code.process&&(d=this.opts.code.process(d,e));const s=new Function(`${Ps.default.self}`,`${Ps.default.scope}`,d)(this,this.scope.get());if(this.scope.value(c,{ref:s}),s.errors=null,s.schema=e.schema,s.schemaEnv=e,e.$async&&(s.$async=!0),!0===this.opts.code.source&&(s.source={validateName:c,validateCode:t,scopeValues:o._values}),this.opts.unevaluated){const{props:e,items:t}=l;s.evaluated={props:e instanceof $s.Name?void 0:e,items:t instanceof $s.Name?void 0:t,dynamicProps:e instanceof $s.Name,dynamicItems:t instanceof $s.Name},s.source&&(s.source.evaluated=(0,$s.stringify)(s.evaluated))}return e.validate=s,e}catch(u){throw delete e.validate,delete e.validateName,d&&this.logger.error("Error compiling schema, function code:",d),u}finally{this._compilations.delete(e)}}function Rs(e){return(0,Es.inlineRef)(e.schema,this.opts.inlineRefs)?e.schema:e.validate?e:Is.call(this,e)}function Ts(e){for(const r of this._compilations)if(s=e,(t=r).schema===s.schema&&t.root===s.root&&t.baseId===s.baseId)return r;var t,s}function Ns(e,t){let s;for(;"string"==typeof(s=this.refs[t]);)t=s;return s||this.schemas[t]||Os.call(this,e,t)}function Os(e,t){const s=this.opts.uriResolver.parse(t),r=(0,Es._getFullPath)(this.opts.uriResolver,s);let n=(0,Es.getFullPath)(this.opts.uriResolver,e.baseId,void 0);if(Object.keys(e.schema).length>0&&r===n)return js.call(this,s,e);const i=(0,Es.normalizeId)(r),o=this.refs[i]||this.schemas[i];if("string"==typeof o){const t=Os.call(this,e,o);if("object"!=typeof(null==t?void 0:t.schema))return;return js.call(this,s,t)}if("object"==typeof(null==o?void 0:o.schema)){if(o.validate||Is.call(this,o),i===(0,Es.normalizeId)(t)){const{schema:t}=o,{schemaId:s}=this.opts,r=t[s];return r&&(n=(0,Es.resolveUrl)(this.opts.uriResolver,n,r)),new xs({schema:t,schemaId:s,root:e,baseId:n})}return js.call(this,s,o)}}_s.SchemaEnv=xs,_s.compileSchema=Is,_s.resolveRef=function(e,t,s){var r;s=(0,Es.resolveUrl)(this.opts.uriResolver,t,s);const n=e.refs[s];if(n)return n;let i=Ns.call(this,e,s);if(void 0===i){const n=null===(r=e.localRefs)||void 0===r?void 0:r[s],{schemaId:o}=this.opts;n&&(i=new xs({schema:n,schemaId:o,root:e,baseId:t}))}return void 0!==i?e.refs[s]=Rs.call(this,i):void 0},_s.getCompilingSchema=Ts,_s.resolveSchema=Os;const Ds=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function js(e,{baseId:t,schema:s,root:r}){var n;if("/"!==(null===(n=e.fragment)||void 0===n?void 0:n[0]))return;for(const a of e.fragment.slice(1).split("/")){if("boolean"==typeof s)return;const e=s[(0,Cs.unescapeFragment)(a)];if(void 0===e)return;const r="object"==typeof(s=e)&&s[this.opts.schemaId];!Ds.has(a)&&r&&(t=(0,Es.resolveUrl)(this.opts.uriResolver,t,r))}let i;if("boolean"!=typeof s&&s.$ref&&!(0,Cs.schemaHasRulesButRef)(s,this.RULES)){const e=(0,Es.resolveUrl)(this.opts.uriResolver,t,s.$ref);i=Os.call(this,r,e)}const{schemaId:o}=this.opts;return i=i||new xs({schema:s,schemaId:o,root:r,baseId:t}),i.schema!==i.root.schema?i:void 0}const As={$id:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description:"Meta-schema for $data reference (JSON AnySchema extension proposal)",type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1};var Ms={},Bs={};!function(e){function t(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];if(t.length>1){t[0]=t[0].slice(0,-1);for(var r=t.length-1,n=1;n<r;++n)t[n]=t[n].slice(1,-1);return t[r]=t[r].slice(1),t.join("")}return t[0]}function s(e){return"(?:"+e+")"}function r(e){return void 0===e?"undefined":null===e?"null":Object.prototype.toString.call(e).split(" ").pop().split("]").shift().toLowerCase()}function n(e){return e.toUpperCase()}function i(e){return null!=e?e instanceof Array?e:"number"!=typeof e.length||e.split||e.setInterval||e.call?[e]:Array.prototype.slice.call(e):[]}function o(e,t){var s=e;if(t)for(var r in t)s[r]=t[r];return s}function a(e){var r="[A-Za-z]",n="[0-9]",i=t(n,"[A-Fa-f]"),o=s(s("%[EFef]"+i+"%"+i+i+"%"+i+i)+"|"+s("%[89A-Fa-f]"+i+"%"+i+i)+"|"+s("%"+i+i)),a="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",c=t("[\\:\\/\\?\\#\\[\\]\\@]",a),l=e?"[\\uE000-\\uF8FF]":"[]",d=t(r,n,"[\\-\\.\\_\\~]",e?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]");s(r+t(r,n,"[\\+\\-\\.]")+"*"),s(s(o+"|"+t(d,a,"[\\:]"))+"*");var u=s(s("25[0-5]")+"|"+s("2[0-4]"+n)+"|"+s("1"+n+n)+"|"+s("0?[1-9]"+n)+"|0?0?"+n),h=s(u+"\\."+u+"\\."+u+"\\."+u),p=s(i+"{1,4}"),m=s(s(p+"\\:"+p)+"|"+h),f=s(s(p+"\\:")+"{6}"+m),y=s("\\:\\:"+s(p+"\\:")+"{5}"+m),g=s(s(p)+"?\\:\\:"+s(p+"\\:")+"{4}"+m),v=s(s(s(p+"\\:")+"{0,1}"+p)+"?\\:\\:"+s(p+"\\:")+"{3}"+m),b=s(s(s(p+"\\:")+"{0,2}"+p)+"?\\:\\:"+s(p+"\\:")+"{2}"+m),w=s(s(s(p+"\\:")+"{0,3}"+p)+"?\\:\\:"+p+"\\:"+m),_=s(s(s(p+"\\:")+"{0,4}"+p)+"?\\:\\:"+m),$=s(s(s(p+"\\:")+"{0,5}"+p)+"?\\:\\:"+p),S=s(s(s(p+"\\:")+"{0,6}"+p)+"?\\:\\:"),P=s([f,y,g,v,b,w,_,$,S].join("|")),E=s(s(d+"|"+o)+"+");s("[vV]"+i+"+\\."+t(d,a,"[\\:]")+"+"),s(s(o+"|"+t(d,a))+"*");var C=s(o+"|"+t(d,a,"[\\:\\@]"));return s(s(o+"|"+t(d,a,"[\\@]"))+"+"),s(s(C+"|"+t("[\\/\\?]",l))+"*"),{NOT_SCHEME:new RegExp(t("[^]",r,n,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(t("[^\\%\\:]",d,a),"g"),NOT_HOST:new RegExp(t("[^\\%\\[\\]\\:]",d,a),"g"),NOT_PATH:new RegExp(t("[^\\%\\/\\:\\@]",d,a),"g"),NOT_PATH_NOSCHEME:new RegExp(t("[^\\%\\/\\@]",d,a),"g"),NOT_QUERY:new RegExp(t("[^\\%]",d,a,"[\\:\\@\\/\\?]",l),"g"),NOT_FRAGMENT:new RegExp(t("[^\\%]",d,a,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(t("[^]",d,a),"g"),UNRESERVED:new RegExp(d,"g"),OTHER_CHARS:new RegExp(t("[^\\%]",d,c),"g"),PCT_ENCODED:new RegExp(o,"g"),IPV4ADDRESS:new RegExp("^("+h+")$"),IPV6ADDRESS:new RegExp("^\\[?("+P+")"+s(s("\\%25|\\%(?!"+i+"{2})")+"("+E+")")+"?\\]?$")}}var c=a(!1),l=a(!0),d=function(){function e(e,t){var s=[],r=!0,n=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(r=(o=a.next()).done)&&(s.push(o.value),!t||s.length!==t);r=!0);}catch(c){n=!0,i=c}finally{try{!r&&a.return&&a.return()}finally{if(n)throw i}}return s}return function(t,s){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,s);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=function(e){if(Array.isArray(e)){for(var t=0,s=Array(e.length);t<e.length;t++)s[t]=e[t];return s}return Array.from(e)},h=2147483647,p=36,m=1,f=26,y=38,g=700,v=72,b=128,w="-",_=/^xn--/,$=/[^\0-\x7E]/,S=/[\x2E\u3002\uFF0E\uFF61]/g,P={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},E=p-m,C=Math.floor,k=String.fromCharCode;function x(e){throw new RangeError(P[e])}function I(e,t){for(var s=[],r=e.length;r--;)s[r]=t(e[r]);return s}function R(e,t){var s=e.split("@"),r="";return s.length>1&&(r=s[0]+"@",e=s[1]),r+I((e=e.replace(S,".")).split("."),t).join(".")}function T(e){for(var t=[],s=0,r=e.length;s<r;){var n=e.charCodeAt(s++);if(n>=55296&&n<=56319&&s<r){var i=e.charCodeAt(s++);56320==(64512&i)?t.push(((1023&n)<<10)+(1023&i)+65536):(t.push(n),s--)}else t.push(n)}return t}var N=function(e){return e-48<10?e-22:e-65<26?e-65:e-97<26?e-97:p},O=function(e,t){return e+22+75*(e<26)-((0!=t)<<5)},D=function(e,t,s){var r=0;for(e=s?C(e/g):e>>1,e+=C(e/t);e>E*f>>1;r+=p)e=C(e/E);return C(r+(E+1)*e/(e+y))},j=function(e){var t=[],s=e.length,r=0,n=b,i=v,o=e.lastIndexOf(w);o<0&&(o=0);for(var a=0;a<o;++a)e.charCodeAt(a)>=128&&x("not-basic"),t.push(e.charCodeAt(a));for(var c=o>0?o+1:0;c<s;){for(var l=r,d=1,u=p;;u+=p){c>=s&&x("invalid-input");var y=N(e.charCodeAt(c++));(y>=p||y>C((h-r)/d))&&x("overflow"),r+=y*d;var g=u<=i?m:u>=i+f?f:u-i;if(y<g)break;var _=p-g;d>C(h/_)&&x("overflow"),d*=_}var $=t.length+1;i=D(r-l,$,0==l),C(r/$)>h-n&&x("overflow"),n+=C(r/$),r%=$,t.splice(r++,0,n)}return String.fromCodePoint.apply(String,t)},A=function(e){var t=[],s=(e=T(e)).length,r=b,n=0,i=v,o=!0,a=!1,c=void 0;try{for(var l,d=e[Symbol.iterator]();!(o=(l=d.next()).done);o=!0){var u=l.value;u<128&&t.push(k(u))}}catch(K){a=!0,c=K}finally{try{!o&&d.return&&d.return()}finally{if(a)throw c}}var y=t.length,g=y;for(y&&t.push(w);g<s;){var _=h,$=!0,S=!1,P=void 0;try{for(var E,I=e[Symbol.iterator]();!($=(E=I.next()).done);$=!0){var R=E.value;R>=r&&R<_&&(_=R)}}catch(K){S=!0,P=K}finally{try{!$&&I.return&&I.return()}finally{if(S)throw P}}var N=g+1;_-r>C((h-n)/N)&&x("overflow"),n+=(_-r)*N,r=_;var j=!0,A=!1,M=void 0;try{for(var B,F=e[Symbol.iterator]();!(j=(B=F.next()).done);j=!0){var V=B.value;if(V<r&&++n>h&&x("overflow"),V==r){for(var L=n,W=p;;W+=p){var q=W<=i?m:W>=i+f?f:W-i;if(L<q)break;var U=L-q,z=p-q;t.push(k(O(q+U%z,0))),L=C(U/z)}t.push(k(O(L,0))),i=D(n,N,g==y),n=0,++g}}}catch(K){A=!0,M=K}finally{try{!j&&F.return&&F.return()}finally{if(A)throw M}}++n,++r}return t.join("")},M=function(e){return R(e,(function(e){return _.test(e)?j(e.slice(4).toLowerCase()):e}))},B=function(e){return R(e,(function(e){return $.test(e)?"xn--"+A(e):e}))},F={version:"2.1.0",ucs2:{decode:T,encode:function(e){return String.fromCodePoint.apply(String,u(e))}},decode:j,encode:A,toASCII:B,toUnicode:M},V={};function L(e){var t=e.charCodeAt(0);return t<16?"%0"+t.toString(16).toUpperCase():t<128?"%"+t.toString(16).toUpperCase():t<2048?"%"+(t>>6|192).toString(16).toUpperCase()+"%"+(63&t|128).toString(16).toUpperCase():"%"+(t>>12|224).toString(16).toUpperCase()+"%"+(t>>6&63|128).toString(16).toUpperCase()+"%"+(63&t|128).toString(16).toUpperCase()}function W(e){for(var t="",s=0,r=e.length;s<r;){var n=parseInt(e.substr(s+1,2),16);if(n<128)t+=String.fromCharCode(n),s+=3;else if(n>=194&&n<224){if(r-s>=6){var i=parseInt(e.substr(s+4,2),16);t+=String.fromCharCode((31&n)<<6|63&i)}else t+=e.substr(s,6);s+=6}else if(n>=224){if(r-s>=9){var o=parseInt(e.substr(s+4,2),16),a=parseInt(e.substr(s+7,2),16);t+=String.fromCharCode((15&n)<<12|(63&o)<<6|63&a)}else t+=e.substr(s,9);s+=9}else t+=e.substr(s,3),s+=3}return t}function q(e,t){function s(e){var s=W(e);return s.match(t.UNRESERVED)?s:e}return e.scheme&&(e.scheme=String(e.scheme).replace(t.PCT_ENCODED,s).toLowerCase().replace(t.NOT_SCHEME,"")),void 0!==e.userinfo&&(e.userinfo=String(e.userinfo).replace(t.PCT_ENCODED,s).replace(t.NOT_USERINFO,L).replace(t.PCT_ENCODED,n)),void 0!==e.host&&(e.host=String(e.host).replace(t.PCT_ENCODED,s).toLowerCase().replace(t.NOT_HOST,L).replace(t.PCT_ENCODED,n)),void 0!==e.path&&(e.path=String(e.path).replace(t.PCT_ENCODED,s).replace(e.scheme?t.NOT_PATH:t.NOT_PATH_NOSCHEME,L).replace(t.PCT_ENCODED,n)),void 0!==e.query&&(e.query=String(e.query).replace(t.PCT_ENCODED,s).replace(t.NOT_QUERY,L).replace(t.PCT_ENCODED,n)),void 0!==e.fragment&&(e.fragment=String(e.fragment).replace(t.PCT_ENCODED,s).replace(t.NOT_FRAGMENT,L).replace(t.PCT_ENCODED,n)),e}function U(e){return e.replace(/^0*(.*)/,"$1")||"0"}function z(e,t){var s=e.match(t.IPV4ADDRESS)||[],r=d(s,2)[1];return r?r.split(".").map(U).join("."):e}function K(e,t){var s=e.match(t.IPV6ADDRESS)||[],r=d(s,3),n=r[1],i=r[2];if(n){for(var o=n.toLowerCase().split("::").reverse(),a=d(o,2),c=a[0],l=a[1],u=l?l.split(":").map(U):[],h=c.split(":").map(U),p=t.IPV4ADDRESS.test(h[h.length-1]),m=p?7:8,f=h.length-m,y=Array(m),g=0;g<m;++g)y[g]=u[g]||h[f+g]||"";p&&(y[m-1]=z(y[m-1],t));var v=y.reduce((function(e,t,s){if(!t||"0"===t){var r=e[e.length-1];r&&r.index+r.length===s?r.length++:e.push({index:s,length:1})}return e}),[]).sort((function(e,t){return t.length-e.length}))[0],b=void 0;if(v&&v.length>1){var w=y.slice(0,v.index),_=y.slice(v.index+v.length);b=w.join(":")+"::"+_.join(":")}else b=y.join(":");return i&&(b+="%"+i),b}return e}var G=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,H=void 0==="".match(/(){0}/)[1];function J(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s={},r=!1!==t.iri?l:c;"suffix"===t.reference&&(e=(t.scheme?t.scheme+":":"")+"//"+e);var n=e.match(G);if(n){H?(s.scheme=n[1],s.userinfo=n[3],s.host=n[4],s.port=parseInt(n[5],10),s.path=n[6]||"",s.query=n[7],s.fragment=n[8],isNaN(s.port)&&(s.port=n[5])):(s.scheme=n[1]||void 0,s.userinfo=-1!==e.indexOf("@")?n[3]:void 0,s.host=-1!==e.indexOf("//")?n[4]:void 0,s.port=parseInt(n[5],10),s.path=n[6]||"",s.query=-1!==e.indexOf("?")?n[7]:void 0,s.fragment=-1!==e.indexOf("#")?n[8]:void 0,isNaN(s.port)&&(s.port=e.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?n[4]:void 0)),s.host&&(s.host=K(z(s.host,r),r)),void 0!==s.scheme||void 0!==s.userinfo||void 0!==s.host||void 0!==s.port||s.path||void 0!==s.query?void 0===s.scheme?s.reference="relative":void 0===s.fragment?s.reference="absolute":s.reference="uri":s.reference="same-document",t.reference&&"suffix"!==t.reference&&t.reference!==s.reference&&(s.error=s.error||"URI is not a "+t.reference+" reference.");var i=V[(t.scheme||s.scheme||"").toLowerCase()];if(t.unicodeSupport||i&&i.unicodeSupport)q(s,r);else{if(s.host&&(t.domainHost||i&&i.domainHost))try{s.host=F.toASCII(s.host.replace(r.PCT_ENCODED,W).toLowerCase())}catch(o){s.error=s.error||"Host's domain name can not be converted to ASCII via punycode: "+o}q(s,c)}i&&i.parse&&i.parse(s,t)}else s.error=s.error||"URI can not be parsed.";return s}function Q(e,t){var s=!1!==t.iri?l:c,r=[];return void 0!==e.userinfo&&(r.push(e.userinfo),r.push("@")),void 0!==e.host&&r.push(K(z(String(e.host),s),s).replace(s.IPV6ADDRESS,(function(e,t,s){return"["+t+(s?"%25"+s:"")+"]"}))),"number"!=typeof e.port&&"string"!=typeof e.port||(r.push(":"),r.push(String(e.port))),r.length?r.join(""):void 0}var Y=/^\.\.?\//,Z=/^\/\.(\/|$)/,X=/^\/\.\.(\/|$)/,ee=/^\/?(?:.|\n)*?(?=\/|$)/;function te(e){for(var t=[];e.length;)if(e.match(Y))e=e.replace(Y,"");else if(e.match(Z))e=e.replace(Z,"/");else if(e.match(X))e=e.replace(X,"/"),t.pop();else if("."===e||".."===e)e="";else{var s=e.match(ee);if(!s)throw new Error("Unexpected dot segment condition");var r=s[0];e=e.slice(r.length),t.push(r)}return t.join("")}function se(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=t.iri?l:c,r=[],n=V[(t.scheme||e.scheme||"").toLowerCase()];if(n&&n.serialize&&n.serialize(e,t),e.host)if(s.IPV6ADDRESS.test(e.host));else if(t.domainHost||n&&n.domainHost)try{e.host=t.iri?F.toUnicode(e.host):F.toASCII(e.host.replace(s.PCT_ENCODED,W).toLowerCase())}catch(a){e.error=e.error||"Host's domain name can not be converted to "+(t.iri?"Unicode":"ASCII")+" via punycode: "+a}q(e,s),"suffix"!==t.reference&&e.scheme&&(r.push(e.scheme),r.push(":"));var i=Q(e,t);if(void 0!==i&&("suffix"!==t.reference&&r.push("//"),r.push(i),e.path&&"/"!==e.path.charAt(0)&&r.push("/")),void 0!==e.path){var o=e.path;t.absolutePath||n&&n.absolutePath||(o=te(o)),void 0===i&&(o=o.replace(/^\/\//,"/%2F")),r.push(o)}return void 0!==e.query&&(r.push("?"),r.push(e.query)),void 0!==e.fragment&&(r.push("#"),r.push(e.fragment)),r.join("")}function re(e,t){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r={};return arguments[3]||(e=J(se(e,s),s),t=J(se(t,s),s)),!(s=s||{}).tolerant&&t.scheme?(r.scheme=t.scheme,r.userinfo=t.userinfo,r.host=t.host,r.port=t.port,r.path=te(t.path||""),r.query=t.query):(void 0!==t.userinfo||void 0!==t.host||void 0!==t.port?(r.userinfo=t.userinfo,r.host=t.host,r.port=t.port,r.path=te(t.path||""),r.query=t.query):(t.path?("/"===t.path.charAt(0)?r.path=te(t.path):(void 0===e.userinfo&&void 0===e.host&&void 0===e.port||e.path?e.path?r.path=e.path.slice(0,e.path.lastIndexOf("/")+1)+t.path:r.path=t.path:r.path="/"+t.path,r.path=te(r.path)),r.query=t.query):(r.path=e.path,void 0!==t.query?r.query=t.query:r.query=e.query),r.userinfo=e.userinfo,r.host=e.host,r.port=e.port),r.scheme=e.scheme),r.fragment=t.fragment,r}function ne(e,t,s){var r=o({scheme:"null"},s);return se(re(J(e,r),J(t,r),r,!0),r)}function ie(e,t){return"string"==typeof e?e=se(J(e,t),t):"object"===r(e)&&(e=J(se(e,t),t)),e}function oe(e,t,s){return"string"==typeof e?e=se(J(e,s),s):"object"===r(e)&&(e=se(e,s)),"string"==typeof t?t=se(J(t,s),s):"object"===r(t)&&(t=se(t,s)),e===t}function ae(e,t){return e&&e.toString().replace(t&&t.iri?l.ESCAPE:c.ESCAPE,L)}function ce(e,t){return e&&e.toString().replace(t&&t.iri?l.PCT_ENCODED:c.PCT_ENCODED,W)}var le={scheme:"http",domainHost:!0,parse:function(e,t){return e.host||(e.error=e.error||"HTTP URIs must have a host."),e},serialize:function(e,t){var s="https"===String(e.scheme).toLowerCase();return e.port!==(s?443:80)&&""!==e.port||(e.port=void 0),e.path||(e.path="/"),e}},de={scheme:"https",domainHost:le.domainHost,parse:le.parse,serialize:le.serialize};function ue(e){return"boolean"==typeof e.secure?e.secure:"wss"===String(e.scheme).toLowerCase()}var he={scheme:"ws",domainHost:!0,parse:function(e,t){var s=e;return s.secure=ue(s),s.resourceName=(s.path||"/")+(s.query?"?"+s.query:""),s.path=void 0,s.query=void 0,s},serialize:function(e,t){if(e.port!==(ue(e)?443:80)&&""!==e.port||(e.port=void 0),"boolean"==typeof e.secure&&(e.scheme=e.secure?"wss":"ws",e.secure=void 0),e.resourceName){var s=e.resourceName.split("?"),r=d(s,2),n=r[0],i=r[1];e.path=n&&"/"!==n?n:void 0,e.query=i,e.resourceName=void 0}return e.fragment=void 0,e}},pe={scheme:"wss",domainHost:he.domainHost,parse:he.parse,serialize:he.serialize},me={},fe="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",ye="[0-9A-Fa-f]",ge=s(s("%[EFef]"+ye+"%"+ye+ye+"%"+ye+ye)+"|"+s("%[89A-Fa-f]"+ye+"%"+ye+ye)+"|"+s("%"+ye+ye)),ve="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]",be=t("[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",'[\\"\\\\]'),we="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]",_e=new RegExp(fe,"g"),$e=new RegExp(ge,"g"),Se=new RegExp(t("[^]",ve,"[\\.]",'[\\"]',be),"g"),Pe=new RegExp(t("[^]",fe,we),"g"),Ee=Pe;function Ce(e){var t=W(e);return t.match(_e)?t:e}var ke={scheme:"mailto",parse:function(e,t){var s=e,r=s.to=s.path?s.path.split(","):[];if(s.path=void 0,s.query){for(var n=!1,i={},o=s.query.split("&"),a=0,c=o.length;a<c;++a){var l=o[a].split("=");switch(l[0]){case"to":for(var d=l[1].split(","),u=0,h=d.length;u<h;++u)r.push(d[u]);break;case"subject":s.subject=ce(l[1],t);break;case"body":s.body=ce(l[1],t);break;default:n=!0,i[ce(l[0],t)]=ce(l[1],t)}}n&&(s.headers=i)}s.query=void 0;for(var p=0,m=r.length;p<m;++p){var f=r[p].split("@");if(f[0]=ce(f[0]),t.unicodeSupport)f[1]=ce(f[1],t).toLowerCase();else try{f[1]=F.toASCII(ce(f[1],t).toLowerCase())}catch(y){s.error=s.error||"Email address's domain name can not be converted to ASCII via punycode: "+y}r[p]=f.join("@")}return s},serialize:function(e,t){var s=e,r=i(e.to);if(r){for(var o=0,a=r.length;o<a;++o){var c=String(r[o]),l=c.lastIndexOf("@"),d=c.slice(0,l).replace($e,Ce).replace($e,n).replace(Se,L),u=c.slice(l+1);try{u=t.iri?F.toUnicode(u):F.toASCII(ce(u,t).toLowerCase())}catch(f){s.error=s.error||"Email address's domain name can not be converted to "+(t.iri?"Unicode":"ASCII")+" via punycode: "+f}r[o]=d+"@"+u}s.path=r.join(",")}var h=e.headers=e.headers||{};e.subject&&(h.subject=e.subject),e.body&&(h.body=e.body);var p=[];for(var m in h)h[m]!==me[m]&&p.push(m.replace($e,Ce).replace($e,n).replace(Pe,L)+"="+h[m].replace($e,Ce).replace($e,n).replace(Ee,L));return p.length&&(s.query=p.join("&")),s}},xe=/^([^\:]+)\:(.*)/,Ie={scheme:"urn",parse:function(e,t){var s=e.path&&e.path.match(xe),r=e;if(s){var n=t.scheme||r.scheme||"urn",i=s[1].toLowerCase(),o=s[2],a=n+":"+(t.nid||i),c=V[a];r.nid=i,r.nss=o,r.path=void 0,c&&(r=c.parse(r,t))}else r.error=r.error||"URN can not be parsed.";return r},serialize:function(e,t){var s=t.scheme||e.scheme||"urn",r=e.nid,n=s+":"+(t.nid||r),i=V[n];i&&(e=i.serialize(e,t));var o=e,a=e.nss;return o.path=(r||t.nid)+":"+a,o}},Re=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,Te={scheme:"urn:uuid",parse:function(e,t){var s=e;return s.uuid=s.nss,s.nss=void 0,t.tolerant||s.uuid&&s.uuid.match(Re)||(s.error=s.error||"UUID is not valid."),s},serialize:function(e,t){var s=e;return s.nss=(e.uuid||"").toLowerCase(),s}};V[le.scheme]=le,V[de.scheme]=de,V[he.scheme]=he,V[pe.scheme]=pe,V[ke.scheme]=ke,V[Ie.scheme]=Ie,V[Te.scheme]=Te,e.SCHEMES=V,e.pctEncChar=L,e.pctDecChars=W,e.parse=J,e.removeDotSegments=te,e.serialize=se,e.resolveComponents=re,e.resolve=ne,e.normalize=ie,e.equal=oe,e.escapeComponent=ae,e.unescapeComponent=ce,Object.defineProperty(e,"__esModule",{value:!0})}(Bs),Object.defineProperty(Ms,"__esModule",{value:!0});const Fs=Bs;Fs.code='require("ajv/dist/runtime/uri").default',Ms.default=Fs,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=void 0;var t=Ne;Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return t.KeywordCxt}});var s=je;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return s._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return s.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return s.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return s.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return s.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return s.CodeGen}});const r=ys,n=vs,i=He,o=_s,l=je,u=St,h=Ge,p=Be,m=As,f=Ms,y=(e,t)=>new RegExp(e,t);y.code="new RegExp";const g=["removeAdditional","useDefaults","coerceTypes"],v=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),b={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},w={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},_=200;class ${constructor(e={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,e=this.opts=a(a({},e),function(e){var t,s,r,n,i,o,l,d,u,h,p,m,g,v,b,w,$,S,P,E,C,k,x,I,R;const T=e.strict,N=null===(t=e.code)||void 0===t?void 0:t.optimize,O=!0===N||void 0===N?1:N||0,D=null!==(r=null===(s=e.code)||void 0===s?void 0:s.regExp)&&void 0!==r?r:y,j=null!==(n=e.uriResolver)&&void 0!==n?n:f.default;return{strictSchema:null===(o=null!==(i=e.strictSchema)&&void 0!==i?i:T)||void 0===o||o,strictNumbers:null===(d=null!==(l=e.strictNumbers)&&void 0!==l?l:T)||void 0===d||d,strictTypes:null!==(h=null!==(u=e.strictTypes)&&void 0!==u?u:T)&&void 0!==h?h:"log",strictTuples:null!==(m=null!==(p=e.strictTuples)&&void 0!==p?p:T)&&void 0!==m?m:"log",strictRequired:null!==(v=null!==(g=e.strictRequired)&&void 0!==g?g:T)&&void 0!==v&&v,code:e.code?c(a({},e.code),{optimize:O,regExp:D}):{optimize:O,regExp:D},loopRequired:null!==(b=e.loopRequired)&&void 0!==b?b:_,loopEnum:null!==(w=e.loopEnum)&&void 0!==w?w:_,meta:null===($=e.meta)||void 0===$||$,messages:null===(S=e.messages)||void 0===S||S,inlineRefs:null===(P=e.inlineRefs)||void 0===P||P,schemaId:null!==(E=e.schemaId)&&void 0!==E?E:"$id",addUsedSchema:null===(C=e.addUsedSchema)||void 0===C||C,validateSchema:null===(k=e.validateSchema)||void 0===k||k,validateFormats:null===(x=e.validateFormats)||void 0===x||x,unicodeRegExp:null===(I=e.unicodeRegExp)||void 0===I||I,int32range:null===(R=e.int32range)||void 0===R||R,uriResolver:j}}(e));const{es5:t,lines:s}=this.opts.code;this.scope=new l.ValueScope({scope:{},prefixes:v,es5:t,lines:s}),this.logger=function(e){if(!1===e)return I;if(void 0===e)return console;if(e.log&&e.warn&&e.error)return e;throw new Error("logger must implement log, warn and error methods")}(e.logger);const r=e.validateFormats;e.validateFormats=!1,this.RULES=(0,i.getRules)(),S.call(this,b,e,"NOT SUPPORTED"),S.call(this,w,e,"DEPRECATED","warn"),this._metaOpts=x.call(this),e.formats&&C.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),e.keywords&&k.call(this,e.keywords),"object"==typeof e.meta&&this.addMetaSchema(e.meta),E.call(this),e.validateFormats=r}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:e,meta:t,schemaId:s}=this.opts;let r=m;"id"===s&&(r=a({},m),r.id=r.$id,delete r.$id),t&&e&&this.addMetaSchema(r,r[s],!1)}defaultMeta(){const{meta:e,schemaId:t}=this.opts;return this.opts.defaultMeta="object"==typeof e?e[t]||e:void 0}validate(e,t){let s;if("string"==typeof e){if(s=this.getSchema(e),!s)throw new Error(`no schema with key or ref "${e}"`)}else s=this.compile(e);const r=s(t);return"$async"in s||(this.errors=s.errors),r}compile(e,t){const s=this._addSchema(e,t);return s.validate||this._compileSchemaEnv(s)}compileAsync(e,t){if("function"!=typeof this.opts.loadSchema)throw new Error("options.loadSchema should be a function");const{loadSchema:s}=this.opts;return r.call(this,e,t);function r(e,t){return d(this,null,(function*(){yield i.call(this,e.$schema);const s=this._addSchema(e,t);return s.validate||o.call(this,s)}))}function i(e){return d(this,null,(function*(){e&&!this.getSchema(e)&&(yield r.call(this,{$ref:e},!0))}))}function o(e){return d(this,null,(function*(){try{return this._compileSchemaEnv(e)}catch(t){if(!(t instanceof n.default))throw t;return a.call(this,t),yield c.call(this,t.missingSchema),o.call(this,e)}}))}function a({missingSchema:e,missingRef:t}){if(this.refs[e])throw new Error(`AnySchema ${e} is loaded but ${t} cannot be resolved`)}function c(e){return d(this,null,(function*(){const s=yield l.call(this,e);this.refs[e]||(yield i.call(this,s.$schema)),this.refs[e]||this.addSchema(s,e,t)}))}function l(e){return d(this,null,(function*(){const t=this._loading[e];if(t)return t;try{return yield this._loading[e]=s(e)}finally{delete this._loading[e]}}))}}addSchema(e,t,s,r=this.opts.validateSchema){if(Array.isArray(e)){for(const t of e)this.addSchema(t,void 0,s,r);return this}let n;if("object"==typeof e){const{schemaId:t}=this.opts;if(n=e[t],void 0!==n&&"string"!=typeof n)throw new Error(`schema ${t} must be string`)}return t=(0,u.normalizeId)(t||n),this._checkUnique(t),this.schemas[t]=this._addSchema(e,s,t,r,!0),this}addMetaSchema(e,t,s=this.opts.validateSchema){return this.addSchema(e,t,!0,s),this}validateSchema(e,t){if("boolean"==typeof e)return!0;let s;if(s=e.$schema,void 0!==s&&"string"!=typeof s)throw new Error("$schema must be a string");if(s=s||this.opts.defaultMeta||this.defaultMeta(),!s)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const r=this.validate(s,e);if(!r&&t){const e="schema is invalid: "+this.errorsText();if("log"!==this.opts.validateSchema)throw new Error(e);this.logger.error(e)}return r}getSchema(e){let t;for(;"string"==typeof(t=P.call(this,e));)e=t;if(void 0===t){const{schemaId:s}=this.opts,r=new o.SchemaEnv({schema:{},schemaId:s});if(t=o.resolveSchema.call(this,r,e),!t)return;this.refs[e]=t}return t.validate||this._compileSchemaEnv(t)}removeSchema(e){if(e instanceof RegExp)return this._removeAllSchemas(this.schemas,e),this._removeAllSchemas(this.refs,e),this;switch(typeof e){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const t=P.call(this,e);return"object"==typeof t&&this._cache.delete(t.schema),delete this.schemas[e],delete this.refs[e],this}case"object":{const t=e;this._cache.delete(t);let s=e[this.opts.schemaId];return s&&(s=(0,u.normalizeId)(s),delete this.schemas[s],delete this.refs[s]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(e){for(const t of e)this.addKeyword(t);return this}addKeyword(e,t){let s;if("string"==typeof e)s=e,"object"==typeof t&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),t.keyword=s);else{if("object"!=typeof e||void 0!==t)throw new Error("invalid addKeywords parameters");if(s=(t=e).keyword,Array.isArray(s)&&!s.length)throw new Error("addKeywords: keyword must be string or non-empty array")}if(T.call(this,s,t),!t)return(0,p.eachItem)(s,(e=>N.call(this,e))),this;D.call(this,t);const r=c(a({},t),{type:(0,h.getJSONTypes)(t.type),schemaType:(0,h.getJSONTypes)(t.schemaType)});return(0,p.eachItem)(s,0===r.type.length?e=>N.call(this,e,r):e=>r.type.forEach((t=>N.call(this,e,r,t)))),this}getKeyword(e){const t=this.RULES.all[e];return"object"==typeof t?t.definition:!!t}removeKeyword(e){const{RULES:t}=this;delete t.keywords[e],delete t.all[e];for(const s of t.rules){const t=s.rules.findIndex((t=>t.keyword===e));t>=0&&s.rules.splice(t,1)}return this}addFormat(e,t){return"string"==typeof t&&(t=new RegExp(t)),this.formats[e]=t,this}errorsText(e=this.errors,{separator:t=", ",dataVar:s="data"}={}){return e&&0!==e.length?e.map((e=>`${s}${e.instancePath} ${e.message}`)).reduce(((e,s)=>e+t+s)):"No errors"}$dataMetaSchema(e,t){const s=this.RULES.all;e=JSON.parse(JSON.stringify(e));for(const r of t){const t=r.split("/").slice(1);let n=e;for(const e of t)n=n[e];for(const e in s){const t=s[e];if("object"!=typeof t)continue;const{$data:r}=t.definition,i=n[e];r&&i&&(n[e]=A(i))}}return e}_removeAllSchemas(e,t){for(const s in e){const r=e[s];t&&!t.test(s)||("string"==typeof r?delete e[s]:r&&!r.meta&&(this._cache.delete(r.schema),delete e[s]))}}_addSchema(e,t,s,r=this.opts.validateSchema,n=this.opts.addUsedSchema){let i;const{schemaId:a}=this.opts;if("object"==typeof e)i=e[a];else{if(this.opts.jtd)throw new Error("schema must be object");if("boolean"!=typeof e)throw new Error("schema must be object or boolean")}let c=this._cache.get(e);if(void 0!==c)return c;s=(0,u.normalizeId)(i||s);const l=u.getSchemaRefs.call(this,e,s);return c=new o.SchemaEnv({schema:e,schemaId:a,meta:t,baseId:s,localRefs:l}),this._cache.set(c.schema,c),n&&!s.startsWith("#")&&(s&&this._checkUnique(s),this.refs[s]=c),r&&this.validateSchema(e,!0),c}_checkUnique(e){if(this.schemas[e]||this.refs[e])throw new Error(`schema with key or id "${e}" already exists`)}_compileSchemaEnv(e){if(e.meta?this._compileMetaSchema(e):o.compileSchema.call(this,e),!e.validate)throw new Error("ajv implementation error");return e.validate}_compileMetaSchema(e){const t=this.opts;this.opts=this._metaOpts;try{o.compileSchema.call(this,e)}finally{this.opts=t}}}function S(e,t,s,r="error"){for(const n in e){const i=n;i in t&&this.logger[r](`${s}: option ${n}. ${e[i]}`)}}function P(e){return e=(0,u.normalizeId)(e),this.schemas[e]||this.refs[e]}function E(){const e=this.opts.schemas;if(e)if(Array.isArray(e))this.addSchema(e);else for(const t in e)this.addSchema(e[t],t)}function C(){for(const e in this.opts.formats){const t=this.opts.formats[e];t&&this.addFormat(e,t)}}function k(e){if(Array.isArray(e))this.addVocabulary(e);else{this.logger.warn("keywords option as map is deprecated, pass array");for(const t in e){const s=e[t];s.keyword||(s.keyword=t),this.addKeyword(s)}}}function x(){const e=a({},this.opts);for(const t of g)delete e[t];return e}e.default=$,$.ValidationError=r.default,$.MissingRefError=n.default;const I={log(){},warn(){},error(){}};const R=/^[a-z_$][a-z0-9_$:-]*$/i;function T(e,t){const{RULES:s}=this;if((0,p.eachItem)(e,(e=>{if(s.keywords[e])throw new Error(`Keyword ${e} is already defined`);if(!R.test(e))throw new Error(`Keyword ${e} has invalid name`)})),t&&t.$data&&!("code"in t)&&!("validate"in t))throw new Error('$data keyword must have "code" or "validate" function')}function N(e,t,s){var r;const n=null==t?void 0:t.post;if(s&&n)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:i}=this;let o=n?i.post:i.rules.find((({type:e})=>e===s));if(o||(o={type:s,rules:[]},i.rules.push(o)),i.keywords[e]=!0,!t)return;const l={keyword:e,definition:c(a({},t),{type:(0,h.getJSONTypes)(t.type),schemaType:(0,h.getJSONTypes)(t.schemaType)})};t.before?O.call(this,o,l,t.before):o.rules.push(l),i.all[e]=l,null===(r=t.implements)||void 0===r||r.forEach((e=>this.addKeyword(e)))}function O(e,t,s){const r=e.rules.findIndex((e=>e.keyword===s));r>=0?e.rules.splice(r,0,t):(e.rules.push(t),this.logger.warn(`rule ${s} is not defined`))}function D(e){let{metaSchema:t}=e;void 0!==t&&(e.$data&&this.opts.$data&&(t=A(t)),e.validateSchema=this.compile(t,!0))}const j={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function A(e){return{anyOf:[e,j]}}}(Te);var Vs={},Ls={},Ws={};Object.defineProperty(Ws,"__esModule",{value:!0});const qs={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};Ws.default=qs;var Us={};Object.defineProperty(Us,"__esModule",{value:!0}),Us.callRef=Us.getValidate=void 0;const zs=vs,Ks=nt,Gs=je,Hs=Fe,Js=_s,Qs=Be,Ys={keyword:"$ref",schemaType:"string",code(e){const{gen:t,schema:s,it:r}=e,{baseId:n,schemaEnv:i,validateName:o,opts:a,self:c}=r,{root:l}=i;if(("#"===s||"#/"===s)&&n===l.baseId)return function(){if(i===l)return Xs(e,o,i,i.$async);const s=t.scopeValue("root",{ref:l});return Xs(e,Gs._`${s}.validate`,l,l.$async)}();const d=Js.resolveRef.call(c,l,n,s);if(void 0===d)throw new zs.default(r.opts.uriResolver,n,s);return d instanceof Js.SchemaEnv?function(t){const s=Zs(e,t);Xs(e,s,t,t.$async)}(d):function(r){const n=t.scopeValue("schema",!0===a.code.source?{ref:r,code:(0,Gs.stringify)(r)}:{ref:r}),i=t.name("valid"),o=e.subschema({schema:r,dataTypes:[],schemaPath:Gs.nil,topSchemaRef:n,errSchemaPath:s},i);e.mergeEvaluated(o),e.ok(i)}(d)}};function Zs(e,t){const{gen:s}=e;return t.validate?s.scopeValue("validate",{ref:t.validate}):Gs._`${s.scopeValue("wrapper",{ref:t})}.validate`}function Xs(e,t,s,r){const{gen:n,it:i}=e,{allErrors:o,schemaEnv:a,opts:c}=i,l=c.passContext?Hs.default.this:Gs.nil;function d(e){const t=Gs._`${e}.errors`;n.assign(Hs.default.vErrors,Gs._`${Hs.default.vErrors} === null ? ${t} : ${Hs.default.vErrors}.concat(${t})`),n.assign(Hs.default.errors,Gs._`${Hs.default.vErrors}.length`)}function u(e){var t;if(!i.opts.unevaluated)return;const r=null===(t=null==s?void 0:s.validate)||void 0===t?void 0:t.evaluated;if(!0!==i.props)if(r&&!r.dynamicProps)void 0!==r.props&&(i.props=Qs.mergeEvaluated.props(n,r.props,i.props));else{const t=n.var("props",Gs._`${e}.evaluated.props`);i.props=Qs.mergeEvaluated.props(n,t,i.props,Gs.Name)}if(!0!==i.items)if(r&&!r.dynamicItems)void 0!==r.items&&(i.items=Qs.mergeEvaluated.items(n,r.items,i.items));else{const t=n.var("items",Gs._`${e}.evaluated.items`);i.items=Qs.mergeEvaluated.items(n,t,i.items,Gs.Name)}}r?function(){if(!a.$async)throw new Error("async schema referenced by sync schema");const s=n.let("valid");n.try((()=>{n.code(Gs._`await ${(0,Ks.callValidateCode)(e,t,l)}`),u(t),o||n.assign(s,!0)}),(e=>{n.if(Gs._`!(${e} instanceof ${i.ValidationError})`,(()=>n.throw(e))),d(e),o||n.assign(s,!1)})),e.ok(s)}():e.result((0,Ks.callValidateCode)(e,t,l),(()=>u(t)),(()=>d(t)))}Us.getValidate=Zs,Us.callRef=Xs,Us.default=Ys,Object.defineProperty(Ls,"__esModule",{value:!0});const er=Us,tr=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",Ws.default,er.default];Ls.default=tr;var sr={},rr={};Object.defineProperty(rr,"__esModule",{value:!0});const nr=je,ir=nr.operators,or={maximum:{okStr:"<=",ok:ir.LTE,fail:ir.GT},minimum:{okStr:">=",ok:ir.GTE,fail:ir.LT},exclusiveMaximum:{okStr:"<",ok:ir.LT,fail:ir.GTE},exclusiveMinimum:{okStr:">",ok:ir.GT,fail:ir.LTE}},ar={message:({keyword:e,schemaCode:t})=>nr.str`must be ${or[e].okStr} ${t}`,params:({keyword:e,schemaCode:t})=>nr._`{comparison: ${or[e].okStr}, limit: ${t}}`},cr={keyword:Object.keys(or),type:"number",schemaType:"number",$data:!0,error:ar,code(e){const{keyword:t,data:s,schemaCode:r}=e;e.fail$data(nr._`${s} ${or[t].fail} ${r} || isNaN(${s})`)}};rr.default=cr;var lr={};Object.defineProperty(lr,"__esModule",{value:!0});const dr=je,ur={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:{message:({schemaCode:e})=>dr.str`must be multiple of ${e}`,params:({schemaCode:e})=>dr._`{multipleOf: ${e}}`},code(e){const{gen:t,data:s,schemaCode:r,it:n}=e,i=n.opts.multipleOfPrecision,o=t.let("res"),a=i?dr._`Math.abs(Math.round(${o}) - ${o}) > 1e-${i}`:dr._`${o} !== parseInt(${o})`;e.fail$data(dr._`(${r} === 0 || (${o} = ${s}/${r}, ${a}))`)}};lr.default=ur;var hr={},pr={};function mr(e){const t=e.length;let s,r=0,n=0;for(;n<t;)r++,s=e.charCodeAt(n++),s>=55296&&s<=56319&&n<t&&(s=e.charCodeAt(n),56320==(64512&s)&&n++);return r}Object.defineProperty(pr,"__esModule",{value:!0}),pr.default=mr,mr.code='require("ajv/dist/runtime/ucs2length").default',Object.defineProperty(hr,"__esModule",{value:!0});const fr=je,yr=Be,gr=pr,vr={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:{message:({keyword:e,schemaCode:t})=>fr.str`must NOT have ${"maxLength"===e?"more":"fewer"} than ${t} characters`,params:({schemaCode:e})=>fr._`{limit: ${e}}`},code(e){const{keyword:t,data:s,schemaCode:r,it:n}=e,i="maxLength"===t?fr.operators.GT:fr.operators.LT,o=!1===n.opts.unicode?fr._`${s}.length`:fr._`${(0,yr.useFunc)(e.gen,gr.default)}(${s})`;e.fail$data(fr._`${o} ${i} ${r}`)}};hr.default=vr;var br={};Object.defineProperty(br,"__esModule",{value:!0});const wr=nt,_r=je,$r={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:{message:({schemaCode:e})=>_r.str`must match pattern "${e}"`,params:({schemaCode:e})=>_r._`{pattern: ${e}}`},code(e){const{data:t,$data:s,schema:r,schemaCode:n,it:i}=e,o=i.opts.unicodeRegExp?"u":"",a=s?_r._`(new RegExp(${n}, ${o}))`:(0,wr.usePattern)(e,r);e.fail$data(_r._`!${a}.test(${t})`)}};br.default=$r;var Sr={};Object.defineProperty(Sr,"__esModule",{value:!0});const Pr=je,Er={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:{message:({keyword:e,schemaCode:t})=>Pr.str`must NOT have ${"maxProperties"===e?"more":"fewer"} than ${t} properties`,params:({schemaCode:e})=>Pr._`{limit: ${e}}`},code(e){const{keyword:t,data:s,schemaCode:r}=e,n="maxProperties"===t?Pr.operators.GT:Pr.operators.LT;e.fail$data(Pr._`Object.keys(${s}).length ${n} ${r}`)}};Sr.default=Er;var Cr={};Object.defineProperty(Cr,"__esModule",{value:!0});const kr=nt,xr=je,Ir=Be,Rr={keyword:"required",type:"object",schemaType:"array",$data:!0,error:{message:({params:{missingProperty:e}})=>xr.str`must have required property '${e}'`,params:({params:{missingProperty:e}})=>xr._`{missingProperty: ${e}}`},code(e){const{gen:t,schema:s,schemaCode:r,data:n,$data:i,it:o}=e,{opts:a}=o;if(!i&&0===s.length)return;const c=s.length>=a.loopRequired;if(o.allErrors?function(){if(c||i)e.block$data(xr.nil,l);else for(const t of s)(0,kr.checkReportMissingProp)(e,t)}():function(){const o=t.let("missing");if(c||i){const s=t.let("valid",!0);e.block$data(s,(()=>function(s,i){e.setParams({missingProperty:s}),t.forOf(s,r,(()=>{t.assign(i,(0,kr.propertyInData)(t,n,s,a.ownProperties)),t.if((0,xr.not)(i),(()=>{e.error(),t.break()}))}),xr.nil)}(o,s))),e.ok(s)}else t.if((0,kr.checkMissingProp)(e,s,o)),(0,kr.reportMissingProp)(e,o),t.else()}(),a.strictRequired){const t=e.parentSchema.properties,{definedProperties:r}=e.it;for(const e of s)if(void 0===(null==t?void 0:t[e])&&!r.has(e)){const t=o.schemaEnv.baseId+o.errSchemaPath;(0,Ir.checkStrictMode)(o,`required property "${e}" is not defined at "${t}" (strictRequired)`,o.opts.strictRequired)}}function l(){t.forOf("prop",r,(s=>{e.setParams({missingProperty:s}),t.if((0,kr.noPropertyInData)(t,n,s,a.ownProperties),(()=>e.error()))}))}}};Cr.default=Rr;var Tr={};Object.defineProperty(Tr,"__esModule",{value:!0});const Nr=je,Or={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:{message:({keyword:e,schemaCode:t})=>Nr.str`must NOT have ${"maxItems"===e?"more":"fewer"} than ${t} items`,params:({schemaCode:e})=>Nr._`{limit: ${e}}`},code(e){const{keyword:t,data:s,schemaCode:r}=e,n="maxItems"===t?Nr.operators.GT:Nr.operators.LT;e.fail$data(Nr._`${s}.length ${n} ${r}`)}};Tr.default=Or;var Dr={},jr={};Object.defineProperty(jr,"__esModule",{value:!0});const Ar=Pt;Ar.code='require("ajv/dist/runtime/equal").default',jr.default=Ar,Object.defineProperty(Dr,"__esModule",{value:!0});const Mr=Ge,Br=je,Fr=Be,Vr=jr,Lr={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:{message:({params:{i:e,j:t}})=>Br.str`must NOT have duplicate items (items ## ${t} and ${e} are identical)`,params:({params:{i:e,j:t}})=>Br._`{i: ${e}, j: ${t}}`},code(e){const{gen:t,data:s,$data:r,schema:n,parentSchema:i,schemaCode:o,it:a}=e;if(!r&&!n)return;const c=t.let("valid"),l=i.items?(0,Mr.getSchemaTypes)(i.items):[];function d(r,n){const i=t.name("item"),o=(0,Mr.checkDataTypes)(l,i,a.opts.strictNumbers,Mr.DataType.Wrong),d=t.const("indices",Br._`{}`);t.for(Br._`;${r}--;`,(()=>{t.let(i,Br._`${s}[${r}]`),t.if(o,Br._`continue`),l.length>1&&t.if(Br._`typeof ${i} == "string"`,Br._`${i} += "_"`),t.if(Br._`typeof ${d}[${i}] == "number"`,(()=>{t.assign(n,Br._`${d}[${i}]`),e.error(),t.assign(c,!1).break()})).code(Br._`${d}[${i}] = ${r}`)}))}function u(r,n){const i=(0,Fr.useFunc)(t,Vr.default),o=t.name("outer");t.label(o).for(Br._`;${r}--;`,(()=>t.for(Br._`${n} = ${r}; ${n}--;`,(()=>t.if(Br._`${i}(${s}[${r}], ${s}[${n}])`,(()=>{e.error(),t.assign(c,!1).break(o)}))))))}e.block$data(c,(function(){const r=t.let("i",Br._`${s}.length`),n=t.let("j");e.setParams({i:r,j:n}),t.assign(c,!0),t.if(Br._`${r} > 1`,(()=>(l.length>0&&!l.some((e=>"object"===e||"array"===e))?d:u)(r,n)))}),Br._`${o} === false`),e.ok(c)}};Dr.default=Lr;var Wr={};Object.defineProperty(Wr,"__esModule",{value:!0});const qr=je,Ur=Be,zr=jr,Kr={keyword:"const",$data:!0,error:{message:"must be equal to constant",params:({schemaCode:e})=>qr._`{allowedValue: ${e}}`},code(e){const{gen:t,data:s,$data:r,schemaCode:n,schema:i}=e;r||i&&"object"==typeof i?e.fail$data(qr._`!${(0,Ur.useFunc)(t,zr.default)}(${s}, ${n})`):e.fail(qr._`${i} !== ${s}`)}};Wr.default=Kr;var Gr={};Object.defineProperty(Gr,"__esModule",{value:!0});const Hr=je,Jr=Be,Qr=jr,Yr={keyword:"enum",schemaType:"array",$data:!0,error:{message:"must be equal to one of the allowed values",params:({schemaCode:e})=>Hr._`{allowedValues: ${e}}`},code(e){const{gen:t,data:s,$data:r,schema:n,schemaCode:i,it:o}=e;if(!r&&0===n.length)throw new Error("enum must have non-empty array");const a=n.length>=o.opts.loopEnum;let c;const l=()=>null!=c?c:c=(0,Jr.useFunc)(t,Qr.default);let d;if(a||r)d=t.let("valid"),e.block$data(d,(function(){t.assign(d,!1),t.forOf("v",i,(e=>t.if(Hr._`${l()}(${s}, ${e})`,(()=>t.assign(d,!0).break()))))}));else{if(!Array.isArray(n))throw new Error("ajv implementation error");const e=t.const("vSchema",i);d=(0,Hr.or)(...n.map(((t,r)=>function(e,t){const r=n[t];return"object"==typeof r&&null!==r?Hr._`${l()}(${s}, ${e}[${t}])`:Hr._`${s} === ${r}`}(e,r))))}e.pass(d)}};Gr.default=Yr,Object.defineProperty(sr,"__esModule",{value:!0});const Zr=lr,Xr=hr,en=br,tn=Sr,sn=Cr,rn=Tr,nn=Dr,on=Wr,an=Gr,cn=[rr.default,Zr.default,Xr.default,en.default,tn.default,sn.default,rn.default,nn.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},on.default,an.default];sr.default=cn;var ln={},dn={};Object.defineProperty(dn,"__esModule",{value:!0}),dn.validateAdditionalItems=void 0;const un=je,hn=Be,pn={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:{message:({params:{len:e}})=>un.str`must NOT have more than ${e} items`,params:({params:{len:e}})=>un._`{limit: ${e}}`},code(e){const{parentSchema:t,it:s}=e,{items:r}=t;Array.isArray(r)?mn(e,r):(0,hn.checkStrictMode)(s,'"additionalItems" is ignored when "items" is not an array of schemas')}};function mn(e,t){const{gen:s,schema:r,data:n,keyword:i,it:o}=e;o.items=!0;const a=s.const("len",un._`${n}.length`);if(!1===r)e.setParams({len:t.length}),e.pass(un._`${a} <= ${t.length}`);else if("object"==typeof r&&!(0,hn.alwaysValidSchema)(o,r)){const r=s.var("valid",un._`${a} <= ${t.length}`);s.if((0,un.not)(r),(()=>function(r){s.forRange("i",t.length,a,(t=>{e.subschema({keyword:i,dataProp:t,dataPropType:hn.Type.Num},r),o.allErrors||s.if((0,un.not)(r),(()=>s.break()))}))}(r))),e.ok(r)}}dn.validateAdditionalItems=mn,dn.default=pn;var fn={},yn={};Object.defineProperty(yn,"__esModule",{value:!0}),yn.validateTuple=void 0;const gn=je,vn=Be,bn=nt,wn={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(e){const{schema:t,it:s}=e;if(Array.isArray(t))return _n(e,"additionalItems",t);s.items=!0,(0,vn.alwaysValidSchema)(s,t)||e.ok((0,bn.validateArray)(e))}};function _n(e,t,s=e.schema){const{gen:r,parentSchema:n,data:i,keyword:o,it:a}=e;!function(e){const{opts:r,errSchemaPath:n}=a,i=s.length,c=i===e.minItems&&(i===e.maxItems||!1===e[t]);if(r.strictTuples&&!c){const e=`"${o}" is ${i}-tuple, but minItems or maxItems/${t} are not specified or different at path "${n}"`;(0,vn.checkStrictMode)(a,e,r.strictTuples)}}(n),a.opts.unevaluated&&s.length&&!0!==a.items&&(a.items=vn.mergeEvaluated.items(r,s.length,a.items));const c=r.name("valid"),l=r.const("len",gn._`${i}.length`);s.forEach(((t,s)=>{(0,vn.alwaysValidSchema)(a,t)||(r.if(gn._`${l} > ${s}`,(()=>e.subschema({keyword:o,schemaProp:s,dataProp:s},c))),e.ok(c))}))}yn.validateTuple=_n,yn.default=wn,Object.defineProperty(fn,"__esModule",{value:!0});const $n=yn,Sn={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:e=>(0,$n.validateTuple)(e,"items")};fn.default=Sn;var Pn={};Object.defineProperty(Pn,"__esModule",{value:!0});const En=je,Cn=Be,kn=nt,xn=dn,In={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:{message:({params:{len:e}})=>En.str`must NOT have more than ${e} items`,params:({params:{len:e}})=>En._`{limit: ${e}}`},code(e){const{schema:t,parentSchema:s,it:r}=e,{prefixItems:n}=s;r.items=!0,(0,Cn.alwaysValidSchema)(r,t)||(n?(0,xn.validateAdditionalItems)(e,n):e.ok((0,kn.validateArray)(e)))}};Pn.default=In;var Rn={};Object.defineProperty(Rn,"__esModule",{value:!0});const Tn=je,Nn=Be,On={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:{message:({params:{min:e,max:t}})=>void 0===t?Tn.str`must contain at least ${e} valid item(s)`:Tn.str`must contain at least ${e} and no more than ${t} valid item(s)`,params:({params:{min:e,max:t}})=>void 0===t?Tn._`{minContains: ${e}}`:Tn._`{minContains: ${e}, maxContains: ${t}}`},code(e){const{gen:t,schema:s,parentSchema:r,data:n,it:i}=e;let o,a;const{minContains:c,maxContains:l}=r;i.opts.next?(o=void 0===c?1:c,a=l):o=1;const d=t.const("len",Tn._`${n}.length`);if(e.setParams({min:o,max:a}),void 0===a&&0===o)return void(0,Nn.checkStrictMode)(i,'"minContains" == 0 without "maxContains": "contains" keyword ignored');if(void 0!==a&&o>a)return(0,Nn.checkStrictMode)(i,'"minContains" > "maxContains" is always invalid'),void e.fail();if((0,Nn.alwaysValidSchema)(i,s)){let t=Tn._`${d} >= ${o}`;return void 0!==a&&(t=Tn._`${t} && ${d} <= ${a}`),void e.pass(t)}i.items=!0;const u=t.name("valid");function h(){const e=t.name("_valid"),s=t.let("count",0);p(e,(()=>t.if(e,(()=>function(e){t.code(Tn._`${e}++`),void 0===a?t.if(Tn._`${e} >= ${o}`,(()=>t.assign(u,!0).break())):(t.if(Tn._`${e} > ${a}`,(()=>t.assign(u,!1).break())),1===o?t.assign(u,!0):t.if(Tn._`${e} >= ${o}`,(()=>t.assign(u,!0))))}(s)))))}function p(s,r){t.forRange("i",0,d,(t=>{e.subschema({keyword:"contains",dataProp:t,dataPropType:Nn.Type.Num,compositeRule:!0},s),r()}))}void 0===a&&1===o?p(u,(()=>t.if(u,(()=>t.break())))):0===o?(t.let(u,!0),void 0!==a&&t.if(Tn._`${n}.length > 0`,h)):(t.let(u,!1),h()),e.result(u,(()=>e.reset()))}};Rn.default=On;var Dn={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.validateSchemaDeps=e.validatePropertyDeps=e.error=void 0;const t=je,s=Be,r=nt;e.error={message:({params:{property:e,depsCount:s,deps:r}})=>{const n=1===s?"property":"properties";return t.str`must have ${n} ${r} when property ${e} is present`},params:({params:{property:e,depsCount:s,deps:r,missingProperty:n}})=>t._`{property: ${e},
    missingProperty: ${n},
    depsCount: ${s},
    deps: ${r}}`};const n={keyword:"dependencies",type:"object",schemaType:"object",error:e.error,code(e){const[t,s]=function({schema:e}){const t={},s={};for(const r in e){if("__proto__"===r)continue;(Array.isArray(e[r])?t:s)[r]=e[r]}return[t,s]}(e);i(e,t),o(e,s)}};function i(e,s=e.schema){const{gen:n,data:i,it:o}=e;if(0===Object.keys(s).length)return;const a=n.let("missing");for(const c in s){const l=s[c];if(0===l.length)continue;const d=(0,r.propertyInData)(n,i,c,o.opts.ownProperties);e.setParams({property:c,depsCount:l.length,deps:l.join(", ")}),o.allErrors?n.if(d,(()=>{for(const t of l)(0,r.checkReportMissingProp)(e,t)})):(n.if(t._`${d} && (${(0,r.checkMissingProp)(e,l,a)})`),(0,r.reportMissingProp)(e,a),n.else())}}function o(e,t=e.schema){const{gen:n,data:i,keyword:o,it:a}=e,c=n.name("valid");for(const l in t)(0,s.alwaysValidSchema)(a,t[l])||(n.if((0,r.propertyInData)(n,i,l,a.opts.ownProperties),(()=>{const t=e.subschema({keyword:o,schemaProp:l},c);e.mergeValidEvaluated(t,c)}),(()=>n.var(c,!0))),e.ok(c))}e.validatePropertyDeps=i,e.validateSchemaDeps=o,e.default=n}(Dn);var jn={};Object.defineProperty(jn,"__esModule",{value:!0});const An=je,Mn=Be,Bn={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:{message:"property name must be valid",params:({params:e})=>An._`{propertyName: ${e.propertyName}}`},code(e){const{gen:t,schema:s,data:r,it:n}=e;if((0,Mn.alwaysValidSchema)(n,s))return;const i=t.name("valid");t.forIn("key",r,(s=>{e.setParams({propertyName:s}),e.subschema({keyword:"propertyNames",data:s,dataTypes:["string"],propertyName:s,compositeRule:!0},i),t.if((0,An.not)(i),(()=>{e.error(!0),n.allErrors||t.break()}))})),e.ok(i)}};jn.default=Bn;var Fn={};Object.defineProperty(Fn,"__esModule",{value:!0});const Vn=nt,Ln=je,Wn=Fe,qn=Be,Un={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:{message:"must NOT have additional properties",params:({params:e})=>Ln._`{additionalProperty: ${e.additionalProperty}}`},code(e){const{gen:t,schema:s,parentSchema:r,data:n,errsCount:i,it:o}=e;if(!i)throw new Error("ajv implementation error");const{allErrors:a,opts:c}=o;if(o.props=!0,"all"!==c.removeAdditional&&(0,qn.alwaysValidSchema)(o,s))return;const l=(0,Vn.allSchemaProperties)(r.properties),d=(0,Vn.allSchemaProperties)(r.patternProperties);function u(e){t.code(Ln._`delete ${n}[${e}]`)}function h(r){if("all"===c.removeAdditional||c.removeAdditional&&!1===s)u(r);else{if(!1===s)return e.setParams({additionalProperty:r}),e.error(),void(a||t.break());if("object"==typeof s&&!(0,qn.alwaysValidSchema)(o,s)){const s=t.name("valid");"failing"===c.removeAdditional?(p(r,s,!1),t.if((0,Ln.not)(s),(()=>{e.reset(),u(r)}))):(p(r,s),a||t.if((0,Ln.not)(s),(()=>t.break())))}}}function p(t,s,r){const n={keyword:"additionalProperties",dataProp:t,dataPropType:qn.Type.Str};!1===r&&Object.assign(n,{compositeRule:!0,createErrors:!1,allErrors:!1}),e.subschema(n,s)}t.forIn("key",n,(s=>{l.length||d.length?t.if(function(s){let n;if(l.length>8){const e=(0,qn.schemaRefOrVal)(o,r.properties,"properties");n=(0,Vn.isOwnProperty)(t,e,s)}else n=l.length?(0,Ln.or)(...l.map((e=>Ln._`${s} === ${e}`))):Ln.nil;return d.length&&(n=(0,Ln.or)(n,...d.map((t=>Ln._`${(0,Vn.usePattern)(e,t)}.test(${s})`)))),(0,Ln.not)(n)}(s),(()=>h(s))):h(s)})),e.ok(Ln._`${i} === ${Wn.default.errors}`)}};Fn.default=Un;var zn={};Object.defineProperty(zn,"__esModule",{value:!0});const Kn=Ne,Gn=nt,Hn=Be,Jn=Fn,Qn={keyword:"properties",type:"object",schemaType:"object",code(e){const{gen:t,schema:s,parentSchema:r,data:n,it:i}=e;"all"===i.opts.removeAdditional&&void 0===r.additionalProperties&&Jn.default.code(new Kn.KeywordCxt(i,Jn.default,"additionalProperties"));const o=(0,Gn.allSchemaProperties)(s);for(const u of o)i.definedProperties.add(u);i.opts.unevaluated&&o.length&&!0!==i.props&&(i.props=Hn.mergeEvaluated.props(t,(0,Hn.toHash)(o),i.props));const a=o.filter((e=>!(0,Hn.alwaysValidSchema)(i,s[e])));if(0===a.length)return;const c=t.name("valid");for(const u of a)l(u)?d(u):(t.if((0,Gn.propertyInData)(t,n,u,i.opts.ownProperties)),d(u),i.allErrors||t.else().var(c,!0),t.endIf()),e.it.definedProperties.add(u),e.ok(c);function l(e){return i.opts.useDefaults&&!i.compositeRule&&void 0!==s[e].default}function d(t){e.subschema({keyword:"properties",schemaProp:t,dataProp:t},c)}}};zn.default=Qn;var Yn={};Object.defineProperty(Yn,"__esModule",{value:!0});const Zn=nt,Xn=je,ei=Be,ti=Be,si={keyword:"patternProperties",type:"object",schemaType:"object",code(e){const{gen:t,schema:s,data:r,parentSchema:n,it:i}=e,{opts:o}=i,a=(0,Zn.allSchemaProperties)(s),c=a.filter((e=>(0,ei.alwaysValidSchema)(i,s[e])));if(0===a.length||c.length===a.length&&(!i.opts.unevaluated||!0===i.props))return;const l=o.strictSchema&&!o.allowMatchingProperties&&n.properties,d=t.name("valid");!0===i.props||i.props instanceof Xn.Name||(i.props=(0,ti.evaluatedPropsToName)(t,i.props));const{props:u}=i;function h(e){for(const t in l)new RegExp(e).test(t)&&(0,ei.checkStrictMode)(i,`property ${t} matches pattern ${e} (use allowMatchingProperties)`)}function p(s){t.forIn("key",r,(r=>{t.if(Xn._`${(0,Zn.usePattern)(e,s)}.test(${r})`,(()=>{const n=c.includes(s);n||e.subschema({keyword:"patternProperties",schemaProp:s,dataProp:r,dataPropType:ti.Type.Str},d),i.opts.unevaluated&&!0!==u?t.assign(Xn._`${u}[${r}]`,!0):n||i.allErrors||t.if((0,Xn.not)(d),(()=>t.break()))}))}))}!function(){for(const e of a)l&&h(e),i.allErrors?p(e):(t.var(d,!0),p(e),t.if(d))}()}};Yn.default=si;var ri={};Object.defineProperty(ri,"__esModule",{value:!0});const ni=Be,ii={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(e){const{gen:t,schema:s,it:r}=e;if((0,ni.alwaysValidSchema)(r,s))return void e.fail();const n=t.name("valid");e.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},n),e.failResult(n,(()=>e.reset()),(()=>e.error()))},error:{message:"must NOT be valid"}};ri.default=ii;var oi={};Object.defineProperty(oi,"__esModule",{value:!0});const ai={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:nt.validateUnion,error:{message:"must match a schema in anyOf"}};oi.default=ai;var ci={};Object.defineProperty(ci,"__esModule",{value:!0});const li=je,di=Be,ui={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:{message:"must match exactly one schema in oneOf",params:({params:e})=>li._`{passingSchemas: ${e.passing}}`},code(e){const{gen:t,schema:s,parentSchema:r,it:n}=e;if(!Array.isArray(s))throw new Error("ajv implementation error");if(n.opts.discriminator&&r.discriminator)return;const i=s,o=t.let("valid",!1),a=t.let("passing",null),c=t.name("_valid");e.setParams({passing:a}),t.block((function(){i.forEach(((s,r)=>{let i;(0,di.alwaysValidSchema)(n,s)?t.var(c,!0):i=e.subschema({keyword:"oneOf",schemaProp:r,compositeRule:!0},c),r>0&&t.if(li._`${c} && ${o}`).assign(o,!1).assign(a,li._`[${a}, ${r}]`).else(),t.if(c,(()=>{t.assign(o,!0),t.assign(a,r),i&&e.mergeEvaluated(i,li.Name)}))}))})),e.result(o,(()=>e.reset()),(()=>e.error(!0)))}};ci.default=ui;var hi={};Object.defineProperty(hi,"__esModule",{value:!0});const pi=Be,mi={keyword:"allOf",schemaType:"array",code(e){const{gen:t,schema:s,it:r}=e;if(!Array.isArray(s))throw new Error("ajv implementation error");const n=t.name("valid");s.forEach(((t,s)=>{if((0,pi.alwaysValidSchema)(r,t))return;const i=e.subschema({keyword:"allOf",schemaProp:s},n);e.ok(n),e.mergeEvaluated(i)}))}};hi.default=mi;var fi={};Object.defineProperty(fi,"__esModule",{value:!0});const yi=je,gi=Be,vi={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:{message:({params:e})=>yi.str`must match "${e.ifClause}" schema`,params:({params:e})=>yi._`{failingKeyword: ${e.ifClause}}`},code(e){const{gen:t,parentSchema:s,it:r}=e;void 0===s.then&&void 0===s.else&&(0,gi.checkStrictMode)(r,'"if" without "then" and "else" is ignored');const n=bi(r,"then"),i=bi(r,"else");if(!n&&!i)return;const o=t.let("valid",!0),a=t.name("_valid");if(function(){const t=e.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},a);e.mergeEvaluated(t)}(),e.reset(),n&&i){const s=t.let("ifClause");e.setParams({ifClause:s}),t.if(a,c("then",s),c("else",s))}else n?t.if(a,c("then")):t.if((0,yi.not)(a),c("else"));function c(s,r){return()=>{const n=e.subschema({keyword:s},a);t.assign(o,a),e.mergeValidEvaluated(n,o),r?t.assign(r,yi._`${s}`):e.setParams({ifClause:s})}}e.pass(o,(()=>e.error(!0)))}};function bi(e,t){const s=e.schema[t];return void 0!==s&&!(0,gi.alwaysValidSchema)(e,s)}fi.default=vi;var wi={};Object.defineProperty(wi,"__esModule",{value:!0});const _i=Be,$i={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:e,parentSchema:t,it:s}){void 0===t.if&&(0,_i.checkStrictMode)(s,`"${e}" without "if" is ignored`)}};wi.default=$i,Object.defineProperty(ln,"__esModule",{value:!0});const Si=dn,Pi=fn,Ei=yn,Ci=Pn,ki=Rn,xi=Dn,Ii=jn,Ri=Fn,Ti=zn,Ni=Yn,Oi=ri,Di=oi,ji=ci,Ai=hi,Mi=fi,Bi=wi;ln.default=function(e=!1){const t=[Oi.default,Di.default,ji.default,Ai.default,Mi.default,Bi.default,Ii.default,Ri.default,xi.default,Ti.default,Ni.default];return e?t.push(Pi.default,Ci.default):t.push(Si.default,Ei.default),t.push(ki.default),t};var Fi={},Vi={};Object.defineProperty(Vi,"__esModule",{value:!0});const Li=je,Wi={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:{message:({schemaCode:e})=>Li.str`must match format "${e}"`,params:({schemaCode:e})=>Li._`{format: ${e}}`},code(e,t){const{gen:s,data:r,$data:n,schema:i,schemaCode:o,it:a}=e,{opts:c,errSchemaPath:l,schemaEnv:d,self:u}=a;c.validateFormats&&(n?function(){const n=s.scopeValue("formats",{ref:u.formats,code:c.code.formats}),i=s.const("fDef",Li._`${n}[${o}]`),a=s.let("fType"),l=s.let("format");s.if(Li._`typeof ${i} == "object" && !(${i} instanceof RegExp)`,(()=>s.assign(a,Li._`${i}.type || "string"`).assign(l,Li._`${i}.validate`)),(()=>s.assign(a,Li._`"string"`).assign(l,i))),e.fail$data((0,Li.or)(!1===c.strictSchema?Li.nil:Li._`${o} && !${l}`,function(){const e=d.$async?Li._`(${i}.async ? await ${l}(${r}) : ${l}(${r}))`:Li._`${l}(${r})`,s=Li._`(typeof ${l} == "function" ? ${e} : ${l}.test(${r}))`;return Li._`${l} && ${l} !== true && ${a} === ${t} && !${s}`}()))}():function(){const n=u.formats[i];if(!n)return void function(){if(!1===c.strictSchema)return void u.logger.warn(e());throw new Error(e());function e(){return`unknown format "${i}" ignored in schema at path "${l}"`}}();if(!0===n)return;const[o,a,h]=function(e){const t=e instanceof RegExp?(0,Li.regexpCode)(e):c.code.formats?Li._`${c.code.formats}${(0,Li.getProperty)(i)}`:void 0,r=s.scopeValue("formats",{key:i,ref:e,code:t});if("object"==typeof e&&!(e instanceof RegExp))return[e.type||"string",e.validate,Li._`${r}.validate`];return["string",e,r]}(n);o===t&&e.pass(function(){if("object"==typeof n&&!(n instanceof RegExp)&&n.async){if(!d.$async)throw new Error("async format in sync schema");return Li._`await ${h}(${r})`}return"function"==typeof a?Li._`${h}(${r})`:Li._`${h}.test(${r})`}())}())}};Vi.default=Wi,Object.defineProperty(Fi,"__esModule",{value:!0});const qi=[Vi.default];Fi.default=qi;var Ui={};Object.defineProperty(Ui,"__esModule",{value:!0}),Ui.contentVocabulary=Ui.metadataVocabulary=void 0,Ui.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"],Ui.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"],Object.defineProperty(Vs,"__esModule",{value:!0});const zi=sr,Ki=ln,Gi=Fi,Hi=Ui,Ji=[Ls.default,zi.default,(0,Ki.default)(),Gi.default,Hi.metadataVocabulary,Hi.contentVocabulary];Vs.default=Ji;var Qi,Yi,Zi={},Xi={};Qi=Xi,Object.defineProperty(Qi,"__esModule",{value:!0}),Qi.DiscrError=void 0,(Yi=Qi.DiscrError||(Qi.DiscrError={})).Tag="tag",Yi.Mapping="mapping",Object.defineProperty(Zi,"__esModule",{value:!0});const eo=je,to=Xi,so=_s,ro=Be,no={keyword:"discriminator",type:"object",schemaType:"object",error:{message:({params:{discrError:e,tagName:t}})=>e===to.DiscrError.Tag?`tag "${t}" must be string`:`value of tag "${t}" must be in oneOf`,params:({params:{discrError:e,tag:t,tagName:s}})=>eo._`{error: ${e}, tag: ${s}, tagValue: ${t}}`},code(e){const{gen:t,data:s,schema:r,parentSchema:n,it:i}=e,{oneOf:o}=n;if(!i.opts.discriminator)throw new Error("discriminator: requires discriminator option");const a=r.propertyName;if("string"!=typeof a)throw new Error("discriminator: requires propertyName");if(r.mapping)throw new Error("discriminator: mapping is not supported");if(!o)throw new Error("discriminator: requires oneOf keyword");const c=t.let("valid",!1),l=t.const("tag",eo._`${s}${(0,eo.getProperty)(a)}`);function d(s){const r=t.name("valid"),n=e.subschema({keyword:"oneOf",schemaProp:s},r);return e.mergeEvaluated(n,eo.Name),r}t.if(eo._`typeof ${l} == "string"`,(()=>function(){const s=function(){var e;const t={},s=c(n);let r=!0;for(let n=0;n<o.length;n++){let t=o[n];(null==t?void 0:t.$ref)&&!(0,ro.schemaHasRulesButRef)(t,i.self.RULES)&&(t=so.resolveRef.call(i.self,i.schemaEnv.root,i.baseId,null==t?void 0:t.$ref),t instanceof so.SchemaEnv&&(t=t.schema));const d=null===(e=null==t?void 0:t.properties)||void 0===e?void 0:e[a];if("object"!=typeof d)throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${a}"`);r=r&&(s||c(t)),l(d,n)}if(!r)throw new Error(`discriminator: "${a}" must be required`);return t;function c({required:e}){return Array.isArray(e)&&e.includes(a)}function l(e,t){if(e.const)d(e.const,t);else{if(!e.enum)throw new Error(`discriminator: "properties/${a}" must have "const" or "enum"`);for(const s of e.enum)d(s,t)}}function d(e,s){if("string"!=typeof e||e in t)throw new Error(`discriminator: "${a}" values must be unique strings`);t[e]=s}}();t.if(!1);for(const e in s)t.elseIf(eo._`${l} === ${e}`),t.assign(c,d(s[e]));t.else(),e.error(!1,{discrError:to.DiscrError.Mapping,tag:l,tagName:a}),t.endIf()}()),(()=>e.error(!1,{discrError:to.DiscrError.Tag,tag:l,tagName:a}))),e.ok(c)}};Zi.default=no;const io={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0};!function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MissingRefError=t.ValidationError=t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=void 0;const s=Te,r=Vs,n=Zi,i=io,o=["/properties"],a="http://json-schema.org/draft-07/schema";class c extends s.default{_addVocabularies(){super._addVocabularies(),r.default.forEach((e=>this.addVocabulary(e))),this.opts.discriminator&&this.addKeyword(n.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const e=this.opts.$data?this.$dataMetaSchema(i,o):i;this.addMetaSchema(e,a,!1),this.refs["http://json-schema.org/schema"]=a}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(a)?a:void 0)}}e.exports=t=c,Object.defineProperty(t,"__esModule",{value:!0}),t.default=c;var l=Ne;Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return l.KeywordCxt}});var d=je;Object.defineProperty(t,"_",{enumerable:!0,get:function(){return d._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return d.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return d.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return d.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return d.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return d.CodeGen}});var u=ys;Object.defineProperty(t,"ValidationError",{enumerable:!0,get:function(){return u.default}});var h=vs;Object.defineProperty(t,"MissingRefError",{enumerable:!0,get:function(){return h.default}})}(Re,Ie);const oo=ee(Ie);class ao{constructor(e,t){l(this,"ajv"),l(this,"handlers"),l(this,"_state","0"),l(this,"_ws"),l(this,"idleMS",599e3),l(this,"_isIdle",!1),l(this,"_idleTimeoutID",-1),l(this,"onOpen",globalThis.doNothing),l(this,"onRetry",globalThis.doNothing),l(this,"onFailed",globalThis.doNothing),l(this,"onSendFailed",globalThis.doNothing),l(this,"onRecvException",globalThis.doNothing),this.ajv=e,this.handlers=t}get state(){return this._state}connect(e,t){"NORMAL"!=this._state&&window.setTimeout((()=>{this._state="NORMAL",this.onOpen(this._ws)}),100)}getWebSocketURL(){return""}setWebSocketCallbacks(e){e.onopen=null,e.onclose=()=>{this._state="CLOSED"},e.onerror=()=>{this._state="CLOSED"},e.onmessage=e=>{this._handleRecv(e.data)}}request(e){const t=this.handlers[e],s=t.state;"PENDING"!=s&&(t.state="REQUESTED"),"IDLE"==s&&(t.prepareSendData(),this.sendRequestIfAny())}_handleRecv(e){window.clearTimeout(this._idleTimeoutID),this._idleTimeoutID=window.setTimeout((()=>this._isIdle=!0),this.idleMS);const t=this.getPending();null!==t&&(this._state="NORMAL",t.onRecvAny(t,e),e?this._parseRecv(t,e):(t.state="SUCCESS",t.onRecvSuccess(t,{})),"SUCCESS"==t.state&&(t.state="IDLE"),this.sendRequestIfAny())}_parseRecv(e,t){try{const s=JSON.parse(t);e.validate(s)?(e.state="SUCCESS",e.nTotalTry=1,e.onRecvSuccess(e,s)):e.validateError(s)?(e.state="ERROR",e.onRecvError(e,s)):(e.state="ERROR",e.onRecvInvalid(e,t))}catch(s){e.state="ERROR",this.onRecvException(e,s)}}sendRequestIfAny(){if(null!==this.getPending())return;const e=this.getRequested();null!==e&&this._sendRequest(e)}_sendRequest(e){var t;this._checkIfCanSend(e)?(window.clearTimeout(this._idleTimeoutID),e.nTried++,e.state="PENDING",e.onSend(e,e.nTried),window.setTimeout((()=>{this._handleRecv(e.testMode.recvMsg)}),null!=(t=e.testMode.sendLatency)?t:0)):e.state="ERROR"}_checkIfCanSend(e){return e.nTried>=e.nTotalTry?(this.onSendFailed(e,"retry-limit"),!1):!this._isIdle||(this.onSendFailed(e,"idle"),!1)}getPending(){for(const e of Object.values(this.handlers))if("PENDING"==e.state)return e;return null}getRequested(){return null}initWebsocket(e,t,s){let r=!1;return new Promise(((n,i)=>{const o=()=>{s<=0?i():r||(s--,r=!0,console.log("retrying connection to websocket! url: "+e+", remaining retries: "+s),this.onRetry(s),this.initWebsocket(e,t,s).then(n,i))};setTimeout((()=>{r||(console.log("opening websocket timed out: "+e),o())}),t);const a=new WebSocket(e);a.onopen=()=>{r?a.close():(console.log("websocket to opened! url: "+e),r=!0,n(a))},a.onclose=()=>{console.warn("websocket closed! url: "+e),o()},a.onerror=()=>{console.warn("websocket error! url: "+e),o()}}))}}class co{constructor(e,t,s,r){l(this,"name"),l(this,"validate"),l(this,"validateError"),l(this,"nTried",0),l(this,"nTotalTry",1),l(this,"timeoutMS",15e3),l(this,"_state"),l(this,"_data"),l(this,"_timeoutID",-1),l(this,"_intervalID",-1),l(this,"onSend",globalThis.doNothing),l(this,"onRecvAny",globalThis.doNothing),l(this,"onRecvSuccess",globalThis.doNothing),l(this,"onRecvError",globalThis.doNothing),l(this,"onRecvInvalid",globalThis.doNothing),l(this,"testMode",{}),this.name=e,this.validate=r.compile(t.R),this.validateError=r.compile(s),this._state="IDLE",this._data=void 0}get state(){return this._state}set state(e){this._state=e,"IDLE"==e&&(this.nTried=0,this.nTotalTry=1)}setTimeout(e){window.clearTimeout(this._timeoutID),this._timeoutID=window.setTimeout(e,this.timeoutMS)}setInterval(e,t){window.clearInterval(this._intervalID),this._intervalID=window.setInterval(e,t)}clearTimeout(){window.clearTimeout(this._timeoutID)}clearInterval(){window.clearInterval(this._intervalID)}get dataToSend(){return this._data}prepareSendData(){}}class lo extends ao{constructor(e,t){super(e,t),l(this,"sessionId"),l(this,"sessionToken"),l(this,"platformUrl");let s=globalThis.API.params.get("sessionId");this.sessionId=null!==s?s:"0",s=globalThis.API.params.get("sessionToken"),this.sessionToken=null!==s?s:"0",s=globalThis.API.params.get("platformUrl"),this.platformUrl=null!==s?window.atob(s):"0"}getWebSocketURL(){return"true"==globalThis.API.params.get("secure")||"https:"==window.location.protocol?`wss://${this.platformUrl}`:"http:"==window.location.protocol?`ws://${this.platformUrl}`:""}getRequested(){return"REQUESTED"==this.handlers.startGame.state?this.handlers.startGame:"REQUESTED"==this.handlers.bet.state?this.handlers.bet:"REQUESTED"==this.handlers.step.state?this.handlers.step:"REQUESTED"==this.handlers.updateBalance.state?this.handlers.updateBalance:null}test(e){let t=this.handlers.startGame.validate;t(e);let s=t.errors;s&&(s.forEach((e=>console.log(e))),t=this.handlers.startGame.validateError,t(e),s=t.errors,s&&s.forEach((e=>console.log(e))))}}const uo={type:"object",properties:{},required:[]},ho={type:"object",properties:{},required:[]},po={StartGame:{R:ho},Bet:{S:{type:"object",properties:{state:{type:"string",enum:["bet","cheatbet"]},debug:{type:"string"},pick:{type:"number"},dice:{type:"array",items:{type:"number"}},isBonus:{type:"boolean"},bonusDice:{type:"number"}},required:["state","debug","pick","dice","isBonus","bonusDice"]},R:{type:"object",properties:a({},uo.properties),required:uo.required}},Step:{S:ho,R:ho}},mo=new class{constructor(){l(this,"totalwin",0),l(this,"debug",""),l(this,"state",""),l(this,"pick",0),l(this,"dice",[]),l(this,"isBonus",!1),l(this,"bonusDice",0),l(this,"nNonWin",0),l(this,"demoMessages",[]),l(this,"demoResults",[]),l(this,"combCheatTable",[[1066456,738475703,916907404],[64344603,801505779,894285542],[770991269,832449767,985385661],[814542285,872125537,1027873085],[908116364,962889641,1086056791],[977719840,1111690215,1146010273],[1129771500,1152912225,1162662783],[1145692058,1162657968,1166510409],[1152315930,1162673562,1166516494],[1120046750,1144839119,1162855544]])}getDemoExtraction(e){let t;t=!0===pgame.controlCaseGS?9:!0===pgame.controlCaseWild?10:7;let s=this.demoResults[t];Object.assign(this,s)}recvBetGameData(e){Object.assign(this,e)}};function fo(){var e;let t;return null!==API.params.get("cheatRND")?t=pgame.interact.isKeyDown("p")||pgame.interact.isKeyDown("P")?API.params.get("cheatRND"):void 0:null!==API.params.get("cheat")&&(t=null==(e=pgame.data.cheatRND)?void 0:e.toString()),{state:void 0!==t?"cheatbet":"bet",bet:pgame.data.totalBet,debug:null!=t?t:"",pick:pgame.data.betColor,dice:[],isBonus:!1,bonusDice:255}}function yo(e,t){API.toggleCanvas.value?(pgame.front.popMsg.setText(t),pgame.front.popMsg.pop(e,500).start(!0)):API.showErrorMessage(t)}function go(e,t,...s){API.toggleCanvas.value?(0==s.length?pgame.front.popMsg.txtKey(t):pgame.front.popMsg.txtKeyFormat(t,...s),pgame.front.popMsg.pop(e,500).start(!0)):0==s.length?API.showErrorMessage(B.getByKey(t)):API.showErrorMessage(B.getByKeyFormat(t,...s))}function vo(e){e.onSend=e=>{e.setInterval((()=>{go(2e3,"waitResponse")}),4e3),e.setTimeout((()=>{e.setInterval((()=>{go(2e3,"requestTimeout")}),4e3)}))},e.onRecvAny=e=>{e.clearTimeout(),e.clearInterval(),API.toggleCanvas.value||API.showErrorMessage(null)},e.onRecvInvalid=(e,t)=>{let s=`${e.name} Request received an invalid object`;console.error(s),console.log(t),API.showErrorMessage(te.global.t("message.recInvalidObj"))}}mo.demoMessages=['{"bonus":null,"bonusWin":0,"freeSpins":[],"grid":[[9,4,4,7,4],[9,2,0,0,1],[5,6,3,7,8],[2,1,0,4,6],[5,0,1,6,0]],"mysteryWin":0,"nScatter":0,"ready":0,"shootingWild":[],"totalwin":0,"winningLines":[]}','{"bonus":null,"bonusWin":0,"freeSpins":[],"grid":[[1,0,2,4,5],[4,2,9,5,3],[5,7,1,0,2],[0,0,2,4,8],[5,0,8,0,5]],"mysteryWin":0,"nScatter":1,"ready":0,"shootingWild":[],"totalwin":0,"winningLines":[]}','{"bonus":null,"bonusWin":0,"freeSpins":[],"grid":[[3,4,3,0,3],[9,7,4,0,4],[1,7,2,0,1],[9,4,5,5,0],[4,1,7,6,1]],"mysteryWin":0,"nScatter":0,"ready":0,"shootingWild":[],"totalwin":50,"winningLines":[{"lineID":2,"numWinningSymbs":3,"position":[0,1,2,0,0],"symbID":0,"totWin":50}]}','{"bonus":null,"bonusWin":0,"freeSpins":[],"grid":[[4,2,1,3,5],[2,8,0,3,0],[0,0,3,6,4],[9,1,0,0,3],[0,1,0,4,6]],"mysteryWin":0,"nScatter":0,"ready":0,"shootingWild":[],"totalwin":150,"winningLines":[{"lineID":6,"numWinningSymbs":3,"position":[0,1,2,0,0],"symbID":3,"totWin":150}]}','{"bonus":null,"bonusWin":3300,"freeSpins":[],"grid":[[6,6,2,2,7],[8,4,2,7,7],[6,4,8,5,8],[0,3,6,3,8],[1,7,7,1,5]],"mysteryWin":0,"nScatter":0,"ready":0,"shootingWild":[[0,1]],"totalwin":600,"winningLines":[{"lineID":0,"numWinningSymbs":3,"position":[0,1,2,3,4],"symbID":2,"totWin":100},{"lineID":1,"numWinningSymbs":3,"position":[0,1,2,3,4],"symbID":4,"totWin":250},{"lineID":5,"numWinningSymbs":3,"position":[0,1,2,3,0],"symbID":4,"totWin":250}]}','{"bonus":null,"bonusWin":11400,"freeSpins":[],"grid":[[7,5,2,3,2],[0,9,7,5,2],[0,4,2,0,1],[5,3,6,7,3],[7,0,4,0,1]],"mysteryWin":200,"nScatter":1,"ready":0,"shootingWild":[],"totalwin":200,"winningLines":[]}','{"bonus":null,"bonusWin":0,"freeSpins":[],"grid":[[3,7,6,2,1],[2,2,8,7,3],[5,0,8,6,7],[5,4,0,1,6],[7,1,3,5,4]],"mysteryWin":500,"nScatter":0,"ready":0,"shootingWild":[],"totalwin":2000,"winningLines":[{"lineID":0,"numWinningSymbs":3,"position":[0,1,2,3,4],"symbID":6,"totWin":1500}]}','{"bonus":null,"bonusWin":0,"freeSpins":[],"grid":[[7,0,3,9,4],[2,5,7,7,5],[8,5,1,0,1],[1,1,1,3,2],[9,5,0,9,1]],"mysteryWin":500,"nScatter":1,"ready":0,"shootingWild":[[3,1],[0,3]],"totalwin":0,"winningLines":[]}','{"bonus":null,"bonusWin":0,"freeSpins":[],"grid":[[1,6,3,5,0],[5,6,4,0,0],[3,6,5,3,2],[0,7,9,1,6],[7,4,9,1,0]],"mysteryWin":1000,"nScatter":2,"ready":0,"shootingWild":[[3,3],[1,3]],"totalwin":3900,"winningLines":[{"lineID":1,"numWinningSymbs":3,"position":[0,1,2,3,4],"symbID":6,"totWin":1500},{"lineID":6,"numWinningSymbs":4,"position":[0,1,2,3,4],"symbID":5,"totWin":1200},{"lineID":8,"numWinningSymbs":4,"position":[0,1,2,3,0],"symbID":3,"totWin":200}]}','{"bonus":{"pickWins":[800,0,0,0,0],"scatters":[{"fakeValues0":600,"fakeValues1":700,"fakeValues2":900,"fakeValues3":1000,"reelID":2,"slotID":0},{"fakeValues0":0,"fakeValues1":0,"fakeValues2":0,"fakeValues3":0,"reelID":3,"slotID":1},{"fakeValues0":0,"fakeValues1":0,"fakeValues2":0,"fakeValues3":0,"reelID":0,"slotID":0},{"fakeValues0":0,"fakeValues1":0,"fakeValues2":0,"fakeValues3":0,"reelID":0,"slotID":0},{"fakeValues0":0,"fakeValues1":0,"fakeValues2":0,"fakeValues3":0,"reelID":0,"slotID":0}]},"bonusWin":500,"freeSpins":[{"bonus":null,"bonusWin":0,"freeSpins":[],"grid":[[8,4,9,2,4],[8,4,9,1,0],[4,2,4,3,9],[8,4,0,5,0],[2,5,0,5,5]],"mysteryWin":0,"nScatter":2,"ready":0,"shootingWild":[],"totalwin":400,"winningLines":[{"lineID":5,"numWinningSymbs":4,"position":[0,1,2,3,3435973836],"symbID":4,"totWin":400}]},{"bonus":null,"bonusWin":0,"freeSpins":[],"grid":[[2,2,0,0,6],[0,5,3,0,0],[2,6,9,5,5],[7,8,5,3,6],[1,3,0,1,3]],"mysteryWin":0,"nScatter":1,"ready":0,"shootingWild":[[0,3]],"totalwin":0,"winningLines":[]},{"bonus":null,"bonusWin":0,"freeSpins":[],"grid":[[2,6,2,4,0],[0,0,8,0,9],[6,0,5,3,2],[8,2,1,1,5],[5,6,3,0,0]],"mysteryWin":0,"nScatter":0,"ready":0,"shootingWild":[],"totalwin":0,"winningLines":[]},{"bonus":null,"bonusWin":0,"freeSpins":[],"grid":[[4,3,2,3,2],[8,9,1,1,8],[1,7,3,5,5],[2,4,1,9,8],[1,5,5,5,3]],"mysteryWin":0,"nScatter":2,"ready":0,"shootingWild":[],"totalwin":0,"winningLines":[]},{"bonus":null,"bonusWin":0,"freeSpins":[],"grid":[[3,0,1,0,2],[3,1,0,0,6],[1,4,5,4,0],[1,2,1,6,2],[2,2,8,1,1]],"mysteryWin":0,"nScatter":0,"ready":0,"shootingWild":[],"totalwin":0,"winningLines":[]},{"bonus":null,"bonusWin":0,"freeSpins":[],"grid":[[9,4,9,6,5],[7,4,9,1,8],[5,4,3,3,0],[0,4,1,3,4],[3,0,4,7,3]],"mysteryWin":0,"nScatter":2,"ready":0,"shootingWild":[],"totalwin":400,"winningLines":[{"lineID":1,"numWinningSymbs":4,"position":[0,1,2,3,3435973836],"symbID":4,"totWin":400}]},{"bonus":null,"bonusWin":0,"freeSpins":[],"grid":[[4,3,5,8,4],[4,4,1,0,7],[9,8,8,3,0],[8,3,6,0,2],[0,0,5,0,7]],"mysteryWin":0,"nScatter":0,"ready":0,"shootingWild":[],"totalwin":300,"winningLines":[{"lineID":4,"numWinningSymbs":3,"position":[0,1,2,3435973836,3435973836],"symbID":1,"totWin":50},{"lineID":6,"numWinningSymbs":5,"position":[0,1,2,3,4],"symbID":0,"totWin":250}]},{"bonus":null,"bonusWin":0,"freeSpins":[],"grid":[[2,2,4,9,1],[6,9,4,4,9],[8,6,4,2,6],[3,5,4,0,1],[6,3,5,5,7]],"mysteryWin":100,"nScatter":2,"ready":0,"shootingWild":[],"totalwin":400,"winningLines":[{"lineID":0,"numWinningSymbs":4,"position":[0,1,2,3,3435973836],"symbID":4,"totWin":400}]}],"grid":[[3,9,2,8,7],[0,0,3,6,6],[9,9,1,2,2],[7,0,9,8,7],[3,3,0,1,4]],"mysteryWin":0,"nScatter":2,"ready":0,"shootingWild":[],"totalwin":1500,"winningLines":[]}','{"bonus":null,"bonusWin":9800,"freeSpins":[],"grid":[[8,8,3,5,6],[2,9,5,3,6],[6,3,4,4,0],[3,2,2,3,6],[6,9,3,6,2]],"mysteryWin":0,"nScatter":2,"shootingWild":[[3,2],[1,2],[2,3]],"totalwin":10900,"winningLines":[{"lineID":3,"numWinningSymbs":4,"position":[0,1,2,3],"symbID":7,"totWin":10000},{"lineID":8,"numWinningSymbs":5,"position":[0,1,2,3,4],"symbID":3,"totWin":700},{"lineID":9,"numWinningSymbs":4,"position":[0,1,2,3],"symbID":3,"totWin":200}]}'],mo.demoResults=mo.demoMessages.map((e=>JSON.parse(e)));const bo={StartGame:{S:{type:"object",properties:{action:{type:"string",enum:["start"]},sessionId:{type:"string"},sessionToken:{type:"string"}},required:["action","sessionId","sessionToken"]},R:{type:"object",properties:{credits:{type:"number"},code:{type:"string",enum:["OK"]},gameData:(wo=po).StartGame.R,config:{type:"object",properties:{bet:{anyOf:[{type:"object",properties:{type:{type:"string",enum:["list"]},list:{type:"array",items:{type:"number"}},default:{type:"number"}},required:["type","list"]},{type:"object",properties:{type:{type:"string",enum:["step"]},min:{type:"number"},max:{type:"number"},step:{type:"number"},default:{type:"number"}},required:["type","min","max","step"]}]}},required:["bet"]}},required:["credits","code","config"]}},Bet:{S:{type:"object",properties:{action:{type:"string",enum:["bet"]},sessionId:{type:"string"},sessionToken:{type:"string"},gameData:wo.Bet.S,bet:{type:"number"},type:{type:"string"}},required:["action","sessionId","sessionToken","gameData","bet"]},R:{type:"object",properties:{credits:{type:"number"},code:{type:"string",enum:["OK"]},gameData:wo.Bet.R,win:{type:"number"},casinoMessage:{type:"object",properties:{title:{type:"string"},body:{type:"string"}},required:["title","body"]}},required:["credits","code","gameData","win"]}},Step:{S:{type:"object",properties:{action:{type:"string",enum:["step"]},sessionId:{type:"string"},sessionToken:{type:"string"},gameData:wo.Step.S},required:["action","sessionId","sessionToken","gameData"]},R:{type:"object",properties:{credits:{type:"number"},code:{type:"string",enum:["OK"]},gameData:wo.Step.R,win:{type:"number"}},required:["credits","code","gameData","win"]}},UpdateBalance:{S:{type:"object",properties:{action:{type:"string",enum:["update"]},sessionId:{type:"string"},sessionToken:{type:"string"}},required:["action","sessionId","sessionToken"]},R:{type:"object",properties:{credits:{type:"number"},code:{type:"string",enum:["OK"]}},required:["credits","code"]}},Error:{type:"object",properties:{code:{type:"string"},message:{type:"string"},timestamp:{type:"string"}},required:["code"]}};var wo;class _o extends co{constructor(e){super("StartGame",bo.StartGame,bo.Error,e),l(this,"onRecvSuccess",((e,t)=>{const s=pgame.state("Loading");if(!s.isStartRequestReceived)return s.isStartRequestReceived=!0,void function(){const e=pgame.data;e.realCredits=3e5,e.setBetList(100,0,1e4),e.defaultBet=100}()})),this.onRecvError=Eo,vo(this)}prepareSendData(){let e=globalThis.conn;this._data={action:"start",sessionId:e.sessionId,sessionToken:e.sessionToken}}}class $o extends co{constructor(e){super("Bet",bo.Bet,bo.Error,e),l(this,"onRecvSuccess",((e,t)=>{const s=pgame.data;pgame.ce.getDemoExtraction(s.totalBet),s.realCredits+=pgame.ce.totalwin,pgame.gui.getServerData()})),this.onRecvError=Eo,vo(this)}prepareSendData(){let e=globalThis.conn;this._data={action:"bet",sessionId:e.sessionId,sessionToken:e.sessionToken,bet:pgame.data.totalBet,gameData:fo()}}}class So extends co{constructor(e){super("Step",bo.Step,bo.Error,e),l(this,"onRecvSuccess",((e,t)=>{})),this.onRecvError=Eo,vo(this)}prepareSendData(){let e=globalThis.conn;this._data={action:"step",sessionId:e.sessionId,sessionToken:e.sessionToken,gameData:{}}}}class Po extends co{constructor(e){super("UpdateBalance",bo.UpdateBalance,bo.Error,e),l(this,"onRecvSuccess",((e,t)=>{})),this.onRecvError=Eo,vo(this)}prepareSendData(){let e=globalThis.conn;this._data={action:"update",sessionId:e.sessionId,sessionToken:e.sessionToken}}}function Eo(e,t){switch(t.code){case"StartException":if(e.nTried<=1)return e.nTotalTry=e===conn.handlers.startGame?4:3,void conn.request("startGame");if(e.nTried<e.nTotalTry)return e.state="REQUESTED",void yo(2e3,`Retrying ${e.name} request... (${e.nTried+1}/${e.nTotalTry})`);if(pgame.state("Loading").isStartRequestReceived)break;return void API.showErrorMessage(`${t.code}: ${t.message}`);case"StepException":break;case"BetException":pgame.data.restore();break;case"RoundError":return void conn.request("startGame")}yo(6e3,`${t.code}: ${t.message}`),e.state="SUCCESS","PlayRun"==pgame.currState.name&&pgame.state("PlayRun").setNext("Start")}const Co={createConnector:function(){const e=new oo,t={startGame:new _o(e),bet:new $o(e),step:new So(e),updateBalance:new Po(e)};return new lo(e,t)}};function ko(){let e;return e=Co.createConnector(),function(e){e.onRetry=e=>{API.showErrorMessage(te.global.t("message.websocketCannotRetry")+e)},e.onFailed=()=>{API.showErrorMessage(te.global.t("message.wesocketFail"))},e.onSendFailed=(e,t)=>{let s="onSendFailed";if("retry-limit"==t)s="cannotRetry";else if("idle"==t)return s="expireSession",go(2e3,s),void window.setInterval((()=>go(2e3,s)),4e3);go(4e3,s)},e.onRecvException=(e,t)=>{let s=t;API.showErrorMessage(s.message,s.stack)}}(e),e}class xo extends se{constructor(){globalThis.conn=ko(),super("Loading"),l(this,"isGameInitialized",!1),l(this,"isStartRequestReceived",!1)}enter(){conn.onOpen=()=>{conn.request("startGame")},conn.connect(2e4,3)}update(){this.isGameInitialized&&this.isStartRequestReceived&&this.setNext("Start")}exit(){"Start"==this._nextState&&(pgame.data.setDefaultBet(),pgame.data.syncCredits(),pgame.onGameReady(),pgame.music.Bg.play()),null!==API.params.get("cheat")&&null===API.params.get("cheatRND")&&(pgame.interact.on("down-p",(()=>API.showCheatPanel(!0))),pgame.interact.on("down-P",(()=>API.showCheatPanel(!0))))}}class Io extends se{constructor(){super("PlayRun"),l(this,"gui",pgame.gui),l(this,"msg",pgame.front),l(this,"cnvDice",this.gui.middlePanel.cnvDice),l(this,"isReceivedData",!1),l(this,"isBonus",!1),l(this,"dice",[])}enter(){console.log("STATE: PlayRun"),this.rollDice()}update(){this.isReceivedData&&(this.isReceivedData=!1,this.isBonus?this.setDice([0,1,2]):this.setDice(this.findIdenticalDice()))}exit(){}rollDice(){for(let e=0;e<3;e++)this.cnvDice.spDice[e].state.setAnimation(0,"p_b",!0),this.cnvDice.spDice[e].state.timeScale=2}setDice(e){let t=!1;0!=e[0]&&(t=!0);for(let s=0;s<3;s++)this.isBonus||t?0==s?setTimeout((()=>{this.cnvDice.spDice[e[s]].state.timeScale=1,this.cnvDice.spDice[e[s]].state.setAnimation(0,"p_"+this.dice[e[s]],!1)}),500):1==s?(this.nearMissEffect(this.cnvDice.spDice[e[s]]),setTimeout((()=>{this.cnvDice.spDice[e[s]].state.timeScale=1,this.cnvDice.spDice[e[s]].state.setAnimation(0,"p_"+this.dice[e[s]],!1)}),3e3)):(setTimeout((()=>{this.nearMissEffect(this.cnvDice.spDice[e[s]])}),4e3),setTimeout((()=>{this.cnvDice.spDice[e[s]].state.timeScale=1,this.cnvDice.spDice[e[s]].state.setAnimation(0,"p_"+this.dice[e[s]],!1),this.isBonus?this.twBonusCelebration():this.setNext("Showin")}),7e3)):setTimeout((()=>{this.cnvDice.spDice[e[s]].state.timeScale=1,this.cnvDice.spDice[e[s]].state.setAnimation(0,"p_"+this.dice[e[s]],!1),2==s&&this.setNext("Showin")}),600*s)}findIdenticalDice(){return this.dice[0]==this.dice[1]&&this.dice[0]==pgame.data.betColor?[1,0,2]:this.dice[0]==this.dice[2]&&this.dice[0]==pgame.data.betColor?[2,0,1]:this.dice[1]==this.dice[2]&&this.dice[1]==pgame.data.betColor?[1,2,0]:[0,1,2]}nearMissEffect(e){this.cnvDice.tweens.create("nearMissRoll",e,{scale:{x:2.5,y:2.5}},3e3).start().on("end",(()=>{console.log("Stop"),this.cnvDice.tweens.create("nearMissRollBack",e,{scale:{x:2,y:2}},1e3).start()}))}twBonusCelebration(){return console.log("Bonus Celebration"),this.cnvDice.tweens.create("bonusDice1MoveUp",this.cnvDice.spDice[0],{position:{y:-200}},500).start().easing(re.Cubic.InOut).on("end",(()=>{this.cnvDice.tweens.create("bonusDice1Scale",this.cnvDice.spDice[0],{scale:{x:2.5,y:2.5}},1e3).start().easing(re.Elastic.InOut).on("end",(()=>{this.cnvDice.tweens.create("bonusDice1Fly",this.cnvDice.spDice[0],{radian:ne/-8,position:{x:-400,y:-300}},500).start()}))}))}}class Ro extends se{constructor(){super("Showin"),l(this,"gui",pgame.gui),l(this,"cnvColorsBoard",this.gui.middlePanel.cnvColorsBoard),l(this,"winAmount",0),this.onBtnPlayClicked=this.onBtnPlayClicked.bind(this)}enter(){setTimeout((()=>{0==this.winAmount?this.goBackToStart():this.winAmount>0&&(this.cnvColorsBoard.txtNoti.setKey("playerWin"),this.goBackToStart())}),500)}exit(){}update(){}onBtnPlayClicked(){}goBackToStart(){setTimeout((()=>{this.setNext("Start"),conn.request("startGame")}),500)}}function To(e){let t;return t={key:e,fill:[h.White,h.Yellow],size:64,weight:"100",font:"Impact",stroke:h.DarkRed,strokeThickness:10,lineJoin:"round"},t}function No(e){let t;return t={text:ie.currency(e),fill:h.White,size:80,weight:"100",font:"Impact",stroke:h.Black,strokeThickness:5,lineJoin:"round"},t}function Oo(e){let t;return t={key:e,fill:h.White,size:28,weight:"100",font:"Aachen Bold",stroke:h.Black,strokeThickness:5,lineJoin:"round"},t}function Do(e){let t;return t={text:e,fill:h.White,size:32,weight:"100",font:"Aachen Bold",stroke:h.Black,strokeThickness:5,lineJoin:"round"},t}class jo extends L{constructor(){super(),l(this,"imgBetFrame"),l(this,"txtBetTitle"),l(this,"txtBetValue"),l(this,"btnPlay"),l(this,"btnReset"),l(this,"btnChips",[]),l(this,"configBetList",[100,200,500,1e3,2e3]),l(this,"chipsList",["chip_1$","chip_2$","chip_5$","chip_10$","chip_20$"]),this.imgBetFrame=new N("bet_amount"),this.imgBetFrame.pivotRule=oe.Center,this.txtBetTitle=new B(To("bet")),this.txtBetTitle.pivotRule=oe.Center,this.txtBetTitle.fitType="Shrink",this.txtBetTitle.setFitBox(64,100),this.txtBetTitle.position.set(0,-48),this.txtBetValue=new B(No(99999999)),this.txtBetValue.pivotRule=oe.Center,this.txtBetValue.fitType="Shrink",this.txtBetValue.setFitBox(120,100),this.txtBetValue.position.set(0,0),this.btnPlay=new ye("bt_play_on"),this.btnPlay.addCenteredTxt(Oo("play")),this.btnPlay.txtFitType("Shrink"),this.btnPlay.txtFitBox(1,1),this.btnPlay.pivotRule=oe.Center,this.btnPlay.position.set(270,0),this.btnReset=new ye("bt_cancel_on"),this.btnReset.addCenteredTxt(Oo("reset")),this.btnReset.txtFitType("Shrink"),this.btnReset.txtFitBox(1,1),this.btnReset.pivotRule=oe.Center,this.btnReset.position.set(-270,0);for(let e=0;e<5;e++)this.btnChips[e]=new ye(this.chipsList[e]),this.btnChips[e].addCenteredTxt(No(this.configBetList[e]),0,-5),this.btnChips[e].txtFitType("Shrink"),this.btnChips[e].txtFitBox(.7,1),this.btnChips[e].pivotRule=oe.Center,this.addObj(this.btnChips[e]);this.addObj(this.imgBetFrame,0,"imgBetFrame").addObj(this.txtBetTitle,0,"txtBetTitle").addObj(this.txtBetValue,0,"txtBetValue").addObj(this.btnPlay,0,"btnPlay").addObj(this.btnReset,0,"btnReset")}}class Ao extends L{constructor(){super(),l(this,"cnvBet",new jo),this.cnvBet.pivotRule=oe.Center,this.addObj(this.cnvBet,0,"cnvBet")}}class Mo extends L{constructor(){super(),l(this,"cnvAutoPlay"),l(this,"turboIsOn",!1),l(this,"autoPlayTweens"),l(this,"stopBonus",!1),l(this,"cnvAutoPlayList"),l(this,"isShowAutoplay",!1),this.cnvAutoPlay=new be,this.cnvAutoPlayList=new L,this.addObj(this.cnvAutoPlayList,0,"cnvAutoPlayList").addObj(this.cnvAutoPlay,0,"cnvAutoPlay")}}class Bo extends L{constructor(){super(),l(this,"imgCreditFrame"),l(this,"txtCreditValue"),l(this,"txtCreditTitle"),this.imgCreditFrame=new N("bet_amount"),this.imgCreditFrame.pivotRule=oe.Center,this.imgCreditFrame.scale.set(.8,1),this.txtCreditValue=new B(No(9999999)),this.txtCreditValue.pivotRule=oe.Center,this.txtCreditValue.fitType="Shrink",this.txtCreditValue.setFitBox(260,100),this.txtCreditValue.position.set(0,2),this.txtCreditTitle=new B(To("credit")),this.txtCreditTitle.pivotRule=oe.Center,this.txtCreditTitle.fitType="Shrink",this.txtCreditTitle.setFitBox(120,100),this.txtCreditTitle.position.set(0,-42),this.addObj(this.imgCreditFrame,0,"imgCreditFrame").addObj(this.txtCreditValue,0,"txtCreditValue").addObj(this.txtCreditTitle,0,"txtCreditTitle")}}class Fo extends L{constructor(){super(),l(this,"cnvCredit",new Bo),l(this,"spGameTitle"),this.cnvCredit.pivotRule=oe.Center,this.spGameTitle=new ve("spTitle"),this.spGameTitle.state.setAnimation(0,"animation",!0),this.addObj(this.cnvCredit,0,"cnvCredit").addObj(this.spGameTitle,0,"spGameTitle")}}function Vo(e=.8){return new ae(100,100,100).fill(h.Black,e)}class Lo extends L{constructor(){super(),l(this,"imgColorsFrame"),l(this,"imgNotiPanel"),l(this,"txtNoti"),l(this,"btnColors",[]),l(this,"colorsValue",[1,2,3,4,5,6]),this.imgColorsFrame=new N("Board"),this.imgColorsFrame.pivotRule=oe.Center,this.imgColorsFrame.scale.set(1.38),this.imgNotiPanel=new N("NotiPanel"),this.imgNotiPanel.pivotRule=oe.Center,this.imgNotiPanel.position.set(0,-160),this.imgNotiPanel.scale.set(1.38,1.5),this.txtNoti=new B(function(e="Noti goes to here",t){let s;return s={text:e,key:t,fill:[h.White,h.Gold],size:164,weight:"100",font:"Aachen Bold",stroke:h.Black,strokeThickness:5,lineJoin:"round"},s}("","noColor")),this.txtNoti.pivotRule=oe.Center,this.txtNoti.position.set(0,-160),this.txtNoti.fitType="Shrink",this.txtNoti.setFitBox(600,40);for(let e=0;e<6;e++)this.btnColors[e]=new fe("chip_1$"),this.btnColors[e].pivotRule=oe.Center,e<3?this.btnColors[e].position.set(220*e-220,-60):this.btnColors[e].position.set(220*e-880,100),this.addObj(this.btnColors[e],1);this.addObj(this.imgColorsFrame,0).addObj(this.imgNotiPanel,0).addObj(this.txtNoti,1)}highlightColor(e){this.btnColors[e].setTex("chip_5$");for(let t of this.btnColors)this.btnColors.indexOf(t)!=e&&t.setTex("chip_1$")}}class Wo extends L{constructor(){super(),l(this,"spDice",[]),l(this,"dicePos",[new ce(-100,-100),new ce(0,0),new ce(100,-100)]);for(let e=0;e<3;e++)this.spDice[e]=new j("sp_dice"),this.spDice[e].state.setAnimation(0,"p_1",!1),this.spDice[e].position=this.dicePos[e],this.spDice[e].scale.set(2),1==e?this.addObj(this.spDice[e],1):this.addObj(this.spDice[e],0)}}class qo extends L{constructor(){super(),l(this,"btnAuto"),l(this,"btnAutoRounds",[]),l(this,"autoRounds",[10,25,50,100]),l(this,"isOpen",!1),this.btnAuto=new ye("bt_autoplay"),this.btnAuto.addCenteredTxt(Oo("autoplay"),16),this.btnAuto.pivotRule=oe.Center,this.btnAuto.txtFitType("Shrink"),this.btnAuto.txtFitBox(.9),this.btnAuto.setOnClick((()=>{!1===this.isOpen?this.twOpenAutoplay():this.twCloseAutoplay()}));for(let e=0;e<4;e++)this.btnAutoRounds[e]=new ge(Vo()),this.btnAutoRounds[e].addCenteredTxt(Do(this.autoRounds[e])),this.btnAutoRounds[e].pivotRule=oe.Center,this.btnAutoRounds[e].txtFitType("Shrink"),this.btnAutoRounds[e].txtFitBox(1),this.btnAutoRounds[e].scale.set(0),this.addObj(this.btnAutoRounds[e]);this.addObj(this.btnAuto,0)}twOpenAutoplay(){this.isOpen=!0;for(let e=0;e<4;e++)this.btnAutoRounds[e].scale.set(0),"landscape"===pgame.currStyle.name?this.tweens.create("openAutoplay"+e,this.btnAutoRounds[e],{alpha:1,position:{x:this.btnAuto.position.x-180+120*e,y:this.btnAuto.position.y-100},scale:{x:1,y:1}},500).delay(100*e).start():this.tweens.create("openAutoplay"+e,this.btnAutoRounds[e],{alpha:1,position:{x:this.btnAuto.position.x-540+120*e,y:this.btnAuto.position.y},scale:{x:1,y:1}},500).delay(100*e).start()}twCloseAutoplay(e=500,t=!1){this.isOpen=!1;for(let s=0;s<4;s++)"landscape"===pgame.currStyle.name?this.tweens.create("closeAutoplay"+s,this.btnAutoRounds[s],{alpha:0,position:{x:this.btnAuto.position.x,y:this.btnAuto.position.y},scale:{x:0,y:0}},e).delay(100*s).start().on("end",(()=>{t&&setTimeout((()=>{this.twOpenAutoplay()}),200)})):this.tweens.create("closeAutoplay"+s,this.btnAutoRounds[s],{alpha:0,position:{x:this.btnAuto.position.x,y:this.btnAuto.position.y},scale:{x:0,y:0}},e).delay(100*(3-s)).start().on("end",(()=>{t&&setTimeout((()=>{this.twOpenAutoplay()}),200)}))}}class Uo extends L{constructor(){super(),l(this,"cnvColorsBoard",new Lo),l(this,"cnvDice",new Wo),l(this,"cnvAuto",new qo),this.cnvColorsBoard.pivotRule=oe.Center,this.cnvDice.pivotRule=oe.Center,this.cnvAuto.pivotRule=oe.Center,this.addObj(this.cnvColorsBoard,0,"cnvColorsBoard").addObj(this.cnvDice,0,"cnvDice").addObj(this.cnvAuto,0,"cnvAuto")}}class zo extends L{constructor(){super(),l(this,"topPanel",new Fo),l(this,"middlePanel",new Uo),l(this,"bottomPanel",new Ao),l(this,"sidePanel",new Mo),l(this,"_win",0),l(this,"isFirstStart",!0),this.name="GUI",this.bottomPanel.pivotRule=oe.Center,this.middlePanel.pivotRule=oe.Center,this.topPanel.pivotRule=oe.Center,this._setBtnCallBack(),this._setBtnEffect(),this.addObj(this.middlePanel,0,"middlePanel").addObj(this.bottomPanel,0,"bottomPanel").addObj(this.sidePanel,0,"sidePanel").addObj(this.topPanel,0,"topPanel")}get winMeter(){return this._win}set winMeter(e){this._win=Math.round(e)}creditAnim(e,t=500){return this.tweens.create("credit",pgame.data,{credits:e},t).on("start",(()=>{pgame.sound.CoinIncrement.play()})).on("end",(()=>{pgame.sound.CoinIncrement.stop()}))}winMeterAnim(e,t=500){return this.tweens.create("win",this,{winMeter:e},t).on("start",(()=>{pgame.sound.CoinIncrement.play()})).on("end",(()=>{pgame.sound.CoinIncrement.stop()}))}startClearWinAnim(e=500,t=0){const s=this.tweens.create("clear-win",this,{winMeter:0},e).delay(t),r=this.tweens.getByName("win");return void 0!==r?r.chain(s):s.start(),s}toggleSound(){API.musicMuted.value&&API.soundMuted.value?API.musicMuted.value=API.soundMuted.value=!1:API.musicMuted.value=API.soundMuted.value=!0}setBtnSoundTex(e){}bindDataEvents(e){e.on("credit",(e=>{this.topPanel.cnvCredit.txtCreditValue.text=ie.currency(e)})),e.on("bet",((e,t)=>{this.bottomPanel.cnvBet.txtBetValue.text=ie.currency(t)}))}disableBetButtons(){this.bottomPanel.cnvBet.btnReset.setOnClick(!1),this.bottomPanel.cnvBet.btnReset.alpha=.5,this.bottomPanel.cnvBet.btnPlay.setOnClick(!1),this.bottomPanel.cnvBet.btnPlay.alpha=.5,this.middlePanel.cnvAuto.btnAuto.setOnClick(!1),this.middlePanel.cnvAuto.btnAuto.alpha=.5;for(let e=0;e<6;e++)e<5&&(this.bottomPanel.cnvBet.btnChips[e].setOnClick(!1),this.bottomPanel.cnvBet.btnChips[e].alpha=.5),this.middlePanel.cnvColorsBoard.btnColors[e].setOnClick(!1),this.middlePanel.cnvColorsBoard.btnColors[e].alpha=.5}enableBetButtons(){this.bottomPanel.cnvBet.btnReset.alpha=1,this.bottomPanel.cnvBet.btnPlay.alpha=1,this.middlePanel.cnvAuto.btnAuto.alpha=1;for(let e=0;e<6;e++)e<5&&(this.bottomPanel.cnvBet.btnChips[e].alpha=1),this.middlePanel.cnvColorsBoard.btnColors[e].alpha=1}toggleMaxBet(){pgame.sound.Click.play(),pgame.data.isMaxBet()?pgame.data.setBetAtId(pgame.data.lastBetIndex):pgame.data.setBetAtId(pgame.data.maxIndex)}getServerData(){}_setBtnCallBack(){}_setBtnEffect(){}useViewStyle(e){if("landscape"===pgame.currStyle.name)for(let t=0;t<5;t++)this.bottomPanel.cnvBet.btnChips[t].position.set(150*t+520,0),this.bottomPanel.cnvBet.btnChips[t].scale.set(1.5);else for(let t=0;t<5;t++)this.bottomPanel.cnvBet.btnChips[t].scale.set(1.5),this.bottomPanel.cnvBet.btnChips[t].position.set(150*t-300,-180);!this.isFirstStart&&this.middlePanel.cnvAuto.isOpen?this.middlePanel.cnvAuto.twCloseAutoplay(500,!0):this.isFirstStart&&(this.isFirstStart=!1)}}class Ko extends L{constructor(){super(),l(this,"popMsg"),l(this,"mysteryWinCredit",0),l(this,"shootingWild",[]),l(this,"GSMysteryWin",0),this.name="FRONT-LAYER";const e=new ae(500,200,20).fill(h.Black,.8);this.popMsg=new _e(e,{size:32,weight:"700",width:400,align:"center"},this.tweens),this.popMsg.pivotRule=oe.Center,this.popMsg.sound="hint",this.addObj(this.popMsg,2,"pop-up-hint")}}class Go extends se{constructor(){super("Bonus")}}class Ho extends Ee{constructor(e){super({view:e,autoStart:!0,sharedTicker:!0,autoDensity:!0,antialias:!0,backgroundAlpha:0,backgroundRect:!0}),l(this,"interact",new he),l(this,"data"),l(this,"ce",mo),l(this,"title"),l(this,"gui"),l(this,"front"),l(this,"music"),l(this,"sound"),l(this,"vueLeftHandedMode",!1),l(this,"balanceDecreases"),l(this,"nonWinning"),l(this,"countNonWinning"),l(this,"controlCaseGS",!1),l(this,"controlCaseWild",!1),globalThis.pgame=this,this.ticker.minFPS=30,this.assets.prepareLoading(),this.assets.onPreprocessAssetList=e=>{},this.assets.addCSSFont("Mulish",void 0,"abc"),this.assets.addCSSFont("Aachen Bold",void 0,"abc"),this.data=new Ce,this.addState(new xo),this.setState("Loading"),this.startLoop(),this.loadAssets().then((()=>(this.initSounds(),this.interact.listenKeyboard(document),this.setLocale(API.locale.value),this.addScenes(...function(){const e=new zo;pgame.gui=e;const t=new Ko;return pgame.front=t,pgame.stage.addObj(e).addObj(t),[]}()),this.gui.bindDataEvents(this.data),this.addState(new le),this.addState(new Io),this.addState(new Go),this.addState(new Ro),this.setGameAPI(),window.addEventListener("message",this.updateBalanceListener.bind(this)),this.state("Loading").isGameInitialized=!0,this)))}mainLoop(e){let t=this.currState.runFSM(e);""!=t&&this.setState(t),this.stage.update(e)}detectStyleAndResize(e,t){e>=t?"landscape"!=this.currStyle.name&&this.applyLandscape():"portrait"!=this.currStyle.name&&this.applyPortrait(),this.resizeAppView(e,t)}resizeAppView(e,t){let s=e,r=t;e*this.desiredRatio<=t?r=s*this.desiredRatio:s=r/this.desiredRatio,this.renderer.resize(s,r),this.stage.scale.set(s/this.desiredWidth,r/this.desiredHeight)}prepareStyle(){this.stage.tweens.endAll();const e=this.currStyle.Resolution;this.setResolution(e[0],e[1])}applyLandscape(){this.setViewStyle("landscape"),this.prepareStyle(),this.useCurrentViewStlye(),API.isLandscape.value=!0}applyPortrait(){this.setViewStyle("portrait"),this.prepareStyle(),this.useCurrentViewStlye(),API.isLandscape.value=!1}initSounds(){var e,t;this.music=this.soundManager.setGroup("music",ke),this.sound=this.soundManager.setGroup("sound",xe),this.soundManager.setMutexGroup("bg",Object.values(this.music)),e=this.music,t=this.sound,e.Bg.volume=.3,e.Bg.loop=!0,e.Bg.fadeIn=e.Bg.fadeOut=1e3,e.Bg.mutexPause=!0,t.Click.volume=3.3,t.CoinIncrement.fadeOut=500,t.Hint.volume=2}setGameAPI(){de(API.locale,(e=>{this.setLocale(e),this.useCurrentLocale()})),de(API.volume,(e=>{this.soundManager.volumeAll=e}),{immediate:!0}),de([API.musicMuted,API.soundMuted],(([e,t])=>{const s=this.soundManager.groups.music,r=this.soundManager.groups.sound;s.muted=e,r.muted=t,this.gui.setBtnSoundTex(!e||!t)}),{immediate:!0})}updateBalanceListener(e){if(null!=e.data&&"EVO:REFRESH_BALANCE"==e.data.command&&null!=e.data.expectedBalance&&!isNaN(e.data.expectedBalance)){const t=this.gui.tweens.getByName("win");t&&t.stop(),this.data.realCredits=e.data.expectedBalance,this.data.syncCredits()}}}export{Ho as MainGame,me as vb};
